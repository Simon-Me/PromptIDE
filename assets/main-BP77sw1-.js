(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var Cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xf={exports:{}},Tl={},Ef={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function Qx(){if(Py)return ot;Py=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),T=Symbol.iterator;function C(F){return F===null||typeof F!="object"?null:(F=T&&F[T]||F["@@iterator"],typeof F=="function"?F:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,K={};function B(F,se,Ie){this.props=F,this.context=se,this.refs=K,this.updater=Ie||z}B.prototype.isReactComponent={},B.prototype.setState=function(F,se){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,se,"setState")},B.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function ee(){}ee.prototype=B.prototype;function te(F,se,Ie){this.props=F,this.context=se,this.refs=K,this.updater=Ie||z}var pe=te.prototype=new ee;pe.constructor=te,G(pe,B.prototype),pe.isPureReactComponent=!0;var we=Array.isArray,re=Object.prototype.hasOwnProperty,ie={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function k(F,se,Ie){var Qe,Je={},st=null,tt=null;if(se!=null)for(Qe in se.ref!==void 0&&(tt=se.ref),se.key!==void 0&&(st=""+se.key),se)re.call(se,Qe)&&!R.hasOwnProperty(Qe)&&(Je[Qe]=se[Qe]);var at=arguments.length-2;if(at===1)Je.children=Ie;else if(1<at){for(var bt=Array(at),It=0;It<at;It++)bt[It]=arguments[It+2];Je.children=bt}if(F&&F.defaultProps)for(Qe in at=F.defaultProps,at)Je[Qe]===void 0&&(Je[Qe]=at[Qe]);return{$$typeof:n,type:F,key:st,ref:tt,props:Je,_owner:ie.current}}function A(F,se){return{$$typeof:n,type:F.type,key:se,ref:F.ref,props:F.props,_owner:F._owner}}function O(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function D(F){var se={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Ie){return se[Ie]})}var N=/\/+/g;function P(F,se){return typeof F=="object"&&F!==null&&F.key!=null?D(""+F.key):se.toString(36)}function Ae(F,se,Ie,Qe,Je){var st=typeof F;(st==="undefined"||st==="boolean")&&(F=null);var tt=!1;if(F===null)tt=!0;else switch(st){case"string":case"number":tt=!0;break;case"object":switch(F.$$typeof){case n:case e:tt=!0}}if(tt)return tt=F,Je=Je(tt),F=Qe===""?"."+P(tt,0):Qe,we(Je)?(Ie="",F!=null&&(Ie=F.replace(N,"$&/")+"/"),Ae(Je,se,Ie,"",function(It){return It})):Je!=null&&(O(Je)&&(Je=A(Je,Ie+(!Je.key||tt&&tt.key===Je.key?"":(""+Je.key).replace(N,"$&/")+"/")+F)),se.push(Je)),1;if(tt=0,Qe=Qe===""?".":Qe+":",we(F))for(var at=0;at<F.length;at++){st=F[at];var bt=Qe+P(st,at);tt+=Ae(st,se,Ie,bt,Je)}else if(bt=C(F),typeof bt=="function")for(F=bt.call(F),at=0;!(st=F.next()).done;)st=st.value,bt=Qe+P(st,at++),tt+=Ae(st,se,Ie,bt,Je);else if(st==="object")throw se=String(F),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return tt}function De(F,se,Ie){if(F==null)return F;var Qe=[],Je=0;return Ae(F,Qe,"","",function(st){return se.call(Ie,st,Je++)}),Qe}function Be(F){if(F._status===-1){var se=F._result;se=se(),se.then(function(Ie){(F._status===0||F._status===-1)&&(F._status=1,F._result=Ie)},function(Ie){(F._status===0||F._status===-1)&&(F._status=2,F._result=Ie)}),F._status===-1&&(F._status=0,F._result=se)}if(F._status===1)return F._result.default;throw F._result}var qe={current:null},ge={transition:null},Te={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:ge,ReactCurrentOwner:ie};function _e(){throw Error("act(...) is not supported in production builds of React.")}return ot.Children={map:De,forEach:function(F,se,Ie){De(F,function(){se.apply(this,arguments)},Ie)},count:function(F){var se=0;return De(F,function(){se++}),se},toArray:function(F){return De(F,function(se){return se})||[]},only:function(F){if(!O(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},ot.Component=B,ot.Fragment=t,ot.Profiler=o,ot.PureComponent=te,ot.StrictMode=i,ot.Suspense=m,ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Te,ot.act=_e,ot.cloneElement=function(F,se,Ie){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Qe=G({},F.props),Je=F.key,st=F.ref,tt=F._owner;if(se!=null){if(se.ref!==void 0&&(st=se.ref,tt=ie.current),se.key!==void 0&&(Je=""+se.key),F.type&&F.type.defaultProps)var at=F.type.defaultProps;for(bt in se)re.call(se,bt)&&!R.hasOwnProperty(bt)&&(Qe[bt]=se[bt]===void 0&&at!==void 0?at[bt]:se[bt])}var bt=arguments.length-2;if(bt===1)Qe.children=Ie;else if(1<bt){at=Array(bt);for(var It=0;It<bt;It++)at[It]=arguments[It+2];Qe.children=at}return{$$typeof:n,type:F.type,key:Je,ref:st,props:Qe,_owner:tt}},ot.createContext=function(F){return F={$$typeof:d,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},ot.createElement=k,ot.createFactory=function(F){var se=k.bind(null,F);return se.type=F,se},ot.createRef=function(){return{current:null}},ot.forwardRef=function(F){return{$$typeof:h,render:F}},ot.isValidElement=O,ot.lazy=function(F){return{$$typeof:x,_payload:{_status:-1,_result:F},_init:Be}},ot.memo=function(F,se){return{$$typeof:v,type:F,compare:se===void 0?null:se}},ot.startTransition=function(F){var se=ge.transition;ge.transition={};try{F()}finally{ge.transition=se}},ot.unstable_act=_e,ot.useCallback=function(F,se){return qe.current.useCallback(F,se)},ot.useContext=function(F){return qe.current.useContext(F)},ot.useDebugValue=function(){},ot.useDeferredValue=function(F){return qe.current.useDeferredValue(F)},ot.useEffect=function(F,se){return qe.current.useEffect(F,se)},ot.useId=function(){return qe.current.useId()},ot.useImperativeHandle=function(F,se,Ie){return qe.current.useImperativeHandle(F,se,Ie)},ot.useInsertionEffect=function(F,se){return qe.current.useInsertionEffect(F,se)},ot.useLayoutEffect=function(F,se){return qe.current.useLayoutEffect(F,se)},ot.useMemo=function(F,se){return qe.current.useMemo(F,se)},ot.useReducer=function(F,se,Ie){return qe.current.useReducer(F,se,Ie)},ot.useRef=function(F){return qe.current.useRef(F)},ot.useState=function(F){return qe.current.useState(F)},ot.useSyncExternalStore=function(F,se,Ie){return qe.current.useSyncExternalStore(F,se,Ie)},ot.useTransition=function(){return qe.current.useTransition()},ot.version="18.3.1",ot}var Ry;function Ap(){return Ry||(Ry=1,Ef.exports=Qx()),Ef.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function Yx(){if(Dy)return Tl;Dy=1;var n=Ap(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(h,m,v){var x,T={},C=null,z=null;v!==void 0&&(C=""+v),m.key!==void 0&&(C=""+m.key),m.ref!==void 0&&(z=m.ref);for(x in m)i.call(m,x)&&!a.hasOwnProperty(x)&&(T[x]=m[x]);if(h&&h.defaultProps)for(x in m=h.defaultProps,m)T[x]===void 0&&(T[x]=m[x]);return{$$typeof:e,type:h,key:C,ref:z,props:T,_owner:o.current}}return Tl.Fragment=t,Tl.jsx=d,Tl.jsxs=d,Tl}var Oy;function Xx(){return Oy||(Oy=1,xf.exports=Yx()),xf.exports}var f=Xx(),H=Ap();const Bs=Rv(H);var Au={},Tf={exports:{}},vr={},Sf={exports:{}},kf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function Jx(){return My||(My=1,function(n){function e(ge,Te){var _e=ge.length;ge.push(Te);e:for(;0<_e;){var F=_e-1>>>1,se=ge[F];if(0<o(se,Te))ge[F]=Te,ge[_e]=se,_e=F;else break e}}function t(ge){return ge.length===0?null:ge[0]}function i(ge){if(ge.length===0)return null;var Te=ge[0],_e=ge.pop();if(_e!==Te){ge[0]=_e;e:for(var F=0,se=ge.length,Ie=se>>>1;F<Ie;){var Qe=2*(F+1)-1,Je=ge[Qe],st=Qe+1,tt=ge[st];if(0>o(Je,_e))st<se&&0>o(tt,Je)?(ge[F]=tt,ge[st]=_e,F=st):(ge[F]=Je,ge[Qe]=_e,F=Qe);else if(st<se&&0>o(tt,_e))ge[F]=tt,ge[st]=_e,F=st;else break e}}return Te}function o(ge,Te){var _e=ge.sortIndex-Te.sortIndex;return _e!==0?_e:ge.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var m=[],v=[],x=1,T=null,C=3,z=!1,G=!1,K=!1,B=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function pe(ge){for(var Te=t(v);Te!==null;){if(Te.callback===null)i(v);else if(Te.startTime<=ge)i(v),Te.sortIndex=Te.expirationTime,e(m,Te);else break;Te=t(v)}}function we(ge){if(K=!1,pe(ge),!G)if(t(m)!==null)G=!0,Be(re);else{var Te=t(v);Te!==null&&qe(we,Te.startTime-ge)}}function re(ge,Te){G=!1,K&&(K=!1,ee(k),k=-1),z=!0;var _e=C;try{for(pe(Te),T=t(m);T!==null&&(!(T.expirationTime>Te)||ge&&!D());){var F=T.callback;if(typeof F=="function"){T.callback=null,C=T.priorityLevel;var se=F(T.expirationTime<=Te);Te=n.unstable_now(),typeof se=="function"?T.callback=se:T===t(m)&&i(m),pe(Te)}else i(m);T=t(m)}if(T!==null)var Ie=!0;else{var Qe=t(v);Qe!==null&&qe(we,Qe.startTime-Te),Ie=!1}return Ie}finally{T=null,C=_e,z=!1}}var ie=!1,R=null,k=-1,A=5,O=-1;function D(){return!(n.unstable_now()-O<A)}function N(){if(R!==null){var ge=n.unstable_now();O=ge;var Te=!0;try{Te=R(!0,ge)}finally{Te?P():(ie=!1,R=null)}}else ie=!1}var P;if(typeof te=="function")P=function(){te(N)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,De=Ae.port2;Ae.port1.onmessage=N,P=function(){De.postMessage(null)}}else P=function(){B(N,0)};function Be(ge){R=ge,ie||(ie=!0,P())}function qe(ge,Te){k=B(function(){ge(n.unstable_now())},Te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ge){ge.callback=null},n.unstable_continueExecution=function(){G||z||(G=!0,Be(re))},n.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ge?Math.floor(1e3/ge):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(ge){switch(C){case 1:case 2:case 3:var Te=3;break;default:Te=C}var _e=C;C=Te;try{return ge()}finally{C=_e}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ge,Te){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var _e=C;C=ge;try{return Te()}finally{C=_e}},n.unstable_scheduleCallback=function(ge,Te,_e){var F=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?F+_e:F):_e=F,ge){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=_e+se,ge={id:x++,callback:Te,priorityLevel:ge,startTime:_e,expirationTime:se,sortIndex:-1},_e>F?(ge.sortIndex=_e,e(v,ge),t(m)===null&&ge===t(v)&&(K?(ee(k),k=-1):K=!0,qe(we,_e-F))):(ge.sortIndex=se,e(m,ge),G||z||(G=!0,Be(re))),ge},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(ge){var Te=C;return function(){var _e=C;C=Te;try{return ge.apply(this,arguments)}finally{C=_e}}}}(kf)),kf}var jy;function Zx(){return jy||(jy=1,Sf.exports=Jx()),Sf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function e1(){if(Ly)return vr;Ly=1;var n=Ap(),e=Zx();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){d(r,s),d(r+"Capture",s)}function d(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},T={};function C(r){return m.call(T,r)?!0:m.call(x,r)?!1:v.test(r)?T[r]=!0:(x[r]=!0,!1)}function z(r,s,l,u){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function G(r,s,l,u){if(s===null||typeof s>"u"||z(r,s,l,u))return!0;if(u)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function K(r,s,l,u,p,y,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=E}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){B[r]=new K(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];B[s]=new K(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){B[r]=new K(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){B[r]=new K(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){B[r]=new K(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){B[r]=new K(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){B[r]=new K(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){B[r]=new K(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){B[r]=new K(r,5,!1,r.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function te(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(ee,te);B[s]=new K(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(ee,te);B[s]=new K(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(ee,te);B[s]=new K(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){B[r]=new K(r,1,!1,r.toLowerCase(),null,!1,!1)}),B.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){B[r]=new K(r,1,!1,r.toLowerCase(),null,!0,!0)});function pe(r,s,l,u){var p=B.hasOwnProperty(s)?B[s]:null;(p!==null?p.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(G(s,l,p,u)&&(l=null),u||p===null?C(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,u=p.attributeNamespace,l===null?r.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,u?r.setAttributeNS(u,s,l):r.setAttribute(s,l))))}var we=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),ie=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),D=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),qe=Symbol.for("react.offscreen"),ge=Symbol.iterator;function Te(r){return r===null||typeof r!="object"?null:(r=ge&&r[ge]||r["@@iterator"],typeof r=="function"?r:null)}var _e=Object.assign,F;function se(r){if(F===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);F=s&&s[1]||""}return`
`+F+r}var Ie=!1;function Qe(r,s){if(!r||Ie)return"";Ie=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Z){var u=Z}Reflect.construct(r,[],s)}else{try{s.call()}catch(Z){u=Z}r.call(s.prototype)}else{try{throw Error()}catch(Z){u=Z}r()}}catch(Z){if(Z&&u&&typeof Z.stack=="string"){for(var p=Z.stack.split(`
`),y=u.stack.split(`
`),E=p.length-1,j=y.length-1;1<=E&&0<=j&&p[E]!==y[j];)j--;for(;1<=E&&0<=j;E--,j--)if(p[E]!==y[j]){if(E!==1||j!==1)do if(E--,j--,0>j||p[E]!==y[j]){var U=`
`+p[E].replace(" at new "," at ");return r.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",r.displayName)),U}while(1<=E&&0<=j);break}}}finally{Ie=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?se(r):""}function Je(r){switch(r.tag){case 5:return se(r.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return r=Qe(r.type,!1),r;case 11:return r=Qe(r.type.render,!1),r;case 1:return r=Qe(r.type,!0),r;default:return""}}function st(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case ie:return"Portal";case A:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case Ae:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case D:return(r.displayName||"Context")+".Consumer";case O:return(r._context.displayName||"Context")+".Provider";case N:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case De:return s=r.displayName||null,s!==null?s:st(r.type)||"Memo";case Be:s=r._payload,r=r._init;try{return st(r(s))}catch{}}return null}function tt(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return st(s);case 8:return s===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function at(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function bt(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function It(r){var s=bt(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(E){u=""+E,y.call(this,E)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ut(r){r._valueTracker||(r._valueTracker=It(r))}function Wn(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return r&&(u=bt(r)?r.checked?"true":"false":r.value),r=u,r!==l?(s.setValue(r),!0):!1}function Gt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function pn(r,s){var l=s.checked;return _e({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function zt(r,s){var l=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;l=at(s.value!=null?s.value:l),r._wrapperState={initialChecked:u,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function _r(r,s){s=s.checked,s!=null&&pe(r,"checked",s,!1)}function ir(r,s){_r(r,s);var l=at(s.value),u=s.type;if(l!=null)u==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(u==="submit"||u==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?jn(r,s.type,l):s.hasOwnProperty("defaultValue")&&jn(r,s.type,at(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function sr(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function jn(r,s,l){(s!=="number"||Gt(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var tn=Array.isArray;function mn(r,s,l,u){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&u&&(r[l].defaultSelected=!0)}else{for(l=""+at(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function or(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return _e({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Bt(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(tn(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:at(l)}}function Qn(r,s){var l=at(s.value),u=at(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),u!=null&&(r.defaultValue=""+u)}function Pr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Ct(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Ct(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var gn,br=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,u,p){MSApp.execUnsafeLocalFunction(function(){return r(s,l,u,p)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(gn=gn||document.createElement("div"),gn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=gn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Ln(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tn=["Webkit","ms","Moz","O"];Object.keys(ar).forEach(function(r){Tn.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ar[s]=ar[r]})});function Rr(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ar.hasOwnProperty(r)&&ar[r]?(""+s).trim():s+"px"}function Sn(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var u=l.indexOf("--")===0,p=Rr(l,s[l],u);l==="float"&&(l="cssFloat"),u?r.setProperty(l,p):r[l]=p}}var lr=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kn(r,s){if(s){if(lr[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function xr(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var In=null;function pt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var q=null,X=null,me=null;function Se(r){if(r=cl(r)){if(typeof q!="function")throw Error(t(280));var s=r.stateNode;s&&(s=$c(s),q(r.stateNode,r.type,s))}}function ke(r){X?me?me.push(r):me=[r]:X=r}function Ue(){if(X){var r=X,s=me;if(me=X=null,Se(r),s)for(r=0;r<s.length;r++)Se(s[r])}}function Oe(r,s){return r(s)}function wt(){}var St=!1;function Cn(r,s,l){if(St)return r(s,l);St=!0;try{return Oe(r,s,l)}finally{St=!1,(X!==null||me!==null)&&(wt(),Ue())}}function kt(r,s){var l=r.stateNode;if(l===null)return null;var u=$c(l);if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var cr=!1;if(h)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){cr=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{cr=!1}function Yt(r,s,l,u,p,y,E,j,U){var Z=Array.prototype.slice.call(arguments,3);try{s.apply(l,Z)}catch(he){this.onError(he)}}var yn=!1,di=null,Yn=!1,Oi=null,so={onError:function(r){yn=!0,di=r}};function Er(r,s,l,u,p,y,E,j,U){yn=!1,di=null,Yt.apply(so,arguments)}function hi(r,s,l,u,p,y,E,j,U){if(Er.apply(this,arguments),yn){if(yn){var Z=di;yn=!1,di=null}else throw Error(t(198));Yn||(Yn=!0,Oi=Z)}}function nn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Wr(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Xn(r){if(nn(r)!==r)throw Error(t(188))}function cs(r){var s=r.alternate;if(!s){if(s=nn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,u=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Xn(p),r;if(y===u)return Xn(p),s;y=y.sibling}throw Error(t(188))}if(l.return!==u.return)l=p,u=y;else{for(var E=!1,j=p.child;j;){if(j===l){E=!0,l=p,u=y;break}if(j===u){E=!0,u=p,l=y;break}j=j.sibling}if(!E){for(j=y.child;j;){if(j===l){E=!0,l=y,u=p;break}if(j===u){E=!0,u=y,l=p;break}j=j.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==u)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function Mi(r){return r=cs(r),r!==null?fi(r):null}function fi(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=fi(r);if(s!==null)return s;r=r.sibling}return null}var pi=e.unstable_scheduleCallback,ji=e.unstable_cancelCallback,us=e.unstable_shouldYield,ds=e.unstable_requestPaint,mt=e.unstable_now,Li=e.unstable_getCurrentPriorityLevel,Vn=e.unstable_ImmediatePriority,Dr=e.unstable_UserBlockingPriority,rn=e.unstable_NormalPriority,Or=e.unstable_LowPriority,hs=e.unstable_IdlePriority,Qr=null,sn=null;function fs(r){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Qr,r,void 0,(r.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:b,w=Math.log,S=Math.LN2;function b(r){return r>>>=0,r===0?32:31-(w(r)/S|0)|0}var M=64,V=4194304;function L(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function J(r,s){var l=r.pendingLanes;if(l===0)return 0;var u=0,p=r.suspendedLanes,y=r.pingedLanes,E=l&268435455;if(E!==0){var j=E&~p;j!==0?u=L(j):(y&=E,y!==0&&(u=L(y)))}else E=l&~p,E!==0?u=L(E):y!==0&&(u=L(y));if(u===0)return 0;if(s!==0&&s!==u&&(s&p)===0&&(p=u&-u,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if((u&4)!==0&&(u|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=u;0<s;)l=31-$t(s),p=1<<l,u|=r[l],s&=~p;return u}function oe(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ae(r,s){for(var l=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes;0<y;){var E=31-$t(y),j=1<<E,U=p[E];U===-1?((j&l)===0||(j&u)!==0)&&(p[E]=oe(j,s)):U<=s&&(r.expiredLanes|=j),y&=~j}}function le(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ce(){var r=M;return M<<=1,(M&4194240)===0&&(M=64),r}function Ee(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Me(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-$t(s),r[s]=l}function Pe(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var u=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-$t(l),y=1<<p;s[p]=0,u[p]=-1,r[p]=-1,l&=~y}}function $e(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var u=31-$t(l),p=1<<u;p&s|r[u]&s&&(r[u]|=s),l&=~p}}var Le=0;function rt(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Ht,on,Kt,Mr,ps,Bo=!1,jr=[],an=null,ur=null,Yr=null,ms=new Map,Lr=new Map,mi=[],Jd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kc(r,s){switch(r){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":ms.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lr.delete(s.pointerId)}}function dr(r,s,l,u,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},s!==null&&(s=cl(s),s!==null&&on(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function Zd(r,s,l,u,p){switch(s){case"focusin":return an=dr(an,r,s,l,u,p),!0;case"dragenter":return ur=dr(ur,r,s,l,u,p),!0;case"mouseover":return Yr=dr(Yr,r,s,l,u,p),!0;case"pointerover":var y=p.pointerId;return ms.set(y,dr(ms.get(y)||null,r,s,l,u,p)),!0;case"gotpointercapture":return y=p.pointerId,Lr.set(y,dr(Lr.get(y)||null,r,s,l,u,p)),!0}return!1}function Ic(r){var s=uo(r.target);if(s!==null){var l=nn(s);if(l!==null){if(s=l.tag,s===13){if(s=Wr(l),s!==null){r.blockedOn=s,ps(r.priority,function(){Kt(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Vi(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=$o(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);In=u,l.target.dispatchEvent(u),In=null}else return s=cl(l),s!==null&&on(s),r.blockedOn=l,!1;s.shift()}return!0}function oo(r,s,l){Vi(r)&&l.delete(s)}function Cc(){Bo=!1,an!==null&&Vi(an)&&(an=null),ur!==null&&Vi(ur)&&(ur=null),Yr!==null&&Vi(Yr)&&(Yr=null),ms.forEach(oo),Lr.forEach(oo)}function Xr(r,s){r.blockedOn===s&&(r.blockedOn=null,Bo||(Bo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Cc)))}function Jr(r){function s(p){return Xr(p,r)}if(0<jr.length){Xr(jr[0],r);for(var l=1;l<jr.length;l++){var u=jr[l];u.blockedOn===r&&(u.blockedOn=null)}}for(an!==null&&Xr(an,r),ur!==null&&Xr(ur,r),Yr!==null&&Xr(Yr,r),ms.forEach(s),Lr.forEach(s),l=0;l<mi.length;l++)u=mi[l],u.blockedOn===r&&(u.blockedOn=null);for(;0<mi.length&&(l=mi[0],l.blockedOn===null);)Ic(l),l.blockedOn===null&&mi.shift()}var Fi=we.ReactCurrentBatchConfig,gs=!0;function Ot(r,s,l,u){var p=Le,y=Fi.transition;Fi.transition=null;try{Le=1,Qa(r,s,l,u)}finally{Le=p,Fi.transition=y}}function eh(r,s,l,u){var p=Le,y=Fi.transition;Fi.transition=null;try{Le=4,Qa(r,s,l,u)}finally{Le=p,Fi.transition=y}}function Qa(r,s,l,u){if(gs){var p=$o(r,s,l,u);if(p===null)dh(r,s,u,ao,l),kc(r,u);else if(Zd(p,r,s,l,u))u.stopPropagation();else if(kc(r,u),s&4&&-1<Jd.indexOf(r)){for(;p!==null;){var y=cl(p);if(y!==null&&Ht(y),y=$o(r,s,l,u),y===null&&dh(r,s,u,ao,l),y===p)break;p=y}p!==null&&u.stopPropagation()}else dh(r,s,u,null,l)}}var ao=null;function $o(r,s,l,u){if(ao=null,r=pt(u),r=uo(r),r!==null)if(s=nn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Wr(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return ao=r,null}function Ya(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Li()){case Vn:return 1;case Dr:return 4;case rn:case Or:return 16;case hs:return 536870912;default:return 16}default:return 16}}var Tr=null,Ho=null,hr=null;function Xa(){if(hr)return hr;var r,s=Ho,l=s.length,u,p="value"in Tr?Tr.value:Tr.textContent,y=p.length;for(r=0;r<l&&s[r]===p[r];r++);var E=l-r;for(u=1;u<=E&&s[l-u]===p[y-u];u++);return hr=p.slice(r,1<u?1-u:void 0)}function qo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function gi(){return!0}function Ja(){return!1}function An(r){function s(l,u,p,y,E){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var j in r)r.hasOwnProperty(j)&&(l=r[j],this[j]=l?l(y):y[j]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?gi:Ja,this.isPropagationStopped=Ja,this}return _e(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),s}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=An(Zr),yi=_e({},Zr,{view:0,detail:0}),th=An(yi),Ko,Ui,ys,lo=_e({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vi,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ys&&(ys&&r.type==="mousemove"?(Ko=r.screenX-ys.screenX,Ui=r.screenY-ys.screenY):Ui=Ko=0,ys=r),Ko)},movementY:function(r){return"movementY"in r?r.movementY:Ui}}),Wo=An(lo),Za=_e({},lo,{dataTransfer:0}),Ac=An(Za),Qo=_e({},yi,{relatedTarget:0}),Yo=An(Qo),Nc=_e({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),zi=An(Nc),Pc=_e({},Zr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Rc=An(Pc),Dc=_e({},Zr,{data:0}),el=An(Dc),Xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Oc[r])?!!s[r]:!1}function vi(){return Mc}var c=_e({},yi,{key:function(r){if(r.key){var s=Xo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=qo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Jn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vi,charCode:function(r){return r.type==="keypress"?qo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=An(c),_=_e({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=An(_),W=_e({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vi}),ne=An(W),xe=_e({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Et=An(xe),ln=_e({},lo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),gt=An(ln),vn=[9,13,27,32],Xt=h&&"CompositionEvent"in window,Vr=null;h&&"documentMode"in document&&(Vr=document.documentMode);var Sr=h&&"TextEvent"in window&&!Vr,co=h&&(!Xt||Vr&&8<Vr&&11>=Vr),Jo=" ",Sm=!1;function km(r,s){switch(r){case"keyup":return vn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Im(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zo=!1;function Gb(r,s){switch(r){case"compositionend":return Im(s);case"keypress":return s.which!==32?null:(Sm=!0,Jo);case"textInput":return r=s.data,r===Jo&&Sm?null:r;default:return null}}function Kb(r,s){if(Zo)return r==="compositionend"||!Xt&&km(r,s)?(r=Xa(),hr=Ho=Tr=null,Zo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return co&&s.locale!=="ko"?null:s.data;default:return null}}var Wb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Wb[r.type]:s==="textarea"}function Am(r,s,l,u){ke(u),s=Uc(s,"onChange"),0<s.length&&(l=new Go("onChange","change",null,l,u),r.push({event:l,listeners:s}))}var tl=null,nl=null;function Qb(r){Km(r,0)}function jc(r){var s=ia(r);if(Wn(s))return r}function Yb(r,s){if(r==="change")return s}var Nm=!1;if(h){var nh;if(h){var rh="oninput"in document;if(!rh){var Pm=document.createElement("div");Pm.setAttribute("oninput","return;"),rh=typeof Pm.oninput=="function"}nh=rh}else nh=!1;Nm=nh&&(!document.documentMode||9<document.documentMode)}function Rm(){tl&&(tl.detachEvent("onpropertychange",Dm),nl=tl=null)}function Dm(r){if(r.propertyName==="value"&&jc(nl)){var s=[];Am(s,nl,r,pt(r)),Cn(Qb,s)}}function Xb(r,s,l){r==="focusin"?(Rm(),tl=s,nl=l,tl.attachEvent("onpropertychange",Dm)):r==="focusout"&&Rm()}function Jb(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return jc(nl)}function Zb(r,s){if(r==="click")return jc(s)}function ex(r,s){if(r==="input"||r==="change")return jc(s)}function tx(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var ei=typeof Object.is=="function"?Object.is:tx;function rl(r,s){if(ei(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!m.call(s,p)||!ei(r[p],s[p]))return!1}return!0}function Om(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mm(r,s){var l=Om(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=s&&u>=s)return{node:l,offset:s-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Om(l)}}function jm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?jm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Lm(){for(var r=window,s=Gt();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Gt(r.document)}return s}function ih(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function nx(r){var s=Lm(),l=r.focusedElem,u=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&jm(l.ownerDocument.documentElement,l)){if(u!==null&&ih(l)){if(s=u.start,r=u.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,y=Math.min(u.start,p);u=u.end===void 0?y:Math.min(u.end,p),!r.extend&&y>u&&(p=u,u=y,y=p),p=Mm(l,y);var E=Mm(l,u);p&&E&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),r.removeAllRanges(),y>u?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var rx=h&&"documentMode"in document&&11>=document.documentMode,ea=null,sh=null,il=null,oh=!1;function Vm(r,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;oh||ea==null||ea!==Gt(u)||(u=ea,"selectionStart"in u&&ih(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),il&&rl(il,u)||(il=u,u=Uc(sh,"onSelect"),0<u.length&&(s=new Go("onSelect","select",null,s,l),r.push({event:s,listeners:u}),s.target=ea)))}function Lc(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var ta={animationend:Lc("Animation","AnimationEnd"),animationiteration:Lc("Animation","AnimationIteration"),animationstart:Lc("Animation","AnimationStart"),transitionend:Lc("Transition","TransitionEnd")},ah={},Fm={};h&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete ta.animationend.animation,delete ta.animationiteration.animation,delete ta.animationstart.animation),"TransitionEvent"in window||delete ta.transitionend.transition);function Vc(r){if(ah[r])return ah[r];if(!ta[r])return r;var s=ta[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Fm)return ah[r]=s[l];return r}var Um=Vc("animationend"),zm=Vc("animationiteration"),Bm=Vc("animationstart"),$m=Vc("transitionend"),Hm=new Map,qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(r,s){Hm.set(r,s),a(s,[r])}for(var lh=0;lh<qm.length;lh++){var ch=qm[lh],ix=ch.toLowerCase(),sx=ch[0].toUpperCase()+ch.slice(1);vs(ix,"on"+sx)}vs(Um,"onAnimationEnd"),vs(zm,"onAnimationIteration"),vs(Bm,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs($m,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function Gm(r,s,l){var u=r.type||"unknown-event";r.currentTarget=l,hi(u,s,void 0,r),r.currentTarget=null}function Km(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],p=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var E=u.length-1;0<=E;E--){var j=u[E],U=j.instance,Z=j.currentTarget;if(j=j.listener,U!==y&&p.isPropagationStopped())break e;Gm(p,j,Z),y=U}else for(E=0;E<u.length;E++){if(j=u[E],U=j.instance,Z=j.currentTarget,j=j.listener,U!==y&&p.isPropagationStopped())break e;Gm(p,j,Z),y=U}}}if(Yn)throw r=Oi,Yn=!1,Oi=null,r}function Nt(r,s){var l=s[yh];l===void 0&&(l=s[yh]=new Set);var u=r+"__bubble";l.has(u)||(Wm(s,r,2,!1),l.add(u))}function uh(r,s,l){var u=0;s&&(u|=4),Wm(l,r,u,s)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function ol(r){if(!r[Fc]){r[Fc]=!0,i.forEach(function(l){l!=="selectionchange"&&(ox.has(l)||uh(l,!1,r),uh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Fc]||(s[Fc]=!0,uh("selectionchange",!1,s))}}function Wm(r,s,l,u){switch(Ya(s)){case 1:var p=Ot;break;case 4:p=eh;break;default:p=Qa}l=p.bind(null,s,l,r),p=void 0,!cr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function dh(r,s,l,u,p){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var j=u.stateNode.containerInfo;if(j===p||j.nodeType===8&&j.parentNode===p)break;if(E===4)for(E=u.return;E!==null;){var U=E.tag;if((U===3||U===4)&&(U=E.stateNode.containerInfo,U===p||U.nodeType===8&&U.parentNode===p))return;E=E.return}for(;j!==null;){if(E=uo(j),E===null)return;if(U=E.tag,U===5||U===6){u=y=E;continue e}j=j.parentNode}}u=u.return}Cn(function(){var Z=y,he=pt(l),ye=[];e:{var de=Hm.get(r);if(de!==void 0){var Ne=Go,Ve=r;switch(r){case"keypress":if(qo(l)===0)break e;case"keydown":case"keyup":Ne=g;break;case"focusin":Ve="focus",Ne=Yo;break;case"focusout":Ve="blur",Ne=Yo;break;case"beforeblur":case"afterblur":Ne=Yo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=Ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=ne;break;case Um:case zm:case Bm:Ne=zi;break;case $m:Ne=Et;break;case"scroll":Ne=th;break;case"wheel":Ne=gt;break;case"copy":case"cut":case"paste":Ne=Rc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=I}var Fe=(s&4)!==0,Wt=!Fe&&r==="scroll",Q=Fe?de!==null?de+"Capture":null:de;Fe=[];for(var $=Z,Y;$!==null;){Y=$;var ve=Y.stateNode;if(Y.tag===5&&ve!==null&&(Y=ve,Q!==null&&(ve=kt($,Q),ve!=null&&Fe.push(al($,ve,Y)))),Wt)break;$=$.return}0<Fe.length&&(de=new Ne(de,Ve,null,l,he),ye.push({event:de,listeners:Fe}))}}if((s&7)===0){e:{if(de=r==="mouseover"||r==="pointerover",Ne=r==="mouseout"||r==="pointerout",de&&l!==In&&(Ve=l.relatedTarget||l.fromElement)&&(uo(Ve)||Ve[Bi]))break e;if((Ne||de)&&(de=he.window===he?he:(de=he.ownerDocument)?de.defaultView||de.parentWindow:window,Ne?(Ve=l.relatedTarget||l.toElement,Ne=Z,Ve=Ve?uo(Ve):null,Ve!==null&&(Wt=nn(Ve),Ve!==Wt||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Ne=null,Ve=Z),Ne!==Ve)){if(Fe=Wo,ve="onMouseLeave",Q="onMouseEnter",$="mouse",(r==="pointerout"||r==="pointerover")&&(Fe=I,ve="onPointerLeave",Q="onPointerEnter",$="pointer"),Wt=Ne==null?de:ia(Ne),Y=Ve==null?de:ia(Ve),de=new Fe(ve,$+"leave",Ne,l,he),de.target=Wt,de.relatedTarget=Y,ve=null,uo(he)===Z&&(Fe=new Fe(Q,$+"enter",Ve,l,he),Fe.target=Y,Fe.relatedTarget=Wt,ve=Fe),Wt=ve,Ne&&Ve)t:{for(Fe=Ne,Q=Ve,$=0,Y=Fe;Y;Y=na(Y))$++;for(Y=0,ve=Q;ve;ve=na(ve))Y++;for(;0<$-Y;)Fe=na(Fe),$--;for(;0<Y-$;)Q=na(Q),Y--;for(;$--;){if(Fe===Q||Q!==null&&Fe===Q.alternate)break t;Fe=na(Fe),Q=na(Q)}Fe=null}else Fe=null;Ne!==null&&Qm(ye,de,Ne,Fe,!1),Ve!==null&&Wt!==null&&Qm(ye,Wt,Ve,Fe,!0)}}e:{if(de=Z?ia(Z):window,Ne=de.nodeName&&de.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&de.type==="file")var ze=Yb;else if(Cm(de))if(Nm)ze=ex;else{ze=Jb;var Ge=Xb}else(Ne=de.nodeName)&&Ne.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(ze=Zb);if(ze&&(ze=ze(r,Z))){Am(ye,ze,l,he);break e}Ge&&Ge(r,de,Z),r==="focusout"&&(Ge=de._wrapperState)&&Ge.controlled&&de.type==="number"&&jn(de,"number",de.value)}switch(Ge=Z?ia(Z):window,r){case"focusin":(Cm(Ge)||Ge.contentEditable==="true")&&(ea=Ge,sh=Z,il=null);break;case"focusout":il=sh=ea=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Vm(ye,l,he);break;case"selectionchange":if(rx)break;case"keydown":case"keyup":Vm(ye,l,he)}var Ke;if(Xt)e:{switch(r){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Zo?km(r,l)&&(Ze="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(co&&l.locale!=="ko"&&(Zo||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Zo&&(Ke=Xa()):(Tr=he,Ho="value"in Tr?Tr.value:Tr.textContent,Zo=!0)),Ge=Uc(Z,Ze),0<Ge.length&&(Ze=new el(Ze,r,null,l,he),ye.push({event:Ze,listeners:Ge}),Ke?Ze.data=Ke:(Ke=Im(l),Ke!==null&&(Ze.data=Ke)))),(Ke=Sr?Gb(r,l):Kb(r,l))&&(Z=Uc(Z,"onBeforeInput"),0<Z.length&&(he=new el("onBeforeInput","beforeinput",null,l,he),ye.push({event:he,listeners:Z}),he.data=Ke))}Km(ye,s)})}function al(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Uc(r,s){for(var l=s+"Capture",u=[];r!==null;){var p=r,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=kt(r,l),y!=null&&u.unshift(al(r,y,p)),y=kt(r,s),y!=null&&u.push(al(r,y,p))),r=r.return}return u}function na(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Qm(r,s,l,u,p){for(var y=s._reactName,E=[];l!==null&&l!==u;){var j=l,U=j.alternate,Z=j.stateNode;if(U!==null&&U===u)break;j.tag===5&&Z!==null&&(j=Z,p?(U=kt(l,y),U!=null&&E.unshift(al(l,U,j))):p||(U=kt(l,y),U!=null&&E.push(al(l,U,j)))),l=l.return}E.length!==0&&r.push({event:s,listeners:E})}var ax=/\r\n?/g,lx=/\u0000|\uFFFD/g;function Ym(r){return(typeof r=="string"?r:""+r).replace(ax,`
`).replace(lx,"")}function zc(r,s,l){if(s=Ym(s),Ym(r)!==s&&l)throw Error(t(425))}function Bc(){}var hh=null,fh=null;function ph(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm<"u"?function(r){return Xm.resolve(null).then(r).catch(dx)}:mh;function dx(r){setTimeout(function(){throw r})}function gh(r,s){var l=s,u=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(u===0){r.removeChild(p),Jr(s);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=p}while(l);Jr(s)}function ws(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Jm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var ra=Math.random().toString(36).slice(2),wi="__reactFiber$"+ra,ll="__reactProps$"+ra,Bi="__reactContainer$"+ra,yh="__reactEvents$"+ra,hx="__reactListeners$"+ra,fx="__reactHandles$"+ra;function uo(r){var s=r[wi];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Bi]||l[wi]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=Jm(r);r!==null;){if(l=r[wi])return l;r=Jm(r)}return s}r=l,l=r.parentNode}return null}function cl(r){return r=r[wi]||r[Bi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ia(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function $c(r){return r[ll]||null}var vh=[],sa=-1;function _s(r){return{current:r}}function Pt(r){0>sa||(r.current=vh[sa],vh[sa]=null,sa--)}function At(r,s){sa++,vh[sa]=r.current,r.current=s}var bs={},Fn=_s(bs),fr=_s(!1),ho=bs;function oa(r,s){var l=r.type.contextTypes;if(!l)return bs;var u=r.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=s[y];return u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=p),p}function pr(r){return r=r.childContextTypes,r!=null}function Hc(){Pt(fr),Pt(Fn)}function Zm(r,s,l){if(Fn.current!==bs)throw Error(t(168));At(Fn,s),At(fr,l)}function eg(r,s,l){var u=r.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return l;u=u.getChildContext();for(var p in u)if(!(p in s))throw Error(t(108,tt(r)||"Unknown",p));return _e({},l,u)}function qc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||bs,ho=Fn.current,At(Fn,r),At(fr,fr.current),!0}function tg(r,s,l){var u=r.stateNode;if(!u)throw Error(t(169));l?(r=eg(r,s,ho),u.__reactInternalMemoizedMergedChildContext=r,Pt(fr),Pt(Fn),At(Fn,r)):Pt(fr),At(fr,l)}var $i=null,Gc=!1,wh=!1;function ng(r){$i===null?$i=[r]:$i.push(r)}function px(r){Gc=!0,ng(r)}function xs(){if(!wh&&$i!==null){wh=!0;var r=0,s=Le;try{var l=$i;for(Le=1;r<l.length;r++){var u=l[r];do u=u(!0);while(u!==null)}$i=null,Gc=!1}catch(p){throw $i!==null&&($i=$i.slice(r+1)),pi(Vn,xs),p}finally{Le=s,wh=!1}}return null}var aa=[],la=0,Kc=null,Wc=0,Fr=[],Ur=0,fo=null,Hi=1,qi="";function po(r,s){aa[la++]=Wc,aa[la++]=Kc,Kc=r,Wc=s}function rg(r,s,l){Fr[Ur++]=Hi,Fr[Ur++]=qi,Fr[Ur++]=fo,fo=r;var u=Hi;r=qi;var p=32-$t(u)-1;u&=~(1<<p),l+=1;var y=32-$t(s)+p;if(30<y){var E=p-p%5;y=(u&(1<<E)-1).toString(32),u>>=E,p-=E,Hi=1<<32-$t(s)+p|l<<p|u,qi=y+r}else Hi=1<<y|l<<p|u,qi=r}function _h(r){r.return!==null&&(po(r,1),rg(r,1,0))}function bh(r){for(;r===Kc;)Kc=aa[--la],aa[la]=null,Wc=aa[--la],aa[la]=null;for(;r===fo;)fo=Fr[--Ur],Fr[Ur]=null,qi=Fr[--Ur],Fr[Ur]=null,Hi=Fr[--Ur],Fr[Ur]=null}var kr=null,Ir=null,Mt=!1,ti=null;function ig(r,s){var l=Hr(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function sg(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,kr=r,Ir=ws(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,kr=r,Ir=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=fo!==null?{id:Hi,overflow:qi}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Hr(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,kr=r,Ir=null,!0):!1;default:return!1}}function xh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Eh(r){if(Mt){var s=Ir;if(s){var l=s;if(!sg(r,s)){if(xh(r))throw Error(t(418));s=ws(l.nextSibling);var u=kr;s&&sg(r,s)?ig(u,l):(r.flags=r.flags&-4097|2,Mt=!1,kr=r)}}else{if(xh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Mt=!1,kr=r}}}function og(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;kr=r}function Qc(r){if(r!==kr)return!1;if(!Mt)return og(r),Mt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!ph(r.type,r.memoizedProps)),s&&(s=Ir)){if(xh(r))throw ag(),Error(t(418));for(;s;)ig(r,s),s=ws(s.nextSibling)}if(og(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){Ir=ws(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}Ir=null}}else Ir=kr?ws(r.stateNode.nextSibling):null;return!0}function ag(){for(var r=Ir;r;)r=ws(r.nextSibling)}function ca(){Ir=kr=null,Mt=!1}function Th(r){ti===null?ti=[r]:ti.push(r)}var mx=we.ReactCurrentBatchConfig;function ul(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var u=l.stateNode}if(!u)throw Error(t(147,r));var p=u,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(E){var j=p.refs;E===null?delete j[y]:j[y]=E},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Yc(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function lg(r){var s=r._init;return s(r._payload)}function cg(r){function s(Q,$){if(r){var Y=Q.deletions;Y===null?(Q.deletions=[$],Q.flags|=16):Y.push($)}}function l(Q,$){if(!r)return null;for(;$!==null;)s(Q,$),$=$.sibling;return null}function u(Q,$){for(Q=new Map;$!==null;)$.key!==null?Q.set($.key,$):Q.set($.index,$),$=$.sibling;return Q}function p(Q,$){return Q=Ns(Q,$),Q.index=0,Q.sibling=null,Q}function y(Q,$,Y){return Q.index=Y,r?(Y=Q.alternate,Y!==null?(Y=Y.index,Y<$?(Q.flags|=2,$):Y):(Q.flags|=2,$)):(Q.flags|=1048576,$)}function E(Q){return r&&Q.alternate===null&&(Q.flags|=2),Q}function j(Q,$,Y,ve){return $===null||$.tag!==6?($=gf(Y,Q.mode,ve),$.return=Q,$):($=p($,Y),$.return=Q,$)}function U(Q,$,Y,ve){var ze=Y.type;return ze===R?he(Q,$,Y.props.children,ve,Y.key):$!==null&&($.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===Be&&lg(ze)===$.type)?(ve=p($,Y.props),ve.ref=ul(Q,$,Y),ve.return=Q,ve):(ve=_u(Y.type,Y.key,Y.props,null,Q.mode,ve),ve.ref=ul(Q,$,Y),ve.return=Q,ve)}function Z(Q,$,Y,ve){return $===null||$.tag!==4||$.stateNode.containerInfo!==Y.containerInfo||$.stateNode.implementation!==Y.implementation?($=yf(Y,Q.mode,ve),$.return=Q,$):($=p($,Y.children||[]),$.return=Q,$)}function he(Q,$,Y,ve,ze){return $===null||$.tag!==7?($=xo(Y,Q.mode,ve,ze),$.return=Q,$):($=p($,Y),$.return=Q,$)}function ye(Q,$,Y){if(typeof $=="string"&&$!==""||typeof $=="number")return $=gf(""+$,Q.mode,Y),$.return=Q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case re:return Y=_u($.type,$.key,$.props,null,Q.mode,Y),Y.ref=ul(Q,null,$),Y.return=Q,Y;case ie:return $=yf($,Q.mode,Y),$.return=Q,$;case Be:var ve=$._init;return ye(Q,ve($._payload),Y)}if(tn($)||Te($))return $=xo($,Q.mode,Y,null),$.return=Q,$;Yc(Q,$)}return null}function de(Q,$,Y,ve){var ze=$!==null?$.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return ze!==null?null:j(Q,$,""+Y,ve);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case re:return Y.key===ze?U(Q,$,Y,ve):null;case ie:return Y.key===ze?Z(Q,$,Y,ve):null;case Be:return ze=Y._init,de(Q,$,ze(Y._payload),ve)}if(tn(Y)||Te(Y))return ze!==null?null:he(Q,$,Y,ve,null);Yc(Q,Y)}return null}function Ne(Q,$,Y,ve,ze){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return Q=Q.get(Y)||null,j($,Q,""+ve,ze);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case re:return Q=Q.get(ve.key===null?Y:ve.key)||null,U($,Q,ve,ze);case ie:return Q=Q.get(ve.key===null?Y:ve.key)||null,Z($,Q,ve,ze);case Be:var Ge=ve._init;return Ne(Q,$,Y,Ge(ve._payload),ze)}if(tn(ve)||Te(ve))return Q=Q.get(Y)||null,he($,Q,ve,ze,null);Yc($,ve)}return null}function Ve(Q,$,Y,ve){for(var ze=null,Ge=null,Ke=$,Ze=$=0,bn=null;Ke!==null&&Ze<Y.length;Ze++){Ke.index>Ze?(bn=Ke,Ke=null):bn=Ke.sibling;var _t=de(Q,Ke,Y[Ze],ve);if(_t===null){Ke===null&&(Ke=bn);break}r&&Ke&&_t.alternate===null&&s(Q,Ke),$=y(_t,$,Ze),Ge===null?ze=_t:Ge.sibling=_t,Ge=_t,Ke=bn}if(Ze===Y.length)return l(Q,Ke),Mt&&po(Q,Ze),ze;if(Ke===null){for(;Ze<Y.length;Ze++)Ke=ye(Q,Y[Ze],ve),Ke!==null&&($=y(Ke,$,Ze),Ge===null?ze=Ke:Ge.sibling=Ke,Ge=Ke);return Mt&&po(Q,Ze),ze}for(Ke=u(Q,Ke);Ze<Y.length;Ze++)bn=Ne(Ke,Q,Ze,Y[Ze],ve),bn!==null&&(r&&bn.alternate!==null&&Ke.delete(bn.key===null?Ze:bn.key),$=y(bn,$,Ze),Ge===null?ze=bn:Ge.sibling=bn,Ge=bn);return r&&Ke.forEach(function(Ps){return s(Q,Ps)}),Mt&&po(Q,Ze),ze}function Fe(Q,$,Y,ve){var ze=Te(Y);if(typeof ze!="function")throw Error(t(150));if(Y=ze.call(Y),Y==null)throw Error(t(151));for(var Ge=ze=null,Ke=$,Ze=$=0,bn=null,_t=Y.next();Ke!==null&&!_t.done;Ze++,_t=Y.next()){Ke.index>Ze?(bn=Ke,Ke=null):bn=Ke.sibling;var Ps=de(Q,Ke,_t.value,ve);if(Ps===null){Ke===null&&(Ke=bn);break}r&&Ke&&Ps.alternate===null&&s(Q,Ke),$=y(Ps,$,Ze),Ge===null?ze=Ps:Ge.sibling=Ps,Ge=Ps,Ke=bn}if(_t.done)return l(Q,Ke),Mt&&po(Q,Ze),ze;if(Ke===null){for(;!_t.done;Ze++,_t=Y.next())_t=ye(Q,_t.value,ve),_t!==null&&($=y(_t,$,Ze),Ge===null?ze=_t:Ge.sibling=_t,Ge=_t);return Mt&&po(Q,Ze),ze}for(Ke=u(Q,Ke);!_t.done;Ze++,_t=Y.next())_t=Ne(Ke,Q,Ze,_t.value,ve),_t!==null&&(r&&_t.alternate!==null&&Ke.delete(_t.key===null?Ze:_t.key),$=y(_t,$,Ze),Ge===null?ze=_t:Ge.sibling=_t,Ge=_t);return r&&Ke.forEach(function(Wx){return s(Q,Wx)}),Mt&&po(Q,Ze),ze}function Wt(Q,$,Y,ve){if(typeof Y=="object"&&Y!==null&&Y.type===R&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case re:e:{for(var ze=Y.key,Ge=$;Ge!==null;){if(Ge.key===ze){if(ze=Y.type,ze===R){if(Ge.tag===7){l(Q,Ge.sibling),$=p(Ge,Y.props.children),$.return=Q,Q=$;break e}}else if(Ge.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===Be&&lg(ze)===Ge.type){l(Q,Ge.sibling),$=p(Ge,Y.props),$.ref=ul(Q,Ge,Y),$.return=Q,Q=$;break e}l(Q,Ge);break}else s(Q,Ge);Ge=Ge.sibling}Y.type===R?($=xo(Y.props.children,Q.mode,ve,Y.key),$.return=Q,Q=$):(ve=_u(Y.type,Y.key,Y.props,null,Q.mode,ve),ve.ref=ul(Q,$,Y),ve.return=Q,Q=ve)}return E(Q);case ie:e:{for(Ge=Y.key;$!==null;){if($.key===Ge)if($.tag===4&&$.stateNode.containerInfo===Y.containerInfo&&$.stateNode.implementation===Y.implementation){l(Q,$.sibling),$=p($,Y.children||[]),$.return=Q,Q=$;break e}else{l(Q,$);break}else s(Q,$);$=$.sibling}$=yf(Y,Q.mode,ve),$.return=Q,Q=$}return E(Q);case Be:return Ge=Y._init,Wt(Q,$,Ge(Y._payload),ve)}if(tn(Y))return Ve(Q,$,Y,ve);if(Te(Y))return Fe(Q,$,Y,ve);Yc(Q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,$!==null&&$.tag===6?(l(Q,$.sibling),$=p($,Y),$.return=Q,Q=$):(l(Q,$),$=gf(Y,Q.mode,ve),$.return=Q,Q=$),E(Q)):l(Q,$)}return Wt}var ua=cg(!0),ug=cg(!1),Xc=_s(null),Jc=null,da=null,Sh=null;function kh(){Sh=da=Jc=null}function Ih(r){var s=Xc.current;Pt(Xc),r._currentValue=s}function Ch(r,s,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===l)break;r=r.return}}function ha(r,s){Jc=r,Sh=da=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(mr=!0),r.firstContext=null)}function zr(r){var s=r._currentValue;if(Sh!==r)if(r={context:r,memoizedValue:s,next:null},da===null){if(Jc===null)throw Error(t(308));da=r,Jc.dependencies={lanes:0,firstContext:r}}else da=da.next=r;return s}var mo=null;function Ah(r){mo===null?mo=[r]:mo.push(r)}function dg(r,s,l,u){var p=s.interleaved;return p===null?(l.next=l,Ah(s)):(l.next=p.next,p.next=l),s.interleaved=l,Gi(r,u)}function Gi(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Es=!1;function Nh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ki(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Ts(r,s,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(vt&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,Gi(r,l)}return p=u.interleaved,p===null?(s.next=s,Ah(u)):(s.next=p.next,p.next=s),u.interleaved=s,Gi(r,l)}function Zc(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,$e(r,l)}}function fg(r,s){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,effects:u.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function eu(r,s,l,u){var p=r.updateQueue;Es=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,j=p.shared.pending;if(j!==null){p.shared.pending=null;var U=j,Z=U.next;U.next=null,E===null?y=Z:E.next=Z,E=U;var he=r.alternate;he!==null&&(he=he.updateQueue,j=he.lastBaseUpdate,j!==E&&(j===null?he.firstBaseUpdate=Z:j.next=Z,he.lastBaseUpdate=U))}if(y!==null){var ye=p.baseState;E=0,he=Z=U=null,j=y;do{var de=j.lane,Ne=j.eventTime;if((u&de)===de){he!==null&&(he=he.next={eventTime:Ne,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Ve=r,Fe=j;switch(de=s,Ne=l,Fe.tag){case 1:if(Ve=Fe.payload,typeof Ve=="function"){ye=Ve.call(Ne,ye,de);break e}ye=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Fe.payload,de=typeof Ve=="function"?Ve.call(Ne,ye,de):Ve,de==null)break e;ye=_e({},ye,de);break e;case 2:Es=!0}}j.callback!==null&&j.lane!==0&&(r.flags|=64,de=p.effects,de===null?p.effects=[j]:de.push(j))}else Ne={eventTime:Ne,lane:de,tag:j.tag,payload:j.payload,callback:j.callback,next:null},he===null?(Z=he=Ne,U=ye):he=he.next=Ne,E|=de;if(j=j.next,j===null){if(j=p.shared.pending,j===null)break;de=j,j=de.next,de.next=null,p.lastBaseUpdate=de,p.shared.pending=null}}while(!0);if(he===null&&(U=ye),p.baseState=U,p.firstBaseUpdate=Z,p.lastBaseUpdate=he,s=p.shared.interleaved,s!==null){p=s;do E|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);vo|=E,r.lanes=E,r.memoizedState=ye}}function pg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var u=r[s],p=u.callback;if(p!==null){if(u.callback=null,u=l,typeof p!="function")throw Error(t(191,p));p.call(u)}}}var dl={},_i=_s(dl),hl=_s(dl),fl=_s(dl);function go(r){if(r===dl)throw Error(t(174));return r}function Ph(r,s){switch(At(fl,s),At(hl,r),At(_i,dl),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Tt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=Tt(s,r)}Pt(_i),At(_i,s)}function fa(){Pt(_i),Pt(hl),Pt(fl)}function mg(r){go(fl.current);var s=go(_i.current),l=Tt(s,r.type);s!==l&&(At(hl,r),At(_i,l))}function Rh(r){hl.current===r&&(Pt(_i),Pt(hl))}var jt=_s(0);function tu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Oh(){for(var r=0;r<Dh.length;r++)Dh[r]._workInProgressVersionPrimary=null;Dh.length=0}var nu=we.ReactCurrentDispatcher,Mh=we.ReactCurrentBatchConfig,yo=0,Lt=null,cn=null,wn=null,ru=!1,pl=!1,ml=0,gx=0;function Un(){throw Error(t(321))}function jh(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!ei(r[l],s[l]))return!1;return!0}function Lh(r,s,l,u,p,y){if(yo=y,Lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,nu.current=r===null||r.memoizedState===null?_x:bx,r=l(u,p),pl){y=0;do{if(pl=!1,ml=0,25<=y)throw Error(t(301));y+=1,wn=cn=null,s.updateQueue=null,nu.current=xx,r=l(u,p)}while(pl)}if(nu.current=ou,s=cn!==null&&cn.next!==null,yo=0,wn=cn=Lt=null,ru=!1,s)throw Error(t(300));return r}function Vh(){var r=ml!==0;return ml=0,r}function bi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Lt.memoizedState=wn=r:wn=wn.next=r,wn}function Br(){if(cn===null){var r=Lt.alternate;r=r!==null?r.memoizedState:null}else r=cn.next;var s=wn===null?Lt.memoizedState:wn.next;if(s!==null)wn=s,cn=r;else{if(r===null)throw Error(t(310));cn=r,r={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},wn===null?Lt.memoizedState=wn=r:wn=wn.next=r}return wn}function gl(r,s){return typeof s=="function"?s(r):s}function Fh(r){var s=Br(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var u=cn,p=u.baseQueue,y=l.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}u.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,u=u.baseState;var j=E=null,U=null,Z=y;do{var he=Z.lane;if((yo&he)===he)U!==null&&(U=U.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),u=Z.hasEagerState?Z.eagerState:r(u,Z.action);else{var ye={lane:he,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};U===null?(j=U=ye,E=u):U=U.next=ye,Lt.lanes|=he,vo|=he}Z=Z.next}while(Z!==null&&Z!==y);U===null?E=u:U.next=j,ei(u,s.memoizedState)||(mr=!0),s.memoizedState=u,s.baseState=E,s.baseQueue=U,l.lastRenderedState=u}if(r=l.interleaved,r!==null){p=r;do y=p.lane,Lt.lanes|=y,vo|=y,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Uh(r){var s=Br(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var u=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=r(y,E.action),E=E.next;while(E!==p);ei(y,s.memoizedState)||(mr=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,u]}function gg(){}function yg(r,s){var l=Lt,u=Br(),p=s(),y=!ei(u.memoizedState,p);if(y&&(u.memoizedState=p,mr=!0),u=u.queue,zh(_g.bind(null,l,u,r),[r]),u.getSnapshot!==s||y||wn!==null&&wn.memoizedState.tag&1){if(l.flags|=2048,yl(9,wg.bind(null,l,u,p,s),void 0,null),_n===null)throw Error(t(349));(yo&30)!==0||vg(l,s,p)}return p}function vg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Lt.updateQueue,s===null?(s={lastEffect:null,stores:null},Lt.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function wg(r,s,l,u){s.value=l,s.getSnapshot=u,bg(s)&&xg(r)}function _g(r,s,l){return l(function(){bg(s)&&xg(r)})}function bg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!ei(r,l)}catch{return!0}}function xg(r){var s=Gi(r,1);s!==null&&si(s,r,1,-1)}function Eg(r){var s=bi();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:r},s.queue=r,r=r.dispatch=wx.bind(null,Lt,r),[s.memoizedState,r]}function yl(r,s,l,u){return r={tag:r,create:s,destroy:l,deps:u,next:null},s=Lt.updateQueue,s===null?(s={lastEffect:null,stores:null},Lt.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,s.lastEffect=r)),r}function Tg(){return Br().memoizedState}function iu(r,s,l,u){var p=bi();Lt.flags|=r,p.memoizedState=yl(1|s,l,void 0,u===void 0?null:u)}function su(r,s,l,u){var p=Br();u=u===void 0?null:u;var y=void 0;if(cn!==null){var E=cn.memoizedState;if(y=E.destroy,u!==null&&jh(u,E.deps)){p.memoizedState=yl(s,l,y,u);return}}Lt.flags|=r,p.memoizedState=yl(1|s,l,y,u)}function Sg(r,s){return iu(8390656,8,r,s)}function zh(r,s){return su(2048,8,r,s)}function kg(r,s){return su(4,2,r,s)}function Ig(r,s){return su(4,4,r,s)}function Cg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Ag(r,s,l){return l=l!=null?l.concat([r]):null,su(4,4,Cg.bind(null,s,r),l)}function Bh(){}function Ng(r,s){var l=Br();s=s===void 0?null:s;var u=l.memoizedState;return u!==null&&s!==null&&jh(s,u[1])?u[0]:(l.memoizedState=[r,s],r)}function Pg(r,s){var l=Br();s=s===void 0?null:s;var u=l.memoizedState;return u!==null&&s!==null&&jh(s,u[1])?u[0]:(r=r(),l.memoizedState=[r,s],r)}function Rg(r,s,l){return(yo&21)===0?(r.baseState&&(r.baseState=!1,mr=!0),r.memoizedState=l):(ei(l,s)||(l=ce(),Lt.lanes|=l,vo|=l,r.baseState=!0),s)}function yx(r,s){var l=Le;Le=l!==0&&4>l?l:4,r(!0);var u=Mh.transition;Mh.transition={};try{r(!1),s()}finally{Le=l,Mh.transition=u}}function Dg(){return Br().memoizedState}function vx(r,s,l){var u=Cs(r);if(l={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null},Og(r))Mg(s,l);else if(l=dg(r,s,l,u),l!==null){var p=er();si(l,r,u,p),jg(l,s,u)}}function wx(r,s,l){var u=Cs(r),p={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null};if(Og(r))Mg(s,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var E=s.lastRenderedState,j=y(E,l);if(p.hasEagerState=!0,p.eagerState=j,ei(j,E)){var U=s.interleaved;U===null?(p.next=p,Ah(s)):(p.next=U.next,U.next=p),s.interleaved=p;return}}catch{}finally{}l=dg(r,s,p,u),l!==null&&(p=er(),si(l,r,u,p),jg(l,s,u))}}function Og(r){var s=r.alternate;return r===Lt||s!==null&&s===Lt}function Mg(r,s){pl=ru=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function jg(r,s,l){if((l&4194240)!==0){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,$e(r,l)}}var ou={readContext:zr,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},_x={readContext:zr,useCallback:function(r,s){return bi().memoizedState=[r,s===void 0?null:s],r},useContext:zr,useEffect:Sg,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,iu(4194308,4,Cg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return iu(4194308,4,r,s)},useInsertionEffect:function(r,s){return iu(4,2,r,s)},useMemo:function(r,s){var l=bi();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var u=bi();return s=l!==void 0?l(s):s,u.memoizedState=u.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},u.queue=r,r=r.dispatch=vx.bind(null,Lt,r),[u.memoizedState,r]},useRef:function(r){var s=bi();return r={current:r},s.memoizedState=r},useState:Eg,useDebugValue:Bh,useDeferredValue:function(r){return bi().memoizedState=r},useTransition:function(){var r=Eg(!1),s=r[0];return r=yx.bind(null,r[1]),bi().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var u=Lt,p=bi();if(Mt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),_n===null)throw Error(t(349));(yo&30)!==0||vg(u,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,Sg(_g.bind(null,u,y,r),[r]),u.flags|=2048,yl(9,wg.bind(null,u,y,l,s),void 0,null),l},useId:function(){var r=bi(),s=_n.identifierPrefix;if(Mt){var l=qi,u=Hi;l=(u&~(1<<32-$t(u)-1)).toString(32)+l,s=":"+s+"R"+l,l=ml++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=gx++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},bx={readContext:zr,useCallback:Ng,useContext:zr,useEffect:zh,useImperativeHandle:Ag,useInsertionEffect:kg,useLayoutEffect:Ig,useMemo:Pg,useReducer:Fh,useRef:Tg,useState:function(){return Fh(gl)},useDebugValue:Bh,useDeferredValue:function(r){var s=Br();return Rg(s,cn.memoizedState,r)},useTransition:function(){var r=Fh(gl)[0],s=Br().memoizedState;return[r,s]},useMutableSource:gg,useSyncExternalStore:yg,useId:Dg,unstable_isNewReconciler:!1},xx={readContext:zr,useCallback:Ng,useContext:zr,useEffect:zh,useImperativeHandle:Ag,useInsertionEffect:kg,useLayoutEffect:Ig,useMemo:Pg,useReducer:Uh,useRef:Tg,useState:function(){return Uh(gl)},useDebugValue:Bh,useDeferredValue:function(r){var s=Br();return cn===null?s.memoizedState=r:Rg(s,cn.memoizedState,r)},useTransition:function(){var r=Uh(gl)[0],s=Br().memoizedState;return[r,s]},useMutableSource:gg,useSyncExternalStore:yg,useId:Dg,unstable_isNewReconciler:!1};function ni(r,s){if(r&&r.defaultProps){s=_e({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function $h(r,s,l,u){s=r.memoizedState,l=l(u,s),l=l==null?s:_e({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var au={isMounted:function(r){return(r=r._reactInternals)?nn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var u=er(),p=Cs(r),y=Ki(u,p);y.payload=s,l!=null&&(y.callback=l),s=Ts(r,y,p),s!==null&&(si(s,r,p,u),Zc(s,r,p))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var u=er(),p=Cs(r),y=Ki(u,p);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=Ts(r,y,p),s!==null&&(si(s,r,p,u),Zc(s,r,p))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=er(),u=Cs(r),p=Ki(l,u);p.tag=2,s!=null&&(p.callback=s),s=Ts(r,p,u),s!==null&&(si(s,r,u,l),Zc(s,r,u))}};function Lg(r,s,l,u,p,y,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,E):s.prototype&&s.prototype.isPureReactComponent?!rl(l,u)||!rl(p,y):!0}function Vg(r,s,l){var u=!1,p=bs,y=s.contextType;return typeof y=="object"&&y!==null?y=zr(y):(p=pr(s)?ho:Fn.current,u=s.contextTypes,y=(u=u!=null)?oa(r,p):bs),s=new s(l,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=au,r.stateNode=s,s._reactInternals=r,u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=y),s}function Fg(r,s,l,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==r&&au.enqueueReplaceState(s,s.state,null)}function Hh(r,s,l,u){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs={},Nh(r);var y=s.contextType;typeof y=="object"&&y!==null?p.context=zr(y):(y=pr(s)?ho:Fn.current,p.context=oa(r,y)),p.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&($h(r,s,y,l),p.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&au.enqueueReplaceState(p,p.state,null),eu(r,l,p,u),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function pa(r,s){try{var l="",u=s;do l+=Je(u),u=u.return;while(u);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:p,digest:null}}function qh(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Gh(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var Ex=typeof WeakMap=="function"?WeakMap:Map;function Ug(r,s,l){l=Ki(-1,l),l.tag=3,l.payload={element:null};var u=s.value;return l.callback=function(){pu||(pu=!0,lf=u),Gh(r,s)},l}function zg(r,s,l){l=Ki(-1,l),l.tag=3;var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var p=s.value;l.payload=function(){return u(p)},l.callback=function(){Gh(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Gh(r,s),typeof u!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),l}function Bg(r,s,l){var u=r.pingCache;if(u===null){u=r.pingCache=new Ex;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(l)||(p.add(l),r=Lx.bind(null,r,s,l),s.then(r,r))}function $g(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Hg(r,s,l,u,p){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Ki(-1,1),s.tag=2,Ts(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var Tx=we.ReactCurrentOwner,mr=!1;function Zn(r,s,l,u){s.child=r===null?ug(s,null,l,u):ua(s,r.child,l,u)}function qg(r,s,l,u,p){l=l.render;var y=s.ref;return ha(s,p),u=Lh(r,s,l,u,y,p),l=Vh(),r!==null&&!mr?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,Wi(r,s,p)):(Mt&&l&&_h(s),s.flags|=1,Zn(r,s,u,p),s.child)}function Gg(r,s,l,u,p){if(r===null){var y=l.type;return typeof y=="function"&&!mf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,Kg(r,s,y,u,p)):(r=_u(l.type,null,u,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,(r.lanes&p)===0){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:rl,l(E,u)&&r.ref===s.ref)return Wi(r,s,p)}return s.flags|=1,r=Ns(y,u),r.ref=s.ref,r.return=s,s.child=r}function Kg(r,s,l,u,p){if(r!==null){var y=r.memoizedProps;if(rl(y,u)&&r.ref===s.ref)if(mr=!1,s.pendingProps=u=y,(r.lanes&p)!==0)(r.flags&131072)!==0&&(mr=!0);else return s.lanes=r.lanes,Wi(r,s,p)}return Kh(r,s,l,u,p)}function Wg(r,s,l){var u=s.pendingProps,p=u.children,y=r!==null?r.memoizedState:null;if(u.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(ga,Cr),Cr|=l;else{if((l&1073741824)===0)return r=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,At(ga,Cr),Cr|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=y!==null?y.baseLanes:l,At(ga,Cr),Cr|=u}else y!==null?(u=y.baseLanes|l,s.memoizedState=null):u=l,At(ga,Cr),Cr|=u;return Zn(r,s,p,l),s.child}function Qg(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Kh(r,s,l,u,p){var y=pr(l)?ho:Fn.current;return y=oa(s,y),ha(s,p),l=Lh(r,s,l,u,y,p),u=Vh(),r!==null&&!mr?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,Wi(r,s,p)):(Mt&&u&&_h(s),s.flags|=1,Zn(r,s,l,p),s.child)}function Yg(r,s,l,u,p){if(pr(l)){var y=!0;qc(s)}else y=!1;if(ha(s,p),s.stateNode===null)cu(r,s),Vg(s,l,u),Hh(s,l,u,p),u=!0;else if(r===null){var E=s.stateNode,j=s.memoizedProps;E.props=j;var U=E.context,Z=l.contextType;typeof Z=="object"&&Z!==null?Z=zr(Z):(Z=pr(l)?ho:Fn.current,Z=oa(s,Z));var he=l.getDerivedStateFromProps,ye=typeof he=="function"||typeof E.getSnapshotBeforeUpdate=="function";ye||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(j!==u||U!==Z)&&Fg(s,E,u,Z),Es=!1;var de=s.memoizedState;E.state=de,eu(s,u,E,p),U=s.memoizedState,j!==u||de!==U||fr.current||Es?(typeof he=="function"&&($h(s,l,he,u),U=s.memoizedState),(j=Es||Lg(s,l,j,u,de,U,Z))?(ye||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=U),E.props=u,E.state=U,E.context=Z,u=j):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{E=s.stateNode,hg(r,s),j=s.memoizedProps,Z=s.type===s.elementType?j:ni(s.type,j),E.props=Z,ye=s.pendingProps,de=E.context,U=l.contextType,typeof U=="object"&&U!==null?U=zr(U):(U=pr(l)?ho:Fn.current,U=oa(s,U));var Ne=l.getDerivedStateFromProps;(he=typeof Ne=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(j!==ye||de!==U)&&Fg(s,E,u,U),Es=!1,de=s.memoizedState,E.state=de,eu(s,u,E,p);var Ve=s.memoizedState;j!==ye||de!==Ve||fr.current||Es?(typeof Ne=="function"&&($h(s,l,Ne,u),Ve=s.memoizedState),(Z=Es||Lg(s,l,Z,u,de,Ve,U)||!1)?(he||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(u,Ve,U),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(u,Ve,U)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||j===r.memoizedProps&&de===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||j===r.memoizedProps&&de===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Ve),E.props=u,E.state=Ve,E.context=U,u=Z):(typeof E.componentDidUpdate!="function"||j===r.memoizedProps&&de===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||j===r.memoizedProps&&de===r.memoizedState||(s.flags|=1024),u=!1)}return Wh(r,s,l,u,y,p)}function Wh(r,s,l,u,p,y){Qg(r,s);var E=(s.flags&128)!==0;if(!u&&!E)return p&&tg(s,l,!1),Wi(r,s,y);u=s.stateNode,Tx.current=s;var j=E&&typeof l.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,r!==null&&E?(s.child=ua(s,r.child,null,y),s.child=ua(s,null,j,y)):Zn(r,s,j,y),s.memoizedState=u.state,p&&tg(s,l,!0),s.child}function Xg(r){var s=r.stateNode;s.pendingContext?Zm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Zm(r,s.context,!1),Ph(r,s.containerInfo)}function Jg(r,s,l,u,p){return ca(),Th(p),s.flags|=256,Zn(r,s,l,u),s.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Yh(r){return{baseLanes:r,cachePool:null,transitions:null}}function Zg(r,s,l){var u=s.pendingProps,p=jt.current,y=!1,E=(s.flags&128)!==0,j;if((j=E)||(j=r!==null&&r.memoizedState===null?!1:(p&2)!==0),j?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),At(jt,p&1),r===null)return Eh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=u.children,r=u.fallback,y?(u=s.mode,y=s.child,E={mode:"hidden",children:E},(u&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=bu(E,u,0,null),r=xo(r,u,l,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=Yh(l),s.memoizedState=Qh,r):Xh(s,E));if(p=r.memoizedState,p!==null&&(j=p.dehydrated,j!==null))return Sx(r,s,E,u,j,p,l);if(y){y=u.fallback,E=s.mode,p=r.child,j=p.sibling;var U={mode:"hidden",children:u.children};return(E&1)===0&&s.child!==p?(u=s.child,u.childLanes=0,u.pendingProps=U,s.deletions=null):(u=Ns(p,U),u.subtreeFlags=p.subtreeFlags&14680064),j!==null?y=Ns(j,y):(y=xo(y,E,l,null),y.flags|=2),y.return=s,u.return=s,u.sibling=y,s.child=u,u=y,y=s.child,E=r.child.memoizedState,E=E===null?Yh(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=r.childLanes&~l,s.memoizedState=Qh,u}return y=r.child,r=y.sibling,u=Ns(y,{mode:"visible",children:u.children}),(s.mode&1)===0&&(u.lanes=l),u.return=s,u.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=u,s.memoizedState=null,u}function Xh(r,s){return s=bu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function lu(r,s,l,u){return u!==null&&Th(u),ua(s,r.child,null,l),r=Xh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Sx(r,s,l,u,p,y,E){if(l)return s.flags&256?(s.flags&=-257,u=qh(Error(t(422))),lu(r,s,E,u)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=u.fallback,p=s.mode,u=bu({mode:"visible",children:u.children},p,0,null),y=xo(y,p,E,null),y.flags|=2,u.return=s,y.return=s,u.sibling=y,s.child=u,(s.mode&1)!==0&&ua(s,r.child,null,E),s.child.memoizedState=Yh(E),s.memoizedState=Qh,y);if((s.mode&1)===0)return lu(r,s,E,null);if(p.data==="$!"){if(u=p.nextSibling&&p.nextSibling.dataset,u)var j=u.dgst;return u=j,y=Error(t(419)),u=qh(y,u,void 0),lu(r,s,E,u)}if(j=(E&r.childLanes)!==0,mr||j){if(u=_n,u!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(u.suspendedLanes|E))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Gi(r,p),si(u,r,p,-1))}return pf(),u=qh(Error(t(421))),lu(r,s,E,u)}return p.data==="$?"?(s.flags|=128,s.child=r.child,s=Vx.bind(null,r),p._reactRetry=s,null):(r=y.treeContext,Ir=ws(p.nextSibling),kr=s,Mt=!0,ti=null,r!==null&&(Fr[Ur++]=Hi,Fr[Ur++]=qi,Fr[Ur++]=fo,Hi=r.id,qi=r.overflow,fo=s),s=Xh(s,u.children),s.flags|=4096,s)}function ey(r,s,l){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Ch(r.return,s,l)}function Jh(r,s,l,u,p){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=l,y.tailMode=p)}function ty(r,s,l){var u=s.pendingProps,p=u.revealOrder,y=u.tail;if(Zn(r,s,u.children,l),u=jt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ey(r,l,s);else if(r.tag===19)ey(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}if(At(jt,u),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&tu(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Jh(s,!1,p,l,y);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&tu(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Jh(s,!0,l,null,y);break;case"together":Jh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function cu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Wi(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),vo|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=Ns(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Ns(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function kx(r,s,l){switch(s.tag){case 3:Xg(s),ca();break;case 5:mg(s);break;case 1:pr(s.type)&&qc(s);break;case 4:Ph(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,p=s.memoizedProps.value;At(Xc,u._currentValue),u._currentValue=p;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(At(jt,jt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Zg(r,s,l):(At(jt,jt.current&1),r=Wi(r,s,l),r!==null?r.sibling:null);At(jt,jt.current&1);break;case 19:if(u=(l&s.childLanes)!==0,(r.flags&128)!==0){if(u)return ty(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),At(jt,jt.current),u)break;return null;case 22:case 23:return s.lanes=0,Wg(r,s,l)}return Wi(r,s,l)}var ny,Zh,ry,iy;ny=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Zh=function(){},ry=function(r,s,l,u){var p=r.memoizedProps;if(p!==u){r=s.stateNode,go(_i.current);var y=null;switch(l){case"input":p=pn(r,p),u=pn(r,u),y=[];break;case"select":p=_e({},p,{value:void 0}),u=_e({},u,{value:void 0}),y=[];break;case"textarea":p=or(r,p),u=or(r,u),y=[];break;default:typeof p.onClick!="function"&&typeof u.onClick=="function"&&(r.onclick=Bc)}kn(l,u);var E;l=null;for(Z in p)if(!u.hasOwnProperty(Z)&&p.hasOwnProperty(Z)&&p[Z]!=null)if(Z==="style"){var j=p[Z];for(E in j)j.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(o.hasOwnProperty(Z)?y||(y=[]):(y=y||[]).push(Z,null));for(Z in u){var U=u[Z];if(j=p?.[Z],u.hasOwnProperty(Z)&&U!==j&&(U!=null||j!=null))if(Z==="style")if(j){for(E in j)!j.hasOwnProperty(E)||U&&U.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in U)U.hasOwnProperty(E)&&j[E]!==U[E]&&(l||(l={}),l[E]=U[E])}else l||(y||(y=[]),y.push(Z,l)),l=U;else Z==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,j=j?j.__html:void 0,U!=null&&j!==U&&(y=y||[]).push(Z,U)):Z==="children"?typeof U!="string"&&typeof U!="number"||(y=y||[]).push(Z,""+U):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(o.hasOwnProperty(Z)?(U!=null&&Z==="onScroll"&&Nt("scroll",r),y||j===U||(y=[])):(y=y||[]).push(Z,U))}l&&(y=y||[]).push("style",l);var Z=y;(s.updateQueue=Z)&&(s.flags|=4)}},iy=function(r,s,l,u){l!==u&&(s.flags|=4)};function vl(r,s){if(!Mt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function zn(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&14680064,u|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=l,s}function Ix(r,s,l){var u=s.pendingProps;switch(bh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(s),null;case 1:return pr(s.type)&&Hc(),zn(s),null;case 3:return u=s.stateNode,fa(),Pt(fr),Pt(Fn),Oh(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Qc(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ti!==null&&(df(ti),ti=null))),Zh(r,s),zn(s),null;case 5:Rh(s);var p=go(fl.current);if(l=s.type,r!==null&&s.stateNode!=null)ry(r,s,l,u,p),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(t(166));return zn(s),null}if(r=go(_i.current),Qc(s)){u=s.stateNode,l=s.type;var y=s.memoizedProps;switch(u[wi]=s,u[ll]=y,r=(s.mode&1)!==0,l){case"dialog":Nt("cancel",u),Nt("close",u);break;case"iframe":case"object":case"embed":Nt("load",u);break;case"video":case"audio":for(p=0;p<sl.length;p++)Nt(sl[p],u);break;case"source":Nt("error",u);break;case"img":case"image":case"link":Nt("error",u),Nt("load",u);break;case"details":Nt("toggle",u);break;case"input":zt(u,y),Nt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!y.multiple},Nt("invalid",u);break;case"textarea":Bt(u,y),Nt("invalid",u)}kn(l,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var j=y[E];E==="children"?typeof j=="string"?u.textContent!==j&&(y.suppressHydrationWarning!==!0&&zc(u.textContent,j,r),p=["children",j]):typeof j=="number"&&u.textContent!==""+j&&(y.suppressHydrationWarning!==!0&&zc(u.textContent,j,r),p=["children",""+j]):o.hasOwnProperty(E)&&j!=null&&E==="onScroll"&&Nt("scroll",u)}switch(l){case"input":Ut(u),sr(u,y,!0);break;case"textarea":Ut(u),Pr(u);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(u.onclick=Bc)}u=p,s.updateQueue=u,u!==null&&(s.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Ct(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof u.is=="string"?r=E.createElement(l,{is:u.is}):(r=E.createElement(l),l==="select"&&(E=r,u.multiple?E.multiple=!0:u.size&&(E.size=u.size))):r=E.createElementNS(r,l),r[wi]=s,r[ll]=u,ny(r,s,!1,!1),s.stateNode=r;e:{switch(E=xr(l,u),l){case"dialog":Nt("cancel",r),Nt("close",r),p=u;break;case"iframe":case"object":case"embed":Nt("load",r),p=u;break;case"video":case"audio":for(p=0;p<sl.length;p++)Nt(sl[p],r);p=u;break;case"source":Nt("error",r),p=u;break;case"img":case"image":case"link":Nt("error",r),Nt("load",r),p=u;break;case"details":Nt("toggle",r),p=u;break;case"input":zt(r,u),p=pn(r,u),Nt("invalid",r);break;case"option":p=u;break;case"select":r._wrapperState={wasMultiple:!!u.multiple},p=_e({},u,{value:void 0}),Nt("invalid",r);break;case"textarea":Bt(r,u),p=or(r,u),Nt("invalid",r);break;default:p=u}kn(l,p),j=p;for(y in j)if(j.hasOwnProperty(y)){var U=j[y];y==="style"?Sn(r,U):y==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&br(r,U)):y==="children"?typeof U=="string"?(l!=="textarea"||U!=="")&&Ln(r,U):typeof U=="number"&&Ln(r,""+U):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?U!=null&&y==="onScroll"&&Nt("scroll",r):U!=null&&pe(r,y,U,E))}switch(l){case"input":Ut(r),sr(r,u,!1);break;case"textarea":Ut(r),Pr(r);break;case"option":u.value!=null&&r.setAttribute("value",""+at(u.value));break;case"select":r.multiple=!!u.multiple,y=u.value,y!=null?mn(r,!!u.multiple,y,!1):u.defaultValue!=null&&mn(r,!!u.multiple,u.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=Bc)}switch(l){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return zn(s),null;case 6:if(r&&s.stateNode!=null)iy(r,s,r.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(t(166));if(l=go(fl.current),go(_i.current),Qc(s)){if(u=s.stateNode,l=s.memoizedProps,u[wi]=s,(y=u.nodeValue!==l)&&(r=kr,r!==null))switch(r.tag){case 3:zc(u.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&zc(u.nodeValue,l,(r.mode&1)!==0)}y&&(s.flags|=4)}else u=(l.nodeType===9?l:l.ownerDocument).createTextNode(u),u[wi]=s,s.stateNode=u}return zn(s),null;case 13:if(Pt(jt),u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Mt&&Ir!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ag(),ca(),s.flags|=98560,y=!1;else if(y=Qc(s),u!==null&&u.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[wi]=s}else ca(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zn(s),y=!1}else ti!==null&&(df(ti),ti=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(u=u!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(jt.current&1)!==0?un===0&&(un=3):pf())),s.updateQueue!==null&&(s.flags|=4),zn(s),null);case 4:return fa(),Zh(r,s),r===null&&ol(s.stateNode.containerInfo),zn(s),null;case 10:return Ih(s.type._context),zn(s),null;case 17:return pr(s.type)&&Hc(),zn(s),null;case 19:if(Pt(jt),y=s.memoizedState,y===null)return zn(s),null;if(u=(s.flags&128)!==0,E=y.rendering,E===null)if(u)vl(y,!1);else{if(un!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(E=tu(r),E!==null){for(s.flags|=128,vl(y,!1),u=E.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=l,l=s.child;l!==null;)y=l,r=u,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,r=E.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return At(jt,jt.current&1|2),s.child}r=r.sibling}y.tail!==null&&mt()>ya&&(s.flags|=128,u=!0,vl(y,!1),s.lanes=4194304)}else{if(!u)if(r=tu(E),r!==null){if(s.flags|=128,u=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),vl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!Mt)return zn(s),null}else 2*mt()-y.renderingStartTime>ya&&l!==1073741824&&(s.flags|=128,u=!0,vl(y,!1),s.lanes=4194304);y.isBackwards?(E.sibling=s.child,s.child=E):(l=y.last,l!==null?l.sibling=E:s.child=E,y.last=E)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=mt(),s.sibling=null,l=jt.current,At(jt,u?l&1|2:l&1),s):(zn(s),null);case 22:case 23:return ff(),u=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(s.flags|=8192),u&&(s.mode&1)!==0?(Cr&1073741824)!==0&&(zn(s),s.subtreeFlags&6&&(s.flags|=8192)):zn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Cx(r,s){switch(bh(s),s.tag){case 1:return pr(s.type)&&Hc(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return fa(),Pt(fr),Pt(Fn),Oh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Rh(s),null;case 13:if(Pt(jt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ca()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Pt(jt),null;case 4:return fa(),null;case 10:return Ih(s.type._context),null;case 22:case 23:return ff(),null;case 24:return null;default:return null}}var uu=!1,Bn=!1,Ax=typeof WeakSet=="function"?WeakSet:Set,je=null;function ma(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(u){qt(r,s,u)}else l.current=null}function ef(r,s,l){try{l()}catch(u){qt(r,s,u)}}var sy=!1;function Nx(r,s){if(hh=gs,r=Lm(),ih(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,j=-1,U=-1,Z=0,he=0,ye=r,de=null;t:for(;;){for(var Ne;ye!==l||p!==0&&ye.nodeType!==3||(j=E+p),ye!==y||u!==0&&ye.nodeType!==3||(U=E+u),ye.nodeType===3&&(E+=ye.nodeValue.length),(Ne=ye.firstChild)!==null;)de=ye,ye=Ne;for(;;){if(ye===r)break t;if(de===l&&++Z===p&&(j=E),de===y&&++he===u&&(U=E),(Ne=ye.nextSibling)!==null)break;ye=de,de=ye.parentNode}ye=Ne}l=j===-1||U===-1?null:{start:j,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(fh={focusedElem:r,selectionRange:l},gs=!1,je=s;je!==null;)if(s=je,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,je=r;else for(;je!==null;){s=je;try{var Ve=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var Fe=Ve.memoizedProps,Wt=Ve.memoizedState,Q=s.stateNode,$=Q.getSnapshotBeforeUpdate(s.elementType===s.type?Fe:ni(s.type,Fe),Wt);Q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Y=s.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ve){qt(s,s.return,ve)}if(r=s.sibling,r!==null){r.return=s.return,je=r;break}je=s.return}return Ve=sy,sy=!1,Ve}function wl(r,s,l){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&r)===r){var y=p.destroy;p.destroy=void 0,y!==void 0&&ef(s,l,y)}p=p.next}while(p!==u)}}function du(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var u=l.create;l.destroy=u()}l=l.next}while(l!==s)}}function tf(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function oy(r){var s=r.alternate;s!==null&&(r.alternate=null,oy(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[wi],delete s[ll],delete s[yh],delete s[hx],delete s[fx])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ay(r){return r.tag===5||r.tag===3||r.tag===4}function ly(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ay(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function nf(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Bc));else if(u!==4&&(r=r.child,r!==null))for(nf(r,s,l),r=r.sibling;r!==null;)nf(r,s,l),r=r.sibling}function rf(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(u!==4&&(r=r.child,r!==null))for(rf(r,s,l),r=r.sibling;r!==null;)rf(r,s,l),r=r.sibling}var Nn=null,ri=!1;function Ss(r,s,l){for(l=l.child;l!==null;)cy(r,s,l),l=l.sibling}function cy(r,s,l){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Qr,l)}catch{}switch(l.tag){case 5:Bn||ma(l,s);case 6:var u=Nn,p=ri;Nn=null,Ss(r,s,l),Nn=u,ri=p,Nn!==null&&(ri?(r=Nn,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Nn.removeChild(l.stateNode));break;case 18:Nn!==null&&(ri?(r=Nn,l=l.stateNode,r.nodeType===8?gh(r.parentNode,l):r.nodeType===1&&gh(r,l),Jr(r)):gh(Nn,l.stateNode));break;case 4:u=Nn,p=ri,Nn=l.stateNode.containerInfo,ri=!0,Ss(r,s,l),Nn=u,ri=p;break;case 0:case 11:case 14:case 15:if(!Bn&&(u=l.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){p=u=u.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&ef(l,s,E),p=p.next}while(p!==u)}Ss(r,s,l);break;case 1:if(!Bn&&(ma(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=l.memoizedProps,u.state=l.memoizedState,u.componentWillUnmount()}catch(j){qt(l,s,j)}Ss(r,s,l);break;case 21:Ss(r,s,l);break;case 22:l.mode&1?(Bn=(u=Bn)||l.memoizedState!==null,Ss(r,s,l),Bn=u):Ss(r,s,l);break;default:Ss(r,s,l)}}function uy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new Ax),s.forEach(function(u){var p=Fx.bind(null,r,u);l.has(u)||(l.add(u),u.then(p,p))})}}function ii(r,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u];try{var y=r,E=s,j=E;e:for(;j!==null;){switch(j.tag){case 5:Nn=j.stateNode,ri=!1;break e;case 3:Nn=j.stateNode.containerInfo,ri=!0;break e;case 4:Nn=j.stateNode.containerInfo,ri=!0;break e}j=j.return}if(Nn===null)throw Error(t(160));cy(y,E,p),Nn=null,ri=!1;var U=p.alternate;U!==null&&(U.return=null),p.return=null}catch(Z){qt(p,s,Z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dy(s,r),s=s.sibling}function dy(r,s){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ii(s,r),xi(r),u&4){try{wl(3,r,r.return),du(3,r)}catch(Fe){qt(r,r.return,Fe)}try{wl(5,r,r.return)}catch(Fe){qt(r,r.return,Fe)}}break;case 1:ii(s,r),xi(r),u&512&&l!==null&&ma(l,l.return);break;case 5:if(ii(s,r),xi(r),u&512&&l!==null&&ma(l,l.return),r.flags&32){var p=r.stateNode;try{Ln(p,"")}catch(Fe){qt(r,r.return,Fe)}}if(u&4&&(p=r.stateNode,p!=null)){var y=r.memoizedProps,E=l!==null?l.memoizedProps:y,j=r.type,U=r.updateQueue;if(r.updateQueue=null,U!==null)try{j==="input"&&y.type==="radio"&&y.name!=null&&_r(p,y),xr(j,E);var Z=xr(j,y);for(E=0;E<U.length;E+=2){var he=U[E],ye=U[E+1];he==="style"?Sn(p,ye):he==="dangerouslySetInnerHTML"?br(p,ye):he==="children"?Ln(p,ye):pe(p,he,ye,Z)}switch(j){case"input":ir(p,y);break;case"textarea":Qn(p,y);break;case"select":var de=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var Ne=y.value;Ne!=null?mn(p,!!y.multiple,Ne,!1):de!==!!y.multiple&&(y.defaultValue!=null?mn(p,!!y.multiple,y.defaultValue,!0):mn(p,!!y.multiple,y.multiple?[]:"",!1))}p[ll]=y}catch(Fe){qt(r,r.return,Fe)}}break;case 6:if(ii(s,r),xi(r),u&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,y=r.memoizedProps;try{p.nodeValue=y}catch(Fe){qt(r,r.return,Fe)}}break;case 3:if(ii(s,r),xi(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Jr(s.containerInfo)}catch(Fe){qt(r,r.return,Fe)}break;case 4:ii(s,r),xi(r);break;case 13:ii(s,r),xi(r),p=r.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(af=mt())),u&4&&uy(r);break;case 22:if(he=l!==null&&l.memoizedState!==null,r.mode&1?(Bn=(Z=Bn)||he,ii(s,r),Bn=Z):ii(s,r),xi(r),u&8192){if(Z=r.memoizedState!==null,(r.stateNode.isHidden=Z)&&!he&&(r.mode&1)!==0)for(je=r,he=r.child;he!==null;){for(ye=je=he;je!==null;){switch(de=je,Ne=de.child,de.tag){case 0:case 11:case 14:case 15:wl(4,de,de.return);break;case 1:ma(de,de.return);var Ve=de.stateNode;if(typeof Ve.componentWillUnmount=="function"){u=de,l=de.return;try{s=u,Ve.props=s.memoizedProps,Ve.state=s.memoizedState,Ve.componentWillUnmount()}catch(Fe){qt(u,l,Fe)}}break;case 5:ma(de,de.return);break;case 22:if(de.memoizedState!==null){py(ye);continue}}Ne!==null?(Ne.return=de,je=Ne):py(ye)}he=he.sibling}e:for(he=null,ye=r;;){if(ye.tag===5){if(he===null){he=ye;try{p=ye.stateNode,Z?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(j=ye.stateNode,U=ye.memoizedProps.style,E=U!=null&&U.hasOwnProperty("display")?U.display:null,j.style.display=Rr("display",E))}catch(Fe){qt(r,r.return,Fe)}}}else if(ye.tag===6){if(he===null)try{ye.stateNode.nodeValue=Z?"":ye.memoizedProps}catch(Fe){qt(r,r.return,Fe)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===r)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===r)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===r)break e;he===ye&&(he=null),ye=ye.return}he===ye&&(he=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:ii(s,r),xi(r),u&4&&uy(r);break;case 21:break;default:ii(s,r),xi(r)}}function xi(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(ay(l)){var u=l;break e}l=l.return}throw Error(t(160))}switch(u.tag){case 5:var p=u.stateNode;u.flags&32&&(Ln(p,""),u.flags&=-33);var y=ly(r);rf(r,y,p);break;case 3:case 4:var E=u.stateNode.containerInfo,j=ly(r);nf(r,j,E);break;default:throw Error(t(161))}}catch(U){qt(r,r.return,U)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Px(r,s,l){je=r,hy(r)}function hy(r,s,l){for(var u=(r.mode&1)!==0;je!==null;){var p=je,y=p.child;if(p.tag===22&&u){var E=p.memoizedState!==null||uu;if(!E){var j=p.alternate,U=j!==null&&j.memoizedState!==null||Bn;j=uu;var Z=Bn;if(uu=E,(Bn=U)&&!Z)for(je=p;je!==null;)E=je,U=E.child,E.tag===22&&E.memoizedState!==null?my(p):U!==null?(U.return=E,je=U):my(p);for(;y!==null;)je=y,hy(y),y=y.sibling;je=p,uu=j,Bn=Z}fy(r)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,je=y):fy(r)}}function fy(r){for(;je!==null;){var s=je;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Bn||du(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!Bn)if(l===null)u.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:ni(s.type,l.memoizedProps);u.componentDidUpdate(p,l.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&pg(s,y,u);break;case 3:var E=s.updateQueue;if(E!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}pg(s,E,l)}break;case 5:var j=s.stateNode;if(l===null&&s.flags&4){l=j;var U=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&l.focus();break;case"img":U.src&&(l.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Z=s.alternate;if(Z!==null){var he=Z.memoizedState;if(he!==null){var ye=he.dehydrated;ye!==null&&Jr(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bn||s.flags&512&&tf(s)}catch(de){qt(s,s.return,de)}}if(s===r){je=null;break}if(l=s.sibling,l!==null){l.return=s.return,je=l;break}je=s.return}}function py(r){for(;je!==null;){var s=je;if(s===r){je=null;break}var l=s.sibling;if(l!==null){l.return=s.return,je=l;break}je=s.return}}function my(r){for(;je!==null;){var s=je;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{du(4,s)}catch(U){qt(s,l,U)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var p=s.return;try{u.componentDidMount()}catch(U){qt(s,p,U)}}var y=s.return;try{tf(s)}catch(U){qt(s,y,U)}break;case 5:var E=s.return;try{tf(s)}catch(U){qt(s,E,U)}}}catch(U){qt(s,s.return,U)}if(s===r){je=null;break}var j=s.sibling;if(j!==null){j.return=s.return,je=j;break}je=s.return}}var Rx=Math.ceil,hu=we.ReactCurrentDispatcher,sf=we.ReactCurrentOwner,$r=we.ReactCurrentBatchConfig,vt=0,_n=null,Jt=null,Pn=0,Cr=0,ga=_s(0),un=0,_l=null,vo=0,fu=0,of=0,bl=null,gr=null,af=0,ya=1/0,Qi=null,pu=!1,lf=null,ks=null,mu=!1,Is=null,gu=0,xl=0,cf=null,yu=-1,vu=0;function er(){return(vt&6)!==0?mt():yu!==-1?yu:yu=mt()}function Cs(r){return(r.mode&1)===0?1:(vt&2)!==0&&Pn!==0?Pn&-Pn:mx.transition!==null?(vu===0&&(vu=ce()),vu):(r=Le,r!==0||(r=window.event,r=r===void 0?16:Ya(r.type)),r)}function si(r,s,l,u){if(50<xl)throw xl=0,cf=null,Error(t(185));Me(r,l,u),((vt&2)===0||r!==_n)&&(r===_n&&((vt&2)===0&&(fu|=l),un===4&&As(r,Pn)),yr(r,u),l===1&&vt===0&&(s.mode&1)===0&&(ya=mt()+500,Gc&&xs()))}function yr(r,s){var l=r.callbackNode;ae(r,s);var u=J(r,r===_n?Pn:0);if(u===0)l!==null&&ji(l),r.callbackNode=null,r.callbackPriority=0;else if(s=u&-u,r.callbackPriority!==s){if(l!=null&&ji(l),s===1)r.tag===0?px(yy.bind(null,r)):ng(yy.bind(null,r)),ux(function(){(vt&6)===0&&xs()}),l=null;else{switch(rt(u)){case 1:l=Vn;break;case 4:l=Dr;break;case 16:l=rn;break;case 536870912:l=hs;break;default:l=rn}l=Sy(l,gy.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function gy(r,s){if(yu=-1,vu=0,(vt&6)!==0)throw Error(t(327));var l=r.callbackNode;if(va()&&r.callbackNode!==l)return null;var u=J(r,r===_n?Pn:0);if(u===0)return null;if((u&30)!==0||(u&r.expiredLanes)!==0||s)s=wu(r,u);else{s=u;var p=vt;vt|=2;var y=wy();(_n!==r||Pn!==s)&&(Qi=null,ya=mt()+500,_o(r,s));do try{Mx();break}catch(j){vy(r,j)}while(!0);kh(),hu.current=y,vt=p,Jt!==null?s=0:(_n=null,Pn=0,s=un)}if(s!==0){if(s===2&&(p=le(r),p!==0&&(u=p,s=uf(r,p))),s===1)throw l=_l,_o(r,0),As(r,u),yr(r,mt()),l;if(s===6)As(r,u);else{if(p=r.current.alternate,(u&30)===0&&!Dx(p)&&(s=wu(r,u),s===2&&(y=le(r),y!==0&&(u=y,s=uf(r,y))),s===1))throw l=_l,_o(r,0),As(r,u),yr(r,mt()),l;switch(r.finishedWork=p,r.finishedLanes=u,s){case 0:case 1:throw Error(t(345));case 2:bo(r,gr,Qi);break;case 3:if(As(r,u),(u&130023424)===u&&(s=af+500-mt(),10<s)){if(J(r,0)!==0)break;if(p=r.suspendedLanes,(p&u)!==u){er(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=mh(bo.bind(null,r,gr,Qi),s);break}bo(r,gr,Qi);break;case 4:if(As(r,u),(u&4194240)===u)break;for(s=r.eventTimes,p=-1;0<u;){var E=31-$t(u);y=1<<E,E=s[E],E>p&&(p=E),u&=~y}if(u=p,u=mt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Rx(u/1960))-u,10<u){r.timeoutHandle=mh(bo.bind(null,r,gr,Qi),u);break}bo(r,gr,Qi);break;case 5:bo(r,gr,Qi);break;default:throw Error(t(329))}}}return yr(r,mt()),r.callbackNode===l?gy.bind(null,r):null}function uf(r,s){var l=bl;return r.current.memoizedState.isDehydrated&&(_o(r,s).flags|=256),r=wu(r,s),r!==2&&(s=gr,gr=l,s!==null&&df(s)),r}function df(r){gr===null?gr=r:gr.push.apply(gr,r)}function Dx(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var u=0;u<l.length;u++){var p=l[u],y=p.getSnapshot;p=p.value;try{if(!ei(y(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function As(r,s){for(s&=~of,s&=~fu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-$t(s),u=1<<l;r[l]=-1,s&=~u}}function yy(r){if((vt&6)!==0)throw Error(t(327));va();var s=J(r,0);if((s&1)===0)return yr(r,mt()),null;var l=wu(r,s);if(r.tag!==0&&l===2){var u=le(r);u!==0&&(s=u,l=uf(r,u))}if(l===1)throw l=_l,_o(r,0),As(r,s),yr(r,mt()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,bo(r,gr,Qi),yr(r,mt()),null}function hf(r,s){var l=vt;vt|=1;try{return r(s)}finally{vt=l,vt===0&&(ya=mt()+500,Gc&&xs())}}function wo(r){Is!==null&&Is.tag===0&&(vt&6)===0&&va();var s=vt;vt|=1;var l=$r.transition,u=Le;try{if($r.transition=null,Le=1,r)return r()}finally{Le=u,$r.transition=l,vt=s,(vt&6)===0&&xs()}}function ff(){Cr=ga.current,Pt(ga)}function _o(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,cx(l)),Jt!==null)for(l=Jt.return;l!==null;){var u=l;switch(bh(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Hc();break;case 3:fa(),Pt(fr),Pt(Fn),Oh();break;case 5:Rh(u);break;case 4:fa();break;case 13:Pt(jt);break;case 19:Pt(jt);break;case 10:Ih(u.type._context);break;case 22:case 23:ff()}l=l.return}if(_n=r,Jt=r=Ns(r.current,null),Pn=Cr=s,un=0,_l=null,of=fu=vo=0,gr=bl=null,mo!==null){for(s=0;s<mo.length;s++)if(l=mo[s],u=l.interleaved,u!==null){l.interleaved=null;var p=u.next,y=l.pending;if(y!==null){var E=y.next;y.next=p,u.next=E}l.pending=u}mo=null}return r}function vy(r,s){do{var l=Jt;try{if(kh(),nu.current=ou,ru){for(var u=Lt.memoizedState;u!==null;){var p=u.queue;p!==null&&(p.pending=null),u=u.next}ru=!1}if(yo=0,wn=cn=Lt=null,pl=!1,ml=0,sf.current=null,l===null||l.return===null){un=1,_l=s,Jt=null;break}e:{var y=r,E=l.return,j=l,U=s;if(s=Pn,j.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var Z=U,he=j,ye=he.tag;if((he.mode&1)===0&&(ye===0||ye===11||ye===15)){var de=he.alternate;de?(he.updateQueue=de.updateQueue,he.memoizedState=de.memoizedState,he.lanes=de.lanes):(he.updateQueue=null,he.memoizedState=null)}var Ne=$g(E);if(Ne!==null){Ne.flags&=-257,Hg(Ne,E,j,y,s),Ne.mode&1&&Bg(y,Z,s),s=Ne,U=Z;var Ve=s.updateQueue;if(Ve===null){var Fe=new Set;Fe.add(U),s.updateQueue=Fe}else Ve.add(U);break e}else{if((s&1)===0){Bg(y,Z,s),pf();break e}U=Error(t(426))}}else if(Mt&&j.mode&1){var Wt=$g(E);if(Wt!==null){(Wt.flags&65536)===0&&(Wt.flags|=256),Hg(Wt,E,j,y,s),Th(pa(U,j));break e}}y=U=pa(U,j),un!==4&&(un=2),bl===null?bl=[y]:bl.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var Q=Ug(y,U,s);fg(y,Q);break e;case 1:j=U;var $=y.type,Y=y.stateNode;if((y.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ks===null||!ks.has(Y)))){y.flags|=65536,s&=-s,y.lanes|=s;var ve=zg(y,j,s);fg(y,ve);break e}}y=y.return}while(y!==null)}by(l)}catch(ze){s=ze,Jt===l&&l!==null&&(Jt=l=l.return);continue}break}while(!0)}function wy(){var r=hu.current;return hu.current=ou,r===null?ou:r}function pf(){(un===0||un===3||un===2)&&(un=4),_n===null||(vo&268435455)===0&&(fu&268435455)===0||As(_n,Pn)}function wu(r,s){var l=vt;vt|=2;var u=wy();(_n!==r||Pn!==s)&&(Qi=null,_o(r,s));do try{Ox();break}catch(p){vy(r,p)}while(!0);if(kh(),vt=l,hu.current=u,Jt!==null)throw Error(t(261));return _n=null,Pn=0,un}function Ox(){for(;Jt!==null;)_y(Jt)}function Mx(){for(;Jt!==null&&!us();)_y(Jt)}function _y(r){var s=Ty(r.alternate,r,Cr);r.memoizedProps=r.pendingProps,s===null?by(r):Jt=s,sf.current=null}function by(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=Ix(l,s,Cr),l!==null){Jt=l;return}}else{if(l=Cx(l,s),l!==null){l.flags&=32767,Jt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{un=6,Jt=null;return}}if(s=s.sibling,s!==null){Jt=s;return}Jt=s=r}while(s!==null);un===0&&(un=5)}function bo(r,s,l){var u=Le,p=$r.transition;try{$r.transition=null,Le=1,jx(r,s,l,u)}finally{$r.transition=p,Le=u}return null}function jx(r,s,l,u){do va();while(Is!==null);if((vt&6)!==0)throw Error(t(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if(Pe(r,y),r===_n&&(Jt=_n=null,Pn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||mu||(mu=!0,Sy(rn,function(){return va(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=$r.transition,$r.transition=null;var E=Le;Le=1;var j=vt;vt|=4,sf.current=null,Nx(r,l),dy(l,r),nx(fh),gs=!!hh,fh=hh=null,r.current=l,Px(l),ds(),vt=j,Le=E,$r.transition=y}else r.current=l;if(mu&&(mu=!1,Is=r,gu=p),y=r.pendingLanes,y===0&&(ks=null),fs(l.stateNode),yr(r,mt()),s!==null)for(u=r.onRecoverableError,l=0;l<s.length;l++)p=s[l],u(p.value,{componentStack:p.stack,digest:p.digest});if(pu)throw pu=!1,r=lf,lf=null,r;return(gu&1)!==0&&r.tag!==0&&va(),y=r.pendingLanes,(y&1)!==0?r===cf?xl++:(xl=0,cf=r):xl=0,xs(),null}function va(){if(Is!==null){var r=rt(gu),s=$r.transition,l=Le;try{if($r.transition=null,Le=16>r?16:r,Is===null)var u=!1;else{if(r=Is,Is=null,gu=0,(vt&6)!==0)throw Error(t(331));var p=vt;for(vt|=4,je=r.current;je!==null;){var y=je,E=y.child;if((je.flags&16)!==0){var j=y.deletions;if(j!==null){for(var U=0;U<j.length;U++){var Z=j[U];for(je=Z;je!==null;){var he=je;switch(he.tag){case 0:case 11:case 15:wl(8,he,y)}var ye=he.child;if(ye!==null)ye.return=he,je=ye;else for(;je!==null;){he=je;var de=he.sibling,Ne=he.return;if(oy(he),he===Z){je=null;break}if(de!==null){de.return=Ne,je=de;break}je=Ne}}}var Ve=y.alternate;if(Ve!==null){var Fe=Ve.child;if(Fe!==null){Ve.child=null;do{var Wt=Fe.sibling;Fe.sibling=null,Fe=Wt}while(Fe!==null)}}je=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,je=E;else e:for(;je!==null;){if(y=je,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:wl(9,y,y.return)}var Q=y.sibling;if(Q!==null){Q.return=y.return,je=Q;break e}je=y.return}}var $=r.current;for(je=$;je!==null;){E=je;var Y=E.child;if((E.subtreeFlags&2064)!==0&&Y!==null)Y.return=E,je=Y;else e:for(E=$;je!==null;){if(j=je,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:du(9,j)}}catch(ze){qt(j,j.return,ze)}if(j===E){je=null;break e}var ve=j.sibling;if(ve!==null){ve.return=j.return,je=ve;break e}je=j.return}}if(vt=p,xs(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Qr,r)}catch{}u=!0}return u}finally{Le=l,$r.transition=s}}return!1}function xy(r,s,l){s=pa(l,s),s=Ug(r,s,1),r=Ts(r,s,1),s=er(),r!==null&&(Me(r,1,s),yr(r,s))}function qt(r,s,l){if(r.tag===3)xy(r,r,l);else for(;s!==null;){if(s.tag===3){xy(s,r,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ks===null||!ks.has(u))){r=pa(l,r),r=zg(s,r,1),s=Ts(s,r,1),r=er(),s!==null&&(Me(s,1,r),yr(s,r));break}}s=s.return}}function Lx(r,s,l){var u=r.pingCache;u!==null&&u.delete(s),s=er(),r.pingedLanes|=r.suspendedLanes&l,_n===r&&(Pn&l)===l&&(un===4||un===3&&(Pn&130023424)===Pn&&500>mt()-af?_o(r,0):of|=l),yr(r,s)}function Ey(r,s){s===0&&((r.mode&1)===0?s=1:(s=V,V<<=1,(V&130023424)===0&&(V=4194304)));var l=er();r=Gi(r,s),r!==null&&(Me(r,s,l),yr(r,l))}function Vx(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Ey(r,l)}function Fx(r,s){var l=0;switch(r.tag){case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=r.stateNode;break;default:throw Error(t(314))}u!==null&&u.delete(s),Ey(r,l)}var Ty;Ty=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||fr.current)mr=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return mr=!1,kx(r,s,l);mr=(r.flags&131072)!==0}else mr=!1,Mt&&(s.flags&1048576)!==0&&rg(s,Wc,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;cu(r,s),r=s.pendingProps;var p=oa(s,Fn.current);ha(s,l),p=Lh(null,s,u,r,p,l);var y=Vh();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,pr(u)?(y=!0,qc(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Nh(s),p.updater=au,s.stateNode=p,p._reactInternals=s,Hh(s,u,r,l),s=Wh(null,s,u,!0,y,l)):(s.tag=0,Mt&&y&&_h(s),Zn(null,s,p,l),s=s.child),s;case 16:u=s.elementType;e:{switch(cu(r,s),r=s.pendingProps,p=u._init,u=p(u._payload),s.type=u,p=s.tag=zx(u),r=ni(u,r),p){case 0:s=Kh(null,s,u,r,l);break e;case 1:s=Yg(null,s,u,r,l);break e;case 11:s=qg(null,s,u,r,l);break e;case 14:s=Gg(null,s,u,ni(u.type,r),l);break e}throw Error(t(306,u,""))}return s;case 0:return u=s.type,p=s.pendingProps,p=s.elementType===u?p:ni(u,p),Kh(r,s,u,p,l);case 1:return u=s.type,p=s.pendingProps,p=s.elementType===u?p:ni(u,p),Yg(r,s,u,p,l);case 3:e:{if(Xg(s),r===null)throw Error(t(387));u=s.pendingProps,y=s.memoizedState,p=y.element,hg(r,s),eu(s,u,null,l);var E=s.memoizedState;if(u=E.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=pa(Error(t(423)),s),s=Jg(r,s,u,l,p);break e}else if(u!==p){p=pa(Error(t(424)),s),s=Jg(r,s,u,l,p);break e}else for(Ir=ws(s.stateNode.containerInfo.firstChild),kr=s,Mt=!0,ti=null,l=ug(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ca(),u===p){s=Wi(r,s,l);break e}Zn(r,s,u,l)}s=s.child}return s;case 5:return mg(s),r===null&&Eh(s),u=s.type,p=s.pendingProps,y=r!==null?r.memoizedProps:null,E=p.children,ph(u,p)?E=null:y!==null&&ph(u,y)&&(s.flags|=32),Qg(r,s),Zn(r,s,E,l),s.child;case 6:return r===null&&Eh(s),null;case 13:return Zg(r,s,l);case 4:return Ph(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=ua(s,null,u,l):Zn(r,s,u,l),s.child;case 11:return u=s.type,p=s.pendingProps,p=s.elementType===u?p:ni(u,p),qg(r,s,u,p,l);case 7:return Zn(r,s,s.pendingProps,l),s.child;case 8:return Zn(r,s,s.pendingProps.children,l),s.child;case 12:return Zn(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(u=s.type._context,p=s.pendingProps,y=s.memoizedProps,E=p.value,At(Xc,u._currentValue),u._currentValue=E,y!==null)if(ei(y.value,E)){if(y.children===p.children&&!fr.current){s=Wi(r,s,l);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var j=y.dependencies;if(j!==null){E=y.child;for(var U=j.firstContext;U!==null;){if(U.context===u){if(y.tag===1){U=Ki(-1,l&-l),U.tag=2;var Z=y.updateQueue;if(Z!==null){Z=Z.shared;var he=Z.pending;he===null?U.next=U:(U.next=he.next,he.next=U),Z.pending=U}}y.lanes|=l,U=y.alternate,U!==null&&(U.lanes|=l),Ch(y.return,l,s),j.lanes|=l;break}U=U.next}}else if(y.tag===10)E=y.type===s.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=l,j=E.alternate,j!==null&&(j.lanes|=l),Ch(E,l,s),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===s){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}Zn(r,s,p.children,l),s=s.child}return s;case 9:return p=s.type,u=s.pendingProps.children,ha(s,l),p=zr(p),u=u(p),s.flags|=1,Zn(r,s,u,l),s.child;case 14:return u=s.type,p=ni(u,s.pendingProps),p=ni(u.type,p),Gg(r,s,u,p,l);case 15:return Kg(r,s,s.type,s.pendingProps,l);case 17:return u=s.type,p=s.pendingProps,p=s.elementType===u?p:ni(u,p),cu(r,s),s.tag=1,pr(u)?(r=!0,qc(s)):r=!1,ha(s,l),Vg(s,u,p),Hh(s,u,p,l),Wh(null,s,u,!0,r,l);case 19:return ty(r,s,l);case 22:return Wg(r,s,l)}throw Error(t(156,s.tag))};function Sy(r,s){return pi(r,s)}function Ux(r,s,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(r,s,l,u){return new Ux(r,s,l,u)}function mf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function zx(r){if(typeof r=="function")return mf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===N)return 11;if(r===De)return 14}return 2}function Ns(r,s){var l=r.alternate;return l===null?(l=Hr(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function _u(r,s,l,u,p,y){var E=2;if(u=r,typeof r=="function")mf(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case R:return xo(l.children,p,y,s);case k:E=8,p|=8;break;case A:return r=Hr(12,l,s,p|2),r.elementType=A,r.lanes=y,r;case P:return r=Hr(13,l,s,p),r.elementType=P,r.lanes=y,r;case Ae:return r=Hr(19,l,s,p),r.elementType=Ae,r.lanes=y,r;case qe:return bu(l,p,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:E=10;break e;case D:E=9;break e;case N:E=11;break e;case De:E=14;break e;case Be:E=16,u=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Hr(E,l,s,p),s.elementType=r,s.type=u,s.lanes=y,s}function xo(r,s,l,u){return r=Hr(7,r,u,s),r.lanes=l,r}function bu(r,s,l,u){return r=Hr(22,r,u,s),r.elementType=qe,r.lanes=l,r.stateNode={isHidden:!1},r}function gf(r,s,l){return r=Hr(6,r,null,s),r.lanes=l,r}function yf(r,s,l){return s=Hr(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Bx(r,s,l,u,p){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ee(0),this.expirationTimes=Ee(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.identifierPrefix=u,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function vf(r,s,l,u,p,y,E,j,U){return r=new Bx(r,s,l,j,U),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Hr(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:u,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(y),r}function $x(r,s,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:u==null?null:""+u,children:r,containerInfo:s,implementation:l}}function ky(r){if(!r)return bs;r=r._reactInternals;e:{if(nn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(pr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(pr(l))return eg(r,l,s)}return s}function Iy(r,s,l,u,p,y,E,j,U){return r=vf(l,u,!0,r,p,y,E,j,U),r.context=ky(null),l=r.current,u=er(),p=Cs(l),y=Ki(u,p),y.callback=s??null,Ts(l,y,p),r.current.lanes=p,Me(r,p,u),yr(r,u),r}function xu(r,s,l,u){var p=s.current,y=er(),E=Cs(p);return l=ky(l),s.context===null?s.context=l:s.pendingContext=l,s=Ki(y,E),s.payload={element:r},u=u===void 0?null:u,u!==null&&(s.callback=u),r=Ts(p,s,E),r!==null&&(si(r,p,E,y),Zc(r,p,E)),E}function Eu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Cy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function wf(r,s){Cy(r,s),(r=r.alternate)&&Cy(r,s)}function Hx(){return null}var Ay=typeof reportError=="function"?reportError:function(r){console.error(r)};function _f(r){this._internalRoot=r}Tu.prototype.render=_f.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));xu(r,s,null,null)},Tu.prototype.unmount=_f.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;wo(function(){xu(null,r,null,null)}),s[Bi]=null}};function Tu(r){this._internalRoot=r}Tu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Mr();r={blockedOn:null,target:r,priority:s};for(var l=0;l<mi.length&&s!==0&&s<mi[l].priority;l++);mi.splice(l,0,r),l===0&&Ic(r)}};function bf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Su(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ny(){}function qx(r,s,l,u,p){if(p){if(typeof u=="function"){var y=u;u=function(){var Z=Eu(E);y.call(Z)}}var E=Iy(s,u,r,0,null,!1,!1,"",Ny);return r._reactRootContainer=E,r[Bi]=E.current,ol(r.nodeType===8?r.parentNode:r),wo(),E}for(;p=r.lastChild;)r.removeChild(p);if(typeof u=="function"){var j=u;u=function(){var Z=Eu(U);j.call(Z)}}var U=vf(r,0,!1,null,null,!1,!1,"",Ny);return r._reactRootContainer=U,r[Bi]=U.current,ol(r.nodeType===8?r.parentNode:r),wo(function(){xu(s,U,l,u)}),U}function ku(r,s,l,u,p){var y=l._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var j=p;p=function(){var U=Eu(E);j.call(U)}}xu(s,E,r,p)}else E=qx(l,s,r,p,u);return Eu(E)}Ht=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=L(s.pendingLanes);l!==0&&($e(s,l|1),yr(s,mt()),(vt&6)===0&&(ya=mt()+500,xs()))}break;case 13:wo(function(){var u=Gi(r,1);if(u!==null){var p=er();si(u,r,1,p)}}),wf(r,1)}},on=function(r){if(r.tag===13){var s=Gi(r,134217728);if(s!==null){var l=er();si(s,r,134217728,l)}wf(r,134217728)}},Kt=function(r){if(r.tag===13){var s=Cs(r),l=Gi(r,s);if(l!==null){var u=er();si(l,r,s,u)}wf(r,s)}},Mr=function(){return Le},ps=function(r,s){var l=Le;try{return Le=r,s()}finally{Le=l}},q=function(r,s,l){switch(s){case"input":if(ir(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==r&&u.form===r.form){var p=$c(u);if(!p)throw Error(t(90));Wn(u),ir(u,p)}}}break;case"textarea":Qn(r,l);break;case"select":s=l.value,s!=null&&mn(r,!!l.multiple,s,!1)}},Oe=hf,wt=wo;var Gx={usingClientEntryPoint:!1,Events:[cl,ia,$c,ke,Ue,hf]},El={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kx={bundleType:El.bundleType,version:El.version,rendererPackageName:El.rendererPackageName,rendererConfig:El.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Mi(r),r===null?null:r.stateNode},findFiberByHostInstance:El.findFiberByHostInstance||Hx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iu.isDisabled&&Iu.supportsFiber)try{Qr=Iu.inject(Kx),sn=Iu}catch{}}return vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx,vr.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(s))throw Error(t(200));return $x(r,s,null,l)},vr.createRoot=function(r,s){if(!bf(r))throw Error(t(299));var l=!1,u="",p=Ay;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=vf(r,1,!1,null,null,l,!1,u,p),r[Bi]=s.current,ol(r.nodeType===8?r.parentNode:r),new _f(s)},vr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Mi(s),r=r===null?null:r.stateNode,r},vr.flushSync=function(r){return wo(r)},vr.hydrate=function(r,s,l){if(!Su(s))throw Error(t(200));return ku(null,r,s,!0,l)},vr.hydrateRoot=function(r,s,l){if(!bf(r))throw Error(t(405));var u=l!=null&&l.hydratedSources||null,p=!1,y="",E=Ay;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),s=Iy(s,null,r,1,l??null,p,!1,y,E),r[Bi]=s.current,ol(r),u)for(r=0;r<u.length;r++)l=u[r],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new Tu(s)},vr.render=function(r,s,l){if(!Su(s))throw Error(t(200));return ku(null,r,s,!1,l)},vr.unmountComponentAtNode=function(r){if(!Su(r))throw Error(t(40));return r._reactRootContainer?(wo(function(){ku(null,null,r,!1,function(){r._reactRootContainer=null,r[Bi]=null})}),!0):!1},vr.unstable_batchedUpdates=hf,vr.unstable_renderSubtreeIntoContainer=function(r,s,l,u){if(!Su(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return ku(r,s,l,!1,u)},vr.version="18.3.1-next-f1338f8080-20240426",vr}var Vy;function Dv(){if(Vy)return Tf.exports;Vy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Tf.exports=e1(),Tf.exports}var Fy;function t1(){if(Fy)return Au;Fy=1;var n=Dv();return Au.createRoot=n.createRoot,Au.hydrateRoot=n.hydrateRoot,Au}var n1=t1();const r1=n=>n instanceof Error?n.message+`
`+n.stack:JSON.stringify(n,null,2);class i1 extends Bs.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?f.jsxs("div",{className:"p-4 border border-red-500 rounded",children:[f.jsx("h2",{className:"text-red-500",children:"Something went wrong."}),f.jsx("pre",{className:"mt-2 text-sm",children:r1(this.state.error)})]}):this.props.children}}var Id=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Cd=typeof window>"u"||"Deno"in globalThis;function oi(){}function s1(n,e){return typeof n=="function"?n(e):n}function o1(n){return typeof n=="number"&&n>=0&&n!==1/0}function a1(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Kf(n,e){return typeof n=="function"?n(e):n}function l1(n,e){return typeof n=="function"?n(e):n}function Uy(n,e){const{type:t="all",exact:i,fetchStatus:o,predicate:a,queryKey:d,stale:h}=n;if(d){if(i){if(e.queryHash!==Np(d,e.options))return!1}else if(!Jl(e.queryKey,d))return!1}if(t!=="all"){const m=e.isActive();if(t==="active"&&!m||t==="inactive"&&m)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||o&&o!==e.state.fetchStatus||a&&!a(e))}function zy(n,e){const{exact:t,status:i,predicate:o,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Xl(e.options.mutationKey)!==Xl(a))return!1}else if(!Jl(e.options.mutationKey,a))return!1}return!(i&&e.state.status!==i||o&&!o(e))}function Np(n,e){return(e?.queryKeyHashFn||Xl)(n)}function Xl(n){return JSON.stringify(n,(e,t)=>Wf(t)?Object.keys(t).sort().reduce((i,o)=>(i[o]=t[o],i),{}):t)}function Jl(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Jl(n[t],e[t])):!1}function Ov(n,e){if(n===e)return n;const t=By(n)&&By(e);if(t||Wf(n)&&Wf(e)){const i=t?n:Object.keys(n),o=i.length,a=t?e:Object.keys(e),d=a.length,h=t?[]:{},m=new Set(i);let v=0;for(let x=0;x<d;x++){const T=t?x:a[x];(!t&&m.has(T)||t)&&n[T]===void 0&&e[T]===void 0?(h[T]=void 0,v++):(h[T]=Ov(n[T],e[T]),h[T]===n[T]&&n[T]!==void 0&&v++)}return o===d&&v===o?n:h}return e}function By(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Wf(n){if(!$y(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!$y(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function $y(n){return Object.prototype.toString.call(n)==="[object Object]"}function c1(n){return new Promise(e=>{setTimeout(e,n)})}function u1(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Ov(n,e):e}function d1(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function h1(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var Pp=Symbol();function Mv(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===Pp?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var f1=class extends Id{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!Cd&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},jv=new f1,p1=class extends Id{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!Cd&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},nd=new p1;function m1(){let n,e;const t=new Promise((o,a)=>{n=o,e=a});t.status="pending",t.catch(()=>{});function i(o){Object.assign(t,o),delete t.resolve,delete t.reject}return t.resolve=o=>{i({status:"fulfilled",value:o}),n(o)},t.reject=o=>{i({status:"rejected",reason:o}),e(o)},t}function g1(n){return Math.min(1e3*2**n,3e4)}function Lv(n){return(n??"online")==="online"?nd.isOnline():!0}var Vv=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function If(n){return n instanceof Vv}function Fv(n){let e=!1,t=0,i=!1,o;const a=m1(),d=K=>{i||(C(new Vv(K)),n.abort?.())},h=()=>{e=!0},m=()=>{e=!1},v=()=>jv.isFocused()&&(n.networkMode==="always"||nd.isOnline())&&n.canRun(),x=()=>Lv(n.networkMode)&&n.canRun(),T=K=>{i||(i=!0,n.onSuccess?.(K),o?.(),a.resolve(K))},C=K=>{i||(i=!0,n.onError?.(K),o?.(),a.reject(K))},z=()=>new Promise(K=>{o=B=>{(i||v())&&K(B)},n.onPause?.()}).then(()=>{o=void 0,i||n.onContinue?.()}),G=()=>{if(i)return;let K;const B=t===0?n.initialPromise:void 0;try{K=B??n.fn()}catch(ee){K=Promise.reject(ee)}Promise.resolve(K).then(T).catch(ee=>{if(i)return;const te=n.retry??(Cd?0:3),pe=n.retryDelay??g1,we=typeof pe=="function"?pe(t,ee):pe,re=te===!0||typeof te=="number"&&t<te||typeof te=="function"&&te(t,ee);if(e||!re){C(ee);return}t++,n.onFail?.(t,ee),c1(we).then(()=>v()?void 0:z()).then(()=>{e?C(ee):G()})})};return{promise:a,cancel:d,continue:()=>(o?.(),a),cancelRetry:h,continueRetry:m,canStart:x,start:()=>(x()?G():z().then(G),a)}}var y1=n=>setTimeout(n,0);function v1(){let n=[],e=0,t=h=>{h()},i=h=>{h()},o=y1;const a=h=>{e?n.push(h):o(()=>{t(h)})},d=()=>{const h=n;n=[],h.length&&o(()=>{i(()=>{h.forEach(m=>{t(m)})})})};return{batch:h=>{let m;e++;try{m=h()}finally{e--,e||d()}return m},batchCalls:h=>(...m)=>{a(()=>{h(...m)})},schedule:a,setNotifyFunction:h=>{t=h},setBatchNotifyFunction:h=>{i=h},setScheduler:h=>{o=h}}}var nr=v1(),Uv=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),o1(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Cd?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},w1=class extends Uv{#e;#t;#n;#i;#r;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#n=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=b1(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const i=u1(this.state.data,e,this.options);return this.#s({data:i,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),i}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(oi).catch(oi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>l1(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Kf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!a1(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(x=>x.options.queryFn);v&&this.setOptions(v.options)}const i=new AbortController,o=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(this.#a=!0,i.signal)})},a=()=>{const v=Mv(this.options,t),T=(()=>{const C={client:this.#i,queryKey:this.queryKey,meta:this.meta};return o(C),C})();return this.#a=!1,this.options.persister?this.options.persister(v,T,this):v(T)},h=(()=>{const v={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:a};return o(v),v})();this.options.behavior?.onFetch(h,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#s({type:"fetch",meta:h.fetchOptions?.meta});const m=v=>{If(v)&&v.silent||this.#s({type:"error",error:v}),If(v)||(this.#n.config.onError?.(v,this),this.#n.config.onSettled?.(this.state.data,v,this)),this.scheduleGc()};return this.#r=Fv({initialPromise:t?.initialPromise,fn:h.fetchFn,abort:i.abort.bind(i),onSuccess:v=>{if(v===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(x){m(x);return}this.#n.config.onSuccess?.(v,this),this.#n.config.onSettled?.(v,this.state.error,this),this.scheduleGc()},onError:m,onFail:(v,x)=>{this.#s({type:"failed",failureCount:v,error:x})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}),this.#r.start()}#s(e){const t=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,..._1(i.data,this.options),fetchMeta:e.meta??null};case"success":return this.#t=void 0,{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return If(o)&&o.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),nr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function _1(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Lv(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function b1(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var x1=class extends Id{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const i=e.queryKey,o=e.queryHash??Np(i,e);let a=this.get(o);return a||(a=new w1({client:n,queryKey:i,queryHash:o,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(i)}),this.add(a)),a}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){nr.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Uy(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>Uy(n,t)):e}notify(n){nr.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){nr.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){nr.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},E1=class extends Uv{#e;#t;#n;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||T1(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#i({type:"continue"})};this.#n=Fv({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(a,d)=>{this.#i({type:"failed",failureCount:a,error:d})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const i=this.state.status==="pending",o=!this.#n.canStart();try{if(i)t();else{this.#i({type:"pending",variables:e,isPaused:o}),await this.#t.config.onMutate?.(e,this);const d=await this.options.onMutate?.(e);d!==this.state.context&&this.#i({type:"pending",context:d,variables:e,isPaused:o})}const a=await this.#n.start();return await this.#t.config.onSuccess?.(a,e,this.state.context,this),await this.options.onSuccess?.(a,e,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,e,this.state.context),this.#i({type:"success",data:a}),a}catch(a){try{throw await this.#t.config.onError?.(a,e,this.state.context,this),await this.options.onError?.(a,e,this.state.context),await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,e,this.state.context),a}finally{this.#i({type:"error",error:a})}}finally{this.#t.runNext(this)}}#i(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),nr.batch(()=>{this.#e.forEach(i=>{i.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function T1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var S1=class extends Id{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const i=new E1({mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(i),i}add(n){this.#e.add(n);const e=Nu(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=Nu(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const i=t.indexOf(n);i!==-1&&t.splice(i,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=Nu(n);if(typeof e=="string"){const i=this.#t.get(e)?.find(o=>o.state.status==="pending");return!i||i===n}else return!0}runNext(n){const e=Nu(n);return typeof e=="string"?this.#t.get(e)?.find(i=>i!==n&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){nr.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>zy(e,t))}findAll(n={}){return this.getAll().filter(e=>zy(n,e))}notify(n){nr.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return nr.batch(()=>Promise.all(n.map(e=>e.continue().catch(oi))))}};function Nu(n){return n.options.scope?.id}function Hy(n){return{onFetch:(e,t)=>{const i=e.options,o=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],d=e.state.data?.pageParams||[];let h={pages:[],pageParams:[]},m=0;const v=async()=>{let x=!1;const T=G=>{Object.defineProperty(G,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},C=Mv(e.options,e.fetchOptions),z=async(G,K,B)=>{if(x)return Promise.reject();if(K==null&&G.pages.length)return Promise.resolve(G);const te=(()=>{const ie={client:e.client,queryKey:e.queryKey,pageParam:K,direction:B?"backward":"forward",meta:e.options.meta};return T(ie),ie})(),pe=await C(te),{maxPages:we}=e.options,re=B?h1:d1;return{pages:re(G.pages,pe,we),pageParams:re(G.pageParams,K,we)}};if(o&&a.length){const G=o==="backward",K=G?k1:qy,B={pages:a,pageParams:d},ee=K(i,B);h=await z(B,ee,G)}else{const G=n??a.length;do{const K=m===0?d[0]??i.initialPageParam:qy(i,h);if(m>0&&K==null)break;h=await z(h,K),m++}while(m<G)}return h};e.options.persister?e.fetchFn=()=>e.options.persister?.(v,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=v}}}function qy(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function k1(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var I1=class{#e;#t;#n;#i;#r;#o;#a;#s;constructor(n={}){this.#e=n.queryCache||new x1,this.#t=n.mutationCache||new S1,this.#n=n.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=jv.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=nd.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),i=t.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Kf(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),a=this.#e.get(i.queryHash)?.state.data,d=s1(e,a);if(d!==void 0)return this.#e.build(this,i).setData(d,{...t,manual:!0})}setQueriesData(n,e,t){return nr.batch(()=>this.#e.findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;nr.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return nr.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},i=nr.batch(()=>this.#e.findAll(n).map(o=>o.cancel(t)));return Promise.all(i).then(oi).catch(oi)}invalidateQueries(n,e={}){return nr.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},i=nr.batch(()=>this.#e.findAll(n).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let a=o.fetch(void 0,t);return t.throwOnError||(a=a.catch(oi)),o.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(i).then(oi)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(Kf(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(oi).catch(oi)}fetchInfiniteQuery(n){return n.behavior=Hy(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(oi).catch(oi)}ensureInfiniteQueryData(n){return n.behavior=Hy(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return nd.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#i.set(Xl(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#i.values()],t={};return e.forEach(i=>{Jl(n,i.queryKey)&&Object.assign(t,i.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(Xl(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(i=>{Jl(n,i.mutationKey)&&Object.assign(t,i.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Np(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Pp&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},C1=H.createContext(void 0),A1=({client:n,children:e})=>(H.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),f.jsx(C1.Provider,{value:n,children:e})),N1=function(){return null};let P1={data:""},R1=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||P1,D1=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,O1=/\/\*[^]*?\*\/|  +/g,Gy=/\n+/g,js=(n,e)=>{let t="",i="",o="";for(let a in n){let d=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+d+";":i+=a[1]=="f"?js(d,a):a+"{"+js(d,a[1]=="k"?"":e)+"}":typeof d=="object"?i+=js(d,e?e.replace(/([^,])+/g,h=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,h):h?h+" "+m:m)):a):d!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=js.p?js.p(a,d):a+":"+d+";")}return t+(e&&o?e+"{"+o+"}":o)+i},Yi={},zv=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+zv(n[t]);return e}return n},M1=(n,e,t,i,o)=>{let a=zv(n),d=Yi[a]||(Yi[a]=(m=>{let v=0,x=11;for(;v<m.length;)x=101*x+m.charCodeAt(v++)>>>0;return"go"+x})(a));if(!Yi[d]){let m=a!==n?n:(v=>{let x,T,C=[{}];for(;x=D1.exec(v.replace(O1,""));)x[4]?C.shift():x[3]?(T=x[3].replace(Gy," ").trim(),C.unshift(C[0][T]=C[0][T]||{})):C[0][x[1]]=x[2].replace(Gy," ").trim();return C[0]})(n);Yi[d]=js(o?{["@keyframes "+d]:m}:m,t?"":"."+d)}let h=t&&Yi.g?Yi.g:null;return t&&(Yi.g=Yi[d]),((m,v,x,T)=>{T?v.data=v.data.replace(T,m):v.data.indexOf(m)===-1&&(v.data=x?m+v.data:v.data+m)})(Yi[d],e,i,h),d},j1=(n,e,t)=>n.reduce((i,o,a)=>{let d=e[a];if(d&&d.call){let h=d(t),m=h&&h.props&&h.props.className||/^go/.test(h)&&h;d=m?"."+m:h&&typeof h=="object"?h.props?"":js(h,""):h===!1?"":h}return i+o+(d??"")},"");function Ad(n){let e=this||{},t=n.call?n(e.p):n;return M1(t.unshift?t.raw?j1(t,[].slice.call(arguments,1),e.p):t.reduce((i,o)=>Object.assign(i,o&&o.call?o(e.p):o),{}):t,R1(e.target),e.g,e.o,e.k)}let Bv,Qf,Yf;Ad.bind({g:1});let ns=Ad.bind({k:1});function L1(n,e,t,i){js.p=e,Bv=n,Qf=t,Yf=i}function no(n,e){let t=this||{};return function(){let i=arguments;function o(a,d){let h=Object.assign({},a),m=h.className||o.className;t.p=Object.assign({theme:Qf&&Qf()},h),t.o=/ *go\d+/.test(m),h.className=Ad.apply(t,i)+(m?" "+m:"");let v=n;return n[0]&&(v=h.as||n,delete h.as),Yf&&v[0]&&Yf(h),Bv(v,h)}return o}}var V1=n=>typeof n=="function",rd=(n,e)=>V1(n)?n(e):n,F1=(()=>{let n=0;return()=>(++n).toString()})(),$v=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),U1=20,Hv=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,U1)};case 1:return{...n,toasts:n.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:t}=e;return Hv(n,{type:n.toasts.find(a=>a.id===t.id)?1:0,toast:t});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(a=>a.id===i||i===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let o=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+o}))}}},Hu=[],So={toasts:[],pausedAt:void 0},Mo=n=>{So=Hv(So,n),Hu.forEach(e=>{e(So)})},z1={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},B1=(n={})=>{let[e,t]=H.useState(So),i=H.useRef(So);H.useEffect(()=>(i.current!==So&&t(So),Hu.push(t),()=>{let a=Hu.indexOf(t);a>-1&&Hu.splice(a,1)}),[]);let o=e.toasts.map(a=>{var d,h,m;return{...n,...n[a.type],...a,removeDelay:a.removeDelay||((d=n[a.type])==null?void 0:d.removeDelay)||n?.removeDelay,duration:a.duration||((h=n[a.type])==null?void 0:h.duration)||n?.duration||z1[a.type],style:{...n.style,...(m=n[a.type])==null?void 0:m.style,...a.style}}});return{...e,toasts:o}},$1=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||F1()}),hc=n=>(e,t)=>{let i=$1(e,n,t);return Mo({type:2,toast:i}),i.id},be=(n,e)=>hc("blank")(n,e);be.error=hc("error");be.success=hc("success");be.loading=hc("loading");be.custom=hc("custom");be.dismiss=n=>{Mo({type:3,toastId:n})};be.remove=n=>Mo({type:4,toastId:n});be.promise=(n,e,t)=>{let i=be.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(o=>{let a=e.success?rd(e.success,o):void 0;return a?be.success(a,{id:i,...t,...t?.success}):be.dismiss(i),o}).catch(o=>{let a=e.error?rd(e.error,o):void 0;a?be.error(a,{id:i,...t,...t?.error}):be.dismiss(i)}),n};var H1=(n,e)=>{Mo({type:1,toast:{id:n,height:e}})},q1=()=>{Mo({type:5,time:Date.now()})},Vl=new Map,G1=1e3,K1=(n,e=G1)=>{if(Vl.has(n))return;let t=setTimeout(()=>{Vl.delete(n),Mo({type:4,toastId:n})},e);Vl.set(n,t)},W1=n=>{let{toasts:e,pausedAt:t}=B1(n);H.useEffect(()=>{if(t)return;let a=Date.now(),d=e.map(h=>{if(h.duration===1/0)return;let m=(h.duration||0)+h.pauseDuration-(a-h.createdAt);if(m<0){h.visible&&be.dismiss(h.id);return}return setTimeout(()=>be.dismiss(h.id),m)});return()=>{d.forEach(h=>h&&clearTimeout(h))}},[e,t]);let i=H.useCallback(()=>{t&&Mo({type:6,time:Date.now()})},[t]),o=H.useCallback((a,d)=>{let{reverseOrder:h=!1,gutter:m=8,defaultPosition:v}=d||{},x=e.filter(z=>(z.position||v)===(a.position||v)&&z.height),T=x.findIndex(z=>z.id===a.id),C=x.filter((z,G)=>G<T&&z.visible).length;return x.filter(z=>z.visible).slice(...h?[C+1]:[0,C]).reduce((z,G)=>z+(G.height||0)+m,0)},[e]);return H.useEffect(()=>{e.forEach(a=>{if(a.dismissed)K1(a.id,a.removeDelay);else{let d=Vl.get(a.id);d&&(clearTimeout(d),Vl.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:H1,startPause:q1,endPause:i,calculateOffset:o}}},Q1=ns`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Y1=ns`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X1=ns`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,J1=no("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Q1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Y1} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${X1} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Z1=ns`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,eE=no("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${Z1} 1s linear infinite;
`,tE=ns`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,nE=ns`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,rE=no("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${nE} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,iE=no("div")`
  position: absolute;
`,sE=no("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,oE=ns`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,aE=no("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${oE} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,lE=({toast:n})=>{let{icon:e,type:t,iconTheme:i}=n;return e!==void 0?typeof e=="string"?H.createElement(aE,null,e):e:t==="blank"?null:H.createElement(sE,null,H.createElement(eE,{...i}),t!=="loading"&&H.createElement(iE,null,t==="error"?H.createElement(J1,{...i}):H.createElement(rE,{...i})))},cE=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,uE=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,dE="0%{opacity:0;} 100%{opacity:1;}",hE="0%{opacity:1;} 100%{opacity:0;}",fE=no("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,pE=no("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,mE=(n,e)=>{let t=n.includes("top")?1:-1,[i,o]=$v()?[dE,hE]:[cE(t),uE(t)];return{animation:e?`${ns(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ns(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},gE=H.memo(({toast:n,position:e,style:t,children:i})=>{let o=n.height?mE(n.position||e||"top-center",n.visible):{opacity:0},a=H.createElement(lE,{toast:n}),d=H.createElement(pE,{...n.ariaProps},rd(n.message,n));return H.createElement(fE,{className:n.className,style:{...o,...t,...n.style}},typeof i=="function"?i({icon:a,message:d}):H.createElement(H.Fragment,null,a,d))});L1(H.createElement);var yE=({id:n,className:e,style:t,onHeightUpdate:i,children:o})=>{let a=H.useCallback(d=>{if(d){let h=()=>{let m=d.getBoundingClientRect().height;i(n,m)};h(),new MutationObserver(h).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[n,i]);return H.createElement("div",{ref:a,className:e,style:t},o)},vE=(n,e)=>{let t=n.includes("top"),i=t?{top:0}:{bottom:0},o=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:$v()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...i,...o}},wE=Ad`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Pu=16,_E=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:i,children:o,containerStyle:a,containerClassName:d})=>{let{toasts:h,handlers:m}=W1(t);return H.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Pu,left:Pu,right:Pu,bottom:Pu,pointerEvents:"none",...a},className:d,onMouseEnter:m.startPause,onMouseLeave:m.endPause},h.map(v=>{let x=v.position||e,T=m.calculateOffset(v,{reverseOrder:n,gutter:i,defaultPosition:e}),C=vE(x,T);return H.createElement(yE,{id:v.id,key:v.id,onHeightUpdate:m.updateHeight,className:v.visible?wE:"",style:C},v.type==="custom"?rd(v.message,v):o?o(v):H.createElement(gE,{toast:v,position:x}))}))},ut=be,qv=Dv();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(n,e)=>{const t=H.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:d,className:h="",children:m,...v},x)=>H.createElement("svg",{ref:x,...bE,width:o,height:o,stroke:i,strokeWidth:d?Number(a)*24/Number(o):a,className:["lucide",`lucide-${xE(n)}`,h].join(" "),...v},[...e.map(([T,C])=>H.createElement(T,C)),...Array.isArray(m)?m:[m]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=Ce("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=Ce("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=Ce("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=Ce("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=Ce("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=Ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=Ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=Ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=Ce("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=Ce("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=Ce("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=Ce("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=Ce("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=Ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=Ce("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=Ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=Ce("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=Ce("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=Ce("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=Ce("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Ce("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=Ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=Ce("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=Ce("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=Ce("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=Ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=Ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Ce("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=Ce("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=Ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=Ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=Ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=Ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=Ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=Ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=Ce("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=Ce("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=Ce("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=Ce("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=Ce("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=Ce("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=Ce("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=Ce("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=Ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=Ce("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=Ce("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=Ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=Ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=Ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=Ce("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=Ce("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=Ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=Ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=Ce("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=Ce("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Ce("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),hT=()=>{};var Wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},fT=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],d=n[t++],h=n[t++],m=((o&7)<<18|(a&63)<<12|(d&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=n[t++],d=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|d&63)}}return e.join("")},sw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],d=o+1<n.length,h=d?n[o+1]:0,m=o+2<n.length,v=m?n[o+2]:0,x=a>>2,T=(a&3)<<4|h>>4;let C=(h&15)<<2|v>>6,z=v&63;m||(z=64,d||(C=64)),i.push(t[x],t[T],t[C],t[z])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):fT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const v=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||h==null||v==null||T==null)throw new pT;const C=a<<2|h>>4;if(i.push(C),v!==64){const z=h<<4&240|v>>2;if(i.push(z),T!==64){const G=v<<6&192|T;i.push(G)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class pT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mT=function(n){const e=iw(n);return sw.encodeByteArray(e,!0)},id=function(n){return mT(n).replace(/\./g,"")},ow=function(n){try{return sw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=()=>gT().__FIREBASE_DEFAULTS__,vT=()=>{if(typeof process>"u"||typeof Wy>"u")return;const n=Wy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ow(n[1]);return e&&JSON.parse(e)},Dd=()=>{try{return hT()||yT()||vT()||wT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aw=n=>Dd()?.emulatorHosts?.[n],_T=n=>{const e=aw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},lw=()=>Dd()?.config,cw=n=>Dd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[id(JSON.stringify(t)),id(JSON.stringify(d)),""].join(".")}const zl={};function ET(){const n={prod:[],emulator:[]};for(const e of Object.keys(zl))zl[e]?n.emulator.push(e):n.prod.push(e);return n}function TT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Qy=!1;function dw(n,e){if(typeof window>"u"||typeof document>"u"||!za(window.location.host)||zl[n]===e||zl[n]||Qy)return;zl[n]=e;function t(C){return`__firebase__banner__${C}`}const i="__firebase__banner",a=ET().prod.length>0;function d(){const C=document.getElementById(i);C&&C.remove()}function h(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function m(C,z){C.setAttribute("width","24"),C.setAttribute("id",z),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Qy=!0,d()},C}function x(C,z){C.setAttribute("id",z),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=TT(i),z=t("text"),G=document.getElementById(z)||document.createElement("span"),K=t("learnmore"),B=document.getElementById(K)||document.createElement("a"),ee=t("preprendIcon"),te=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const pe=C.element;h(pe),x(B,K);const we=v();m(te,ee),pe.append(te,G,B,we),document.body.appendChild(pe)}a?(G.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ST(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function kT(){const n=Dd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function AT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NT(){const n=Kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PT(){return!kT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RT(){try{return typeof indexedDB=="object"}catch{return!1}}function DT(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="FirebaseError";class ls extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=OT,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fc.prototype.create)}}class fc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],d=a?MT(a,i):"Error",h=`${this.serviceName}: ${d} (${o}).`;return new ls(o,h,i)}}function MT(n,e){return n.replace(jT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const jT=/\{\$([^}]+)}/g;function LT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ao(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],d=e[o];if(Yy(a)&&Yy(d)){if(!Ao(a,d))return!1}else if(a!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Yy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Al(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Nl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function VT(n,e){const t=new FT(n,e);return t.subscribe.bind(t)}class FT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");UT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Af),o.error===void 0&&(o.error=Af),o.complete===void 0&&(o.complete=Af);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Af(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(n){return n&&n._delegate?n._delegate:n}class No{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new bT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($T(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&d.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:BT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BT(n){return n===Eo?void 0:n}function $T(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const qT={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},GT=dt.INFO,KT={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},WT=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=KT[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Op{constructor(e){this.name=e,this._logLevel=GT,this._logHandler=WT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const QT=(n,e)=>e.some(t=>n instanceof t);let Xy,Jy;function YT(){return Xy||(Xy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XT(){return Jy||(Jy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hw=new WeakMap,ep=new WeakMap,fw=new WeakMap,Nf=new WeakMap,Mp=new WeakMap;function JT(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",d)},a=()=>{t(Hs(n.result)),o()},d=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&hw.set(t,n)}).catch(()=>{}),Mp.set(e,n),e}function ZT(n){if(ep.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",d),n.removeEventListener("abort",d)},a=()=>{t(),o()},d=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",d),n.addEventListener("abort",d)});ep.set(n,e)}let tp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ep.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function eS(n){tp=n(tp)}function tS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Pf(this),e,...t);return fw.set(i,e.sort?e.sort():[e]),Hs(i)}:XT().includes(n)?function(...e){return n.apply(Pf(this),e),Hs(hw.get(this))}:function(...e){return Hs(n.apply(Pf(this),e))}}function nS(n){return typeof n=="function"?tS(n):(n instanceof IDBTransaction&&ZT(n),QT(n,YT())?new Proxy(n,tp):n)}function Hs(n){if(n instanceof IDBRequest)return JT(n);if(Nf.has(n))return Nf.get(n);const e=nS(n);return e!==n&&(Nf.set(n,e),Mp.set(e,n)),e}const Pf=n=>Mp.get(n);function rS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const d=indexedDB.open(n,e),h=Hs(d);return i&&d.addEventListener("upgradeneeded",m=>{i(Hs(d.result),m.oldVersion,m.newVersion,Hs(d.transaction),m)}),t&&d.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{a&&m.addEventListener("close",()=>a()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),h}const iS=["get","getKey","getAll","getAllKeys","count"],sS=["put","add","delete","clear"],Rf=new Map;function Zy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Rf.get(e))return Rf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=sS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||iS.includes(t)))return;const a=async function(d,...h){const m=this.transaction(d,o?"readwrite":"readonly");let v=m.store;return i&&(v=v.index(h.shift())),(await Promise.all([v[t](...h),o&&m.done]))[0]};return Rf.set(e,a),a}eS(n=>({...n,get:(e,t,i)=>Zy(e,t)||n.get(e,t,i),has:(e,t)=>!!Zy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function aS(n){return n.getComponent()?.type==="VERSION"}const np="@firebase/app",e0="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Op("@firebase/app"),lS="@firebase/app-compat",cS="@firebase/analytics-compat",uS="@firebase/analytics",dS="@firebase/app-check-compat",hS="@firebase/app-check",fS="@firebase/auth",pS="@firebase/auth-compat",mS="@firebase/database",gS="@firebase/data-connect",yS="@firebase/database-compat",vS="@firebase/functions",wS="@firebase/functions-compat",_S="@firebase/installations",bS="@firebase/installations-compat",xS="@firebase/messaging",ES="@firebase/messaging-compat",TS="@firebase/performance",SS="@firebase/performance-compat",kS="@firebase/remote-config",IS="@firebase/remote-config-compat",CS="@firebase/storage",AS="@firebase/storage-compat",NS="@firebase/firestore",PS="@firebase/ai",RS="@firebase/firestore-compat",DS="firebase",OS="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]",MS={[np]:"fire-core",[lS]:"fire-core-compat",[uS]:"fire-analytics",[cS]:"fire-analytics-compat",[hS]:"fire-app-check",[dS]:"fire-app-check-compat",[fS]:"fire-auth",[pS]:"fire-auth-compat",[mS]:"fire-rtdb",[gS]:"fire-data-connect",[yS]:"fire-rtdb-compat",[vS]:"fire-fn",[wS]:"fire-fn-compat",[_S]:"fire-iid",[bS]:"fire-iid-compat",[xS]:"fire-fcm",[ES]:"fire-fcm-compat",[TS]:"fire-perf",[SS]:"fire-perf-compat",[kS]:"fire-rc",[IS]:"fire-rc-compat",[CS]:"fire-gcs",[AS]:"fire-gcs-compat",[NS]:"fire-fst",[RS]:"fire-fst-compat",[PS]:"fire-vertex","fire-js":"fire-js",[DS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new Map,jS=new Map,ip=new Map;function t0(n,e){try{n.container.addComponent(e)}catch(t){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ra(n){const e=n.name;if(ip.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;ip.set(e,n);for(const t of sd.values())t0(t,n);for(const t of jS.values())t0(t,n);return!0}function jp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qs=new fc("app","Firebase",LS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new No("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=OS;function pw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:rp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw qs.create("bad-app-name",{appName:String(o)});if(t||(t=lw()),!t)throw qs.create("no-options");const a=sd.get(o);if(a){if(Ao(t,a.options)&&Ao(i,a.config))return a;throw qs.create("duplicate-app",{appName:o})}const d=new HT(o);for(const m of ip.values())d.addComponent(m);const h=new VS(t,i,d);return sd.set(o,h),h}function mw(n=rp){const e=sd.get(n);if(!e&&n===rp&&lw())return pw();if(!e)throw qs.create("no-app",{appName:n});return e}function Gs(n,e,t){let i=MS[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&d.push("and"),a&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(d.join(" "));return}Ra(new No(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebase-heartbeat-database",US=1,ec="firebase-heartbeat-store";let Df=null;function gw(){return Df||(Df=rS(FS,US,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ec)}catch(t){console.warn(t)}}}}).catch(n=>{throw qs.create("idb-open",{originalErrorMessage:n.message})})),Df}async function zS(n){try{const t=(await gw()).transaction(ec),i=await t.objectStore(ec).get(yw(n));return await t.done,i}catch(e){if(e instanceof ls)rs.warn(e.message);else{const t=qs.create("idb-get",{originalErrorMessage:e?.message});rs.warn(t.message)}}}async function n0(n,e){try{const i=(await gw()).transaction(ec,"readwrite");await i.objectStore(ec).put(e,yw(n)),await i.done}catch(t){if(t instanceof ls)rs.warn(t.message);else{const i=qs.create("idb-set",{originalErrorMessage:t?.message});rs.warn(i.message)}}}function yw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=1024,$S=30;class HS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new GS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=r0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>$S){const o=KS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){rs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=r0(),{heartbeatsToSend:t,unsentEntries:i}=qS(this._heartbeatsCache.heartbeats),o=id(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return rs.warn(e),""}}}function r0(){return new Date().toISOString().substring(0,10)}function qS(n,e=BS){const t=[];let i=n.slice();for(const o of n){const a=t.find(d=>d.agent===o.agent);if(a){if(a.dates.push(o.date),i0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),i0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class GS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RT()?DT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await zS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return n0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return n0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function i0(n){return id(JSON.stringify({version:2,heartbeats:n})).length}function KS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n){Ra(new No("platform-logger",e=>new oS(e),"PRIVATE")),Ra(new No("heartbeat",e=>new HS(e),"PRIVATE")),Gs(np,e0,n),Gs(np,e0,"esm2020"),Gs("fire-js","")}WS("");var QS="firebase",YS="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gs(QS,YS,"app");function vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XS=vw,ww=new fc("auth","Firebase",vw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=new Op("@firebase/auth");function JS(n,...e){od.logLevel<=dt.WARN&&od.warn(`Auth (${Ba}): ${n}`,...e)}function Gu(n,...e){od.logLevel<=dt.ERROR&&od.error(`Auth (${Ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n,...e){throw Lp(n,...e)}function Ti(n,...e){return Lp(n,...e)}function _w(n,e,t){const i={...XS(),[e]:t};return new fc("auth","Firebase",i).create(e,{appName:n.name})}function ts(n){return _w(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ww.create(n,...e)}function Ye(n,e,...t){if(!n)throw Lp(e,...t)}function Zi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gu(e),new Error(e)}function is(n,e){n||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(){return typeof self<"u"&&self.location?.href||""}function ZS(){return s0()==="http:"||s0()==="https:"}function s0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZS()||CT()||"connection"in navigator)?navigator.onLine:!0}function tk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,is(t>e,"Short delay should be less than long delay!"),this.isMobile=ST()||AT()}get(){return ek()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(n,e){is(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ik=new mc(3e4,6e4);function ro(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function io(n,e,t,i,o={}){return xw(n,o,async()=>{let a={},d={};i&&(e==="GET"?d=i:a={body:JSON.stringify(i)});const h=pc({key:n.config.apiKey,...d}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const v={method:e,headers:m,...a};return IT()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&za(n.emulatorConfig.host)&&(v.credentials="include"),bw.fetch()(await Ew(n,n.config.apiHost,t,h),v)})}async function xw(n,e,t){n._canInitEmulator=!1;const i={...nk,...e};try{const o=new ok(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await a.json();if("needConfirmation"in d)throw Ru(n,"account-exists-with-different-credential",d);if(a.ok&&!("errorMessage"in d))return d;{const h=a.ok?d.errorMessage:d.error.message,[m,v]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ru(n,"credential-already-in-use",d);if(m==="EMAIL_EXISTS")throw Ru(n,"email-already-in-use",d);if(m==="USER_DISABLED")throw Ru(n,"user-disabled",d);const x=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw _w(n,x,v);ci(n,x)}}catch(o){if(o instanceof ls)throw o;ci(n,"network-request-failed",{message:String(o)})}}async function gc(n,e,t,i,o={}){const a=await io(n,e,t,i,o);return"mfaPendingCredential"in a&&ci(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Ew(n,e,t,i){const o=`${e}${t}?${i}`,a=n,d=a.config.emulator?Vp(n.config,o):`${n.config.apiScheme}://${o}`;return rk.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(d).toString():d}function sk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ok{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ti(this.auth,"network-request-failed")),ik.get())})}}function Ru(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ti(n,e,i);return o.customData._tokenResponse=t,o}function o0(n){return n!==void 0&&n.enterprise!==void 0}class ak{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lk(n,e){return io(n,"GET","/v2/recaptchaConfig",ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(n,e){return io(n,"POST","/v1/accounts:delete",e)}async function ad(n,e){return io(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uk(n,e=!1){const t=Nr(n),i=await t.getIdToken(e),o=Fp(i);Ye(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,d=a?.sign_in_provider;return{claims:o,token:i,authTime:Bl(Of(o.auth_time)),issuedAtTime:Bl(Of(o.iat)),expirationTime:Bl(Of(o.exp)),signInProvider:d||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Of(n){return Number(n)*1e3}function Fp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Gu("JWT malformed, contained fewer than 3 sections"),null;try{const o=ow(t);return o?JSON.parse(o):(Gu("Failed to decode base64 JWT payload"),null)}catch(o){return Gu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function a0(n){const e=Fp(n);return Ye(e,"internal-error"),Ye(typeof e.exp<"u","internal-error"),Ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ls&&dk(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function dk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bl(this.lastLoginAt),this.creationTime=Bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(n){const e=n.auth,t=await n.getIdToken(),i=await tc(n,ad(e,{idToken:t}));Ye(i?.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=o.providerUserInfo?.length?Tw(o.providerUserInfo):[],d=pk(n.providerData,a),h=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!d?.length,v=h?m:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new op(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(n,x)}async function fk(n){const e=Nr(n);await ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pk(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Tw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(n,e){const t=await xw(n,{},async()=>{const i=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,d=await Ew(n,o,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:i};return n.emulatorConfig&&za(n.emulatorConfig.host)&&(m.credentials="include"),bw.fetch()(d,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gk(n,e){return io(n,"POST","/v2/accounts:revokeToken",ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ye(e.idToken,"internal-error"),Ye(typeof e.idToken<"u","internal-error"),Ye(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ye(e.length!==0,"internal-error");const t=a0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await mk(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,d=new Ia;return i&&(Ye(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Ye(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),a&&(Ye(typeof a=="number","internal-error",{appName:e}),d.expirationTime=a),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(n,e){Ye(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new hk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new op(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await tc(this,this.stsTokenManager.getToken(this.auth,e));return Ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uk(this,e)}reload(){return fk(this)}_assign(e){this!==e&&(Ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ld(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(ts(this.auth));const e=await this.getIdToken();return await tc(this,ck(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,d=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,v=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:T,emailVerified:C,isAnonymous:z,providerData:G,stsTokenManager:K}=t;Ye(T&&K,e,"internal-error");const B=Ia.fromJSON(this.name,K);Ye(typeof T=="string",e,"internal-error"),Rs(i,e.name),Rs(o,e.name),Ye(typeof C=="boolean",e,"internal-error"),Ye(typeof z=="boolean",e,"internal-error"),Rs(a,e.name),Rs(d,e.name),Rs(h,e.name),Rs(m,e.name),Rs(v,e.name),Rs(x,e.name);const ee=new ai({uid:T,auth:e,email:o,emailVerified:C,displayName:i,isAnonymous:z,photoURL:d,phoneNumber:a,tenantId:h,stsTokenManager:B,createdAt:v,lastLoginAt:x});return G&&Array.isArray(G)&&(ee.providerData=G.map(te=>({...te}))),m&&(ee._redirectEventId=m),ee}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ia;o.updateFromServerResponse(t);const a=new ai({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ld(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ye(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?Tw(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!a?.length,h=new Ia;h.updateFromIdToken(i);const m=new ai({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new op(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(m,v),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new Map;function es(n){is(n instanceof Function,"Expected a class definition");let e=l0.get(n);return e?(is(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,l0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sw.type="NONE";const c0=Sw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(n,e,t){return`firebase:${n}:${e}:${t}`}class Ca{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Ku(this.userKey,o.apiKey,a),this.fullPersistenceKey=Ku("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ad(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ca(es(c0),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let a=o[0]||es(c0);const d=Ku(i,e.config.apiKey,e.name);let h=null;for(const v of t)try{const x=await v._get(d);if(x){let T;if(typeof x=="string"){const C=await ad(e,{idToken:x}).catch(()=>{});if(!C)break;T=await ai._fromGetAccountInfoResponse(e,C,x)}else T=ai._fromJSON(e,x);v!==a&&(h=T),a=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new Ca(a,e,i):(a=m[0],h&&await a._set(d,h.toJSON()),await Promise.all(t.map(async v=>{if(v!==a)try{await v._remove(d)}catch{}})),new Ca(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Aw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pw(e))return"Blackberry";if(Rw(e))return"Webos";if(Iw(e))return"Safari";if((e.includes("chrome/")||Cw(e))&&!e.includes("edge/"))return"Chrome";if(Nw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function kw(n=Kn()){return/firefox\//i.test(n)}function Iw(n=Kn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cw(n=Kn()){return/crios\//i.test(n)}function Aw(n=Kn()){return/iemobile/i.test(n)}function Nw(n=Kn()){return/android/i.test(n)}function Pw(n=Kn()){return/blackberry/i.test(n)}function Rw(n=Kn()){return/webos/i.test(n)}function Up(n=Kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yk(n=Kn()){return Up(n)&&!!window.navigator?.standalone}function vk(){return NT()&&document.documentMode===10}function Dw(n=Kn()){return Up(n)||Nw(n)||Rw(n)||Pw(n)||/windows phone/i.test(n)||Aw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n,e=[]){let t;switch(n){case"Browser":t=u0(Kn());break;case"Worker":t=`${u0(Kn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ba}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((d,h)=>{try{const m=e(a);d(m)}catch(m){h(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(n,e={}){return io(n,"GET","/v2/passwordPolicy",ro(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=6;class xk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d0(this),this.idTokenSubscription=new d0(this),this.beforeStateQueue=new wk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=es(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ad(this,{idToken:e}),i=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,d=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===d)&&h?.user&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ld(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(ts(this));const t=e?Nr(e):null;return t&&Ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _k(this),t=new xk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await gk(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&es(e)||this._popupRedirectResolver;Ye(t,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ye(h,this,"internal-error"),h.then(()=>{d||a(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{d=!0,m()}}else{const m=e.addObserver(t);return()=>{d=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jo(n){return Nr(n)}class d0{constructor(e){this.auth=e,this.observer=null,this.addObserver=VT(t=>this.observer=t)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tk(n){Od=n}function Mw(n){return Od.loadJS(n)}function Sk(){return Od.recaptchaEnterpriseScript}function kk(){return Od.gapiScript}function Ik(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Ck{constructor(){this.enterprise=new Ak}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ak{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Nk="recaptcha-enterprise",jw="NO_RECAPTCHA";class Pk{constructor(e){this.type=Nk,this.auth=jo(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(d,h)=>{lk(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const v=new ak(m);return a.tenantId==null?a._agentRecaptchaConfig=v:a._tenantRecaptchaConfigs[a.tenantId]=v,d(v.siteKey)}}).catch(m=>{h(m)})})}function o(a,d,h){const m=window.grecaptcha;o0(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(v=>{d(v)}).catch(()=>{d(jw)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ck().execute("siteKey",{action:"verify"}):new Promise((a,d)=>{i(this.auth).then(h=>{if(!t&&o0(window.grecaptcha))o(h,a,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Sk();m.length!==0&&(m+=h),Mw(m).then(()=>{o(h,a,d)}).catch(v=>{d(v)})}}).catch(h=>{d(h)})})}}async function h0(n,e,t,i=!1,o=!1){const a=new Pk(n);let d;if(o)d=jw;else try{d=await a.verify(t)}catch{d=await a.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,v=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:d}):Object.assign(h,{captchaResponse:d}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function ap(n,e,t,i,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await h0(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await h0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(n,e){const t=jp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ao(a,e??{}))return o;ci(o,"already-initialized")}return t.initialize({options:e})}function Dk(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(es);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Ok(n,e,t){const i=jo(n);Ye(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=Lw(e),{host:d,port:h}=Mk(e),m=h===null?"":`:${h}`,v={url:`${a}//${d}${m}/`},x=Object.freeze({host:d,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ye(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ye(Ao(v,i.config.emulator)&&Ao(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,za(d)?(uw(`${a}//${d}${m}`),dw("Auth",!0)):jk()}function Lw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Mk(n){const e=Lw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:f0(i.substr(a.length+1))}}else{const[a,d]=i.split(":");return{host:a,port:f0(d)}}}function f0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,t){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}async function Lk(n,e){return io(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(n,e){return gc(n,"POST","/v1/accounts:signInWithPassword",ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(n,e){return gc(n,"POST","/v1/accounts:signInWithEmailLink",ro(n,e))}async function Uk(n,e){return gc(n,"POST","/v1/accounts:signInWithEmailLink",ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends zp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new nc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new nc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ap(e,t,"signInWithPassword",Vk);case"emailLink":return Fk(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ap(e,i,"signUpPassword",Lk);case"emailLink":return Uk(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(n,e){return gc(n,"POST","/v1/accounts:signInWithIdp",ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="http://localhost";class Po extends zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const d=new Po(i,o);return d.idToken=a.idToken||void 0,d.accessToken=a.accessToken||void 0,d.secret=a.secret,d.nonce=a.nonce,d.pendingToken=a.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Aa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Aa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Aa(e,t)}buildRequest(){const e={requestUri:zk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $k(n){const e=Al(Nl(n)).link,t=e?Al(Nl(e)).deep_link_id:null,i=Al(Nl(n)).deep_link_id;return(i?Al(Nl(i)).link:null)||i||t||e||n}class Bp{constructor(e){const t=Al(Nl(e)),i=t.apiKey??null,o=t.oobCode??null,a=Bk(t.mode??null);Ye(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$k(e);try{return new Bp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.providerId=$a.PROVIDER_ID}static credential(e,t){return nc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Bp.parseLink(t);return Ye(i,"argument-error"),nc._fromEmailAndCode(e,i.code,i.tenantId)}}$a.PROVIDER_ID="password";$a.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$a.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends Vw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends yc{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends yc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Po._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Vs.credential(t,i)}catch{return null}}}Vs.GOOGLE_SIGN_IN_METHOD="google.com";Vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends yc{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends yc{constructor(){super("twitter.com")}static credential(e,t){return Po._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Us.credential(t,i)}catch{return null}}}Us.TWITTER_SIGN_IN_METHOD="twitter.com";Us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(n,e){return gc(n,"POST","/v1/accounts:signUp",ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await ai._fromIdTokenResponse(e,i,o),d=p0(i);return new Ro({user:a,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=p0(i);return new Ro({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function p0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends ls{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new cd(e,t,i,o)}}function Fw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cd._fromErrorAndOperation(n,a,e,i):a})}async function qk(n,e,t=!1){const i=await tc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ro._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(n,e,t=!1){const{auth:i}=n;if(qr(i.app))return Promise.reject(ts(i));const o="reauthenticate";try{const a=await tc(n,Fw(i,o,e,n),t);Ye(a.idToken,i,"internal-error");const d=Fp(a.idToken);Ye(d,i,"internal-error");const{sub:h}=d;return Ye(n.uid===h,i,"user-mismatch"),Ro._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&ci(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(n,e,t=!1){if(qr(n.app))return Promise.reject(ts(n));const i="signIn",o=await Fw(n,i,e),a=await Ro._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function Kk(n,e){return Uw(jo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(n){const e=jo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wk(n,e,t){if(qr(n.app))return Promise.reject(ts(n));const i=jo(n),d=await ap(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hk).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&zw(n),m}),h=await Ro._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(h.user),h}function Qk(n,e,t){return qr(n.app)?Promise.reject(ts(n)):Kk(Nr(n),$a.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&zw(n),i})}function Yk(n,e,t,i){return Nr(n).onIdTokenChanged(e,t,i)}function Xk(n,e,t){return Nr(n).beforeAuthStateChanged(e,t)}function Jk(n,e,t,i){return Nr(n).onAuthStateChanged(e,t,i)}function Zk(n){return Nr(n).signOut()}const ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ud,"1"),this.storage.removeItem(ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=1e3,tI=10;class $w extends Bw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,h,m)=>{this.notifyListeners(d,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},a=this.storage.getItem(i);vk()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,tI):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},eI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$w.type="LOCAL";const nI=$w;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends Bw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hw.type="SESSION";const qw=Hw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Md(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(d).map(async v=>v(t.origin,a)),m=await rI(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,d;return new Promise((h,m)=>{const v=$p("",20);o.port1.start();const x=setTimeout(()=>{m(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(T){const C=T;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(x),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(C.data.response);break;default:clearTimeout(x),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return window}function sI(n){Si().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(){return typeof Si().WorkerGlobalScope<"u"&&typeof Si().importScripts=="function"}async function oI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aI(){return navigator?.serviceWorker?.controller||null}function lI(){return Gw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="firebaseLocalStorageDb",cI=1,dd="firebaseLocalStorage",Ww="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jd(n,e){return n.transaction([dd],e?"readwrite":"readonly").objectStore(dd)}function uI(){const n=indexedDB.deleteDatabase(Kw);return new vc(n).toPromise()}function lp(){const n=indexedDB.open(Kw,cI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(dd,{keyPath:Ww})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(dd)?e(i):(i.close(),await uI(),e(await lp()))})})}async function m0(n,e,t){const i=jd(n,!0).put({[Ww]:e,value:t});return new vc(i).toPromise()}async function dI(n,e){const t=jd(n,!1).get(e),i=await new vc(t).toPromise();return i===void 0?null:i.value}function g0(n,e){const t=jd(n,!0).delete(e);return new vc(t).toPromise()}const hI=800,fI=3;class Qw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>fI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Md._getInstance(lI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await oI(),!this.activeServiceWorker)return;this.sender=new iI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lp();return await m0(e,ud,"1"),await g0(e,ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>m0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>dI(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>g0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=jd(o,!1).getAll();return new vc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qw.type="LOCAL";const pI=Qw;new mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(n,e){return e?es(e):(Ye(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Aa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Aa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Aa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gI(n){return Uw(n.auth,new Hp(n),n.bypassAuthState)}function yI(n){const{auth:e,user:t}=n;return Ye(t,e,"internal-error"),Gk(t,new Hp(n),n.bypassAuthState)}async function vI(n){const{auth:e,user:t}=n;return Ye(t,e,"internal-error"),qk(t,new Hp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:d,type:h}=e;if(d){this.reject(d);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gI;case"linkViaPopup":case"linkViaRedirect":return vI;case"reauthViaPopup":case"reauthViaRedirect":return yI;default:ci(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new mc(2e3,1e4);class Ea extends Yw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Ea.currentPopupAction&&Ea.currentPopupAction.cancel(),Ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ye(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=$p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wI.get())};e()}}Ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="pendingRedirect",Wu=new Map;class bI extends Yw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Wu.get(this.auth._key());if(!e){try{const i=await xI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Wu.set(this.auth._key(),e)}return this.bypassAuthState||Wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xI(n,e){const t=SI(e),i=TI(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function EI(n,e){Wu.set(n._key(),e)}function TI(n){return es(n._redirectPersistence)}function SI(n){return Ku(_I,n.config.apiKey,n.name)}async function kI(n,e,t=!1){if(qr(n.app))return Promise.reject(ts(n));const i=jo(n),o=mI(i,e),d=await new bI(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=10*60*1e3;class CI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Xw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=II&&this.cachedEventUids.clear(),this.cachedEventUids.has(y0(e))}saveEventToCache(e){this.cachedEventUids.add(y0(e)),this.lastProcessedEventTime=Date.now()}}function y0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Xw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function AI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(n,e={}){return io(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RI=/^https?/;async function DI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await NI(n);for(const t of e)try{if(OI(t))return}catch{}ci(n,"unauthorized-domain")}function OI(n){const e=sp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!RI.test(t))return!1;if(PI.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new mc(3e4,6e4);function v0(){const n=Si().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jI(n){return new Promise((e,t)=>{function i(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),t(Ti(n,"network-request-failed"))},timeout:MI.get()})}if(Si().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Si().gapi?.load)i();else{const o=Ik("iframefcb");return Si()[o]=()=>{gapi.load?i():t(Ti(n,"network-request-failed"))},Mw(`${kk()}?onload=${o}`).catch(a=>t(a))}}).catch(e=>{throw Qu=null,e})}let Qu=null;function LI(n){return Qu=Qu||jI(n),Qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new mc(5e3,15e3),FI="__/auth/iframe",UI="emulator/auth/iframe",zI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $I(n){const e=n.config;Ye(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Vp(e,UI):`https://${n.config.authDomain}/${FI}`,i={apiKey:e.apiKey,appName:n.name,v:Ba},o=BI.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${pc(i).slice(1)}`}async function HI(n){const e=await LI(n),t=Si().gapi;return Ye(t,n,"internal-error"),e.open({where:document.body,url:$I(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zI,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const d=Ti(n,"network-request-failed"),h=Si().setTimeout(()=>{a(d)},VI.get());function m(){Si().clearTimeout(h),o(i)}i.ping(m).then(m,()=>{a(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GI=500,KI=600,WI="_blank",QI="http://localhost";class w0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YI(n,e,t,i=GI,o=KI){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const m={...qI,width:i.toString(),height:o.toString(),top:a,left:d},v=Kn().toLowerCase();t&&(h=Cw(v)?WI:t),kw(v)&&(e=e||QI,m.scrollbars="yes");const x=Object.entries(m).reduce((C,[z,G])=>`${C}${z}=${G},`,"");if(yk(v)&&h!=="_self")return XI(e||"",h),new w0(null);const T=window.open(e||"",h,x);Ye(T,n,"popup-blocked");try{T.focus()}catch{}return new w0(T)}function XI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="__/auth/handler",ZI="emulator/auth/handler",e2=encodeURIComponent("fac");async function _0(n,e,t,i,o,a){Ye(n.config.authDomain,n,"auth-domain-config-required"),Ye(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ba,eventId:o};if(e instanceof Vw){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",LT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,T]of Object.entries({}))d[x]=T}if(e instanceof yc){const x=e.getScopes().filter(T=>T!=="");x.length>0&&(d.scopes=x.join(","))}n.tenantId&&(d.tid=n.tenantId);const h=d;for(const x of Object.keys(h))h[x]===void 0&&delete h[x];const m=await n._getAppCheckToken(),v=m?`#${e2}=${encodeURIComponent(m)}`:"";return`${t2(n)}?${pc(h).slice(1)}${v}`}function t2({config:n}){return n.emulator?Vp(n,ZI):`https://${n.authDomain}/${JI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="webStorageSupport";class n2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qw,this._completeRedirectFn=kI,this._overrideRedirectResult=EI}async _openPopup(e,t,i,o){is(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await _0(e,t,i,sp(),o);return YI(e,a,$p())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await _0(e,t,i,sp(),o);return sI(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(is(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await HI(e),i=new CI(e);return t.register("authEvent",o=>(Ye(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mf,{type:Mf},o=>{const a=o?.[0]?.[Mf];a!==void 0&&t(!!a),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=DI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Dw()||Iw()||Up()}}const r2=n2;var b0="@firebase/auth",x0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o2(n){Ra(new No("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=i.options;Ye(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:d,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ow(n)},v=new Ek(i,o,a,m);return Dk(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ra(new No("auth-internal",e=>{const t=jo(e.getProvider("auth").getImmediate());return(i=>new i2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gs(b0,x0,s2(n)),Gs(b0,x0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=5*60,l2=cw("authIdTokenMaxAge")||a2;let E0=null;const c2=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>l2)return;const o=t?.token;E0!==o&&(E0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function u2(n=mw()){const e=jp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Rk(n,{popupRedirectResolver:r2,persistence:[pI,nI,qw]}),i=cw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const d=c2(a.toString());Xk(t,d,()=>d(t.currentUser)),Yk(t,h=>d(h))}}const o=aw("auth");return o&&Ok(t,`http://${o}`),t}function d2(){return document.getElementsByTagName("head")?.[0]??document}Tk({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Ti("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",d2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o2("Browser");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ks,Jw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,k){function A(){}A.prototype=k.prototype,R.D=k.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(O,D,N){for(var P=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)P[Ae-2]=arguments[Ae];return k.prototype[D].apply(O,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,k,A){A||(A=0);var O=Array(16);if(typeof k=="string")for(var D=0;16>D;++D)O[D]=k.charCodeAt(A++)|k.charCodeAt(A++)<<8|k.charCodeAt(A++)<<16|k.charCodeAt(A++)<<24;else for(D=0;16>D;++D)O[D]=k[A++]|k[A++]<<8|k[A++]<<16|k[A++]<<24;k=R.g[0],A=R.g[1],D=R.g[2];var N=R.g[3],P=k+(N^A&(D^N))+O[0]+3614090360&4294967295;k=A+(P<<7&4294967295|P>>>25),P=N+(D^k&(A^D))+O[1]+3905402710&4294967295,N=k+(P<<12&4294967295|P>>>20),P=D+(A^N&(k^A))+O[2]+606105819&4294967295,D=N+(P<<17&4294967295|P>>>15),P=A+(k^D&(N^k))+O[3]+3250441966&4294967295,A=D+(P<<22&4294967295|P>>>10),P=k+(N^A&(D^N))+O[4]+4118548399&4294967295,k=A+(P<<7&4294967295|P>>>25),P=N+(D^k&(A^D))+O[5]+1200080426&4294967295,N=k+(P<<12&4294967295|P>>>20),P=D+(A^N&(k^A))+O[6]+2821735955&4294967295,D=N+(P<<17&4294967295|P>>>15),P=A+(k^D&(N^k))+O[7]+4249261313&4294967295,A=D+(P<<22&4294967295|P>>>10),P=k+(N^A&(D^N))+O[8]+1770035416&4294967295,k=A+(P<<7&4294967295|P>>>25),P=N+(D^k&(A^D))+O[9]+2336552879&4294967295,N=k+(P<<12&4294967295|P>>>20),P=D+(A^N&(k^A))+O[10]+4294925233&4294967295,D=N+(P<<17&4294967295|P>>>15),P=A+(k^D&(N^k))+O[11]+2304563134&4294967295,A=D+(P<<22&4294967295|P>>>10),P=k+(N^A&(D^N))+O[12]+1804603682&4294967295,k=A+(P<<7&4294967295|P>>>25),P=N+(D^k&(A^D))+O[13]+4254626195&4294967295,N=k+(P<<12&4294967295|P>>>20),P=D+(A^N&(k^A))+O[14]+2792965006&4294967295,D=N+(P<<17&4294967295|P>>>15),P=A+(k^D&(N^k))+O[15]+1236535329&4294967295,A=D+(P<<22&4294967295|P>>>10),P=k+(D^N&(A^D))+O[1]+4129170786&4294967295,k=A+(P<<5&4294967295|P>>>27),P=N+(A^D&(k^A))+O[6]+3225465664&4294967295,N=k+(P<<9&4294967295|P>>>23),P=D+(k^A&(N^k))+O[11]+643717713&4294967295,D=N+(P<<14&4294967295|P>>>18),P=A+(N^k&(D^N))+O[0]+3921069994&4294967295,A=D+(P<<20&4294967295|P>>>12),P=k+(D^N&(A^D))+O[5]+3593408605&4294967295,k=A+(P<<5&4294967295|P>>>27),P=N+(A^D&(k^A))+O[10]+38016083&4294967295,N=k+(P<<9&4294967295|P>>>23),P=D+(k^A&(N^k))+O[15]+3634488961&4294967295,D=N+(P<<14&4294967295|P>>>18),P=A+(N^k&(D^N))+O[4]+3889429448&4294967295,A=D+(P<<20&4294967295|P>>>12),P=k+(D^N&(A^D))+O[9]+568446438&4294967295,k=A+(P<<5&4294967295|P>>>27),P=N+(A^D&(k^A))+O[14]+3275163606&4294967295,N=k+(P<<9&4294967295|P>>>23),P=D+(k^A&(N^k))+O[3]+4107603335&4294967295,D=N+(P<<14&4294967295|P>>>18),P=A+(N^k&(D^N))+O[8]+1163531501&4294967295,A=D+(P<<20&4294967295|P>>>12),P=k+(D^N&(A^D))+O[13]+2850285829&4294967295,k=A+(P<<5&4294967295|P>>>27),P=N+(A^D&(k^A))+O[2]+4243563512&4294967295,N=k+(P<<9&4294967295|P>>>23),P=D+(k^A&(N^k))+O[7]+1735328473&4294967295,D=N+(P<<14&4294967295|P>>>18),P=A+(N^k&(D^N))+O[12]+2368359562&4294967295,A=D+(P<<20&4294967295|P>>>12),P=k+(A^D^N)+O[5]+4294588738&4294967295,k=A+(P<<4&4294967295|P>>>28),P=N+(k^A^D)+O[8]+2272392833&4294967295,N=k+(P<<11&4294967295|P>>>21),P=D+(N^k^A)+O[11]+1839030562&4294967295,D=N+(P<<16&4294967295|P>>>16),P=A+(D^N^k)+O[14]+4259657740&4294967295,A=D+(P<<23&4294967295|P>>>9),P=k+(A^D^N)+O[1]+2763975236&4294967295,k=A+(P<<4&4294967295|P>>>28),P=N+(k^A^D)+O[4]+1272893353&4294967295,N=k+(P<<11&4294967295|P>>>21),P=D+(N^k^A)+O[7]+4139469664&4294967295,D=N+(P<<16&4294967295|P>>>16),P=A+(D^N^k)+O[10]+3200236656&4294967295,A=D+(P<<23&4294967295|P>>>9),P=k+(A^D^N)+O[13]+681279174&4294967295,k=A+(P<<4&4294967295|P>>>28),P=N+(k^A^D)+O[0]+3936430074&4294967295,N=k+(P<<11&4294967295|P>>>21),P=D+(N^k^A)+O[3]+3572445317&4294967295,D=N+(P<<16&4294967295|P>>>16),P=A+(D^N^k)+O[6]+76029189&4294967295,A=D+(P<<23&4294967295|P>>>9),P=k+(A^D^N)+O[9]+3654602809&4294967295,k=A+(P<<4&4294967295|P>>>28),P=N+(k^A^D)+O[12]+3873151461&4294967295,N=k+(P<<11&4294967295|P>>>21),P=D+(N^k^A)+O[15]+530742520&4294967295,D=N+(P<<16&4294967295|P>>>16),P=A+(D^N^k)+O[2]+3299628645&4294967295,A=D+(P<<23&4294967295|P>>>9),P=k+(D^(A|~N))+O[0]+4096336452&4294967295,k=A+(P<<6&4294967295|P>>>26),P=N+(A^(k|~D))+O[7]+1126891415&4294967295,N=k+(P<<10&4294967295|P>>>22),P=D+(k^(N|~A))+O[14]+2878612391&4294967295,D=N+(P<<15&4294967295|P>>>17),P=A+(N^(D|~k))+O[5]+4237533241&4294967295,A=D+(P<<21&4294967295|P>>>11),P=k+(D^(A|~N))+O[12]+1700485571&4294967295,k=A+(P<<6&4294967295|P>>>26),P=N+(A^(k|~D))+O[3]+2399980690&4294967295,N=k+(P<<10&4294967295|P>>>22),P=D+(k^(N|~A))+O[10]+4293915773&4294967295,D=N+(P<<15&4294967295|P>>>17),P=A+(N^(D|~k))+O[1]+2240044497&4294967295,A=D+(P<<21&4294967295|P>>>11),P=k+(D^(A|~N))+O[8]+1873313359&4294967295,k=A+(P<<6&4294967295|P>>>26),P=N+(A^(k|~D))+O[15]+4264355552&4294967295,N=k+(P<<10&4294967295|P>>>22),P=D+(k^(N|~A))+O[6]+2734768916&4294967295,D=N+(P<<15&4294967295|P>>>17),P=A+(N^(D|~k))+O[13]+1309151649&4294967295,A=D+(P<<21&4294967295|P>>>11),P=k+(D^(A|~N))+O[4]+4149444226&4294967295,k=A+(P<<6&4294967295|P>>>26),P=N+(A^(k|~D))+O[11]+3174756917&4294967295,N=k+(P<<10&4294967295|P>>>22),P=D+(k^(N|~A))+O[2]+718787259&4294967295,D=N+(P<<15&4294967295|P>>>17),P=A+(N^(D|~k))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+k&4294967295,R.g[1]=R.g[1]+(D+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+N&4294967295}i.prototype.u=function(R,k){k===void 0&&(k=R.length);for(var A=k-this.blockSize,O=this.B,D=this.h,N=0;N<k;){if(D==0)for(;N<=A;)o(this,R,N),N+=this.blockSize;if(typeof R=="string"){for(;N<k;)if(O[D++]=R.charCodeAt(N++),D==this.blockSize){o(this,O),D=0;break}}else for(;N<k;)if(O[D++]=R[N++],D==this.blockSize){o(this,O),D=0;break}}this.h=D,this.o+=k},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var k=1;k<R.length-8;++k)R[k]=0;var A=8*this.o;for(k=R.length-8;k<R.length;++k)R[k]=A&255,A/=256;for(this.u(R),R=Array(16),k=A=0;4>k;++k)for(var O=0;32>O;O+=8)R[A++]=this.g[k]>>>O&255;return R};function a(R,k){var A=h;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=k(R)}function d(R,k){this.h=k;for(var A=[],O=!0,D=R.length-1;0<=D;D--){var N=R[D]|0;O&&N==k||(A[D]=N,O=!1)}this.g=A}var h={};function m(R){return-128<=R&&128>R?a(R,function(k){return new d([k|0],0>k?-1:0)}):new d([R|0],0>R?-1:0)}function v(R){if(isNaN(R)||!isFinite(R))return T;if(0>R)return B(v(-R));for(var k=[],A=1,O=0;R>=A;O++)k[O]=R/A|0,A*=4294967296;return new d(k,0)}function x(R,k){if(R.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(R.charAt(0)=="-")return B(x(R.substring(1),k));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(k,8)),O=T,D=0;D<R.length;D+=8){var N=Math.min(8,R.length-D),P=parseInt(R.substring(D,D+N),k);8>N?(N=v(Math.pow(k,N)),O=O.j(N).add(v(P))):(O=O.j(A),O=O.add(v(P)))}return O}var T=m(0),C=m(1),z=m(16777216);n=d.prototype,n.m=function(){if(K(this))return-B(this).m();for(var R=0,k=1,A=0;A<this.g.length;A++){var O=this.i(A);R+=(0<=O?O:4294967296+O)*k,k*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(G(this))return"0";if(K(this))return"-"+B(this).toString(R);for(var k=v(Math.pow(R,6)),A=this,O="";;){var D=we(A,k).g;A=ee(A,D.j(k));var N=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=D,G(A))return N+O;for(;6>N.length;)N="0"+N;O=N+O}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function G(R){if(R.h!=0)return!1;for(var k=0;k<R.g.length;k++)if(R.g[k]!=0)return!1;return!0}function K(R){return R.h==-1}n.l=function(R){return R=ee(this,R),K(R)?-1:G(R)?0:1};function B(R){for(var k=R.g.length,A=[],O=0;O<k;O++)A[O]=~R.g[O];return new d(A,~R.h).add(C)}n.abs=function(){return K(this)?B(this):this},n.add=function(R){for(var k=Math.max(this.g.length,R.g.length),A=[],O=0,D=0;D<=k;D++){var N=O+(this.i(D)&65535)+(R.i(D)&65535),P=(N>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);O=P>>>16,N&=65535,P&=65535,A[D]=P<<16|N}return new d(A,A[A.length-1]&-2147483648?-1:0)};function ee(R,k){return R.add(B(k))}n.j=function(R){if(G(this)||G(R))return T;if(K(this))return K(R)?B(this).j(B(R)):B(B(this).j(R));if(K(R))return B(this.j(B(R)));if(0>this.l(z)&&0>R.l(z))return v(this.m()*R.m());for(var k=this.g.length+R.g.length,A=[],O=0;O<2*k;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(var D=0;D<R.g.length;D++){var N=this.i(O)>>>16,P=this.i(O)&65535,Ae=R.i(D)>>>16,De=R.i(D)&65535;A[2*O+2*D]+=P*De,te(A,2*O+2*D),A[2*O+2*D+1]+=N*De,te(A,2*O+2*D+1),A[2*O+2*D+1]+=P*Ae,te(A,2*O+2*D+1),A[2*O+2*D+2]+=N*Ae,te(A,2*O+2*D+2)}for(O=0;O<k;O++)A[O]=A[2*O+1]<<16|A[2*O];for(O=k;O<2*k;O++)A[O]=0;return new d(A,0)};function te(R,k){for(;(R[k]&65535)!=R[k];)R[k+1]+=R[k]>>>16,R[k]&=65535,k++}function pe(R,k){this.g=R,this.h=k}function we(R,k){if(G(k))throw Error("division by zero");if(G(R))return new pe(T,T);if(K(R))return k=we(B(R),k),new pe(B(k.g),B(k.h));if(K(k))return k=we(R,B(k)),new pe(B(k.g),k.h);if(30<R.g.length){if(K(R)||K(k))throw Error("slowDivide_ only works with positive integers.");for(var A=C,O=k;0>=O.l(R);)A=re(A),O=re(O);var D=ie(A,1),N=ie(O,1);for(O=ie(O,2),A=ie(A,2);!G(O);){var P=N.add(O);0>=P.l(R)&&(D=D.add(A),N=P),O=ie(O,1),A=ie(A,1)}return k=ee(R,D.j(k)),new pe(D,k)}for(D=T;0<=R.l(k);){for(A=Math.max(1,Math.floor(R.m()/k.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),N=v(A),P=N.j(k);K(P)||0<P.l(R);)A-=O,N=v(A),P=N.j(k);G(N)&&(N=C),D=D.add(N),R=ee(R,P)}return new pe(D,R)}n.A=function(R){return we(this,R).h},n.and=function(R){for(var k=Math.max(this.g.length,R.g.length),A=[],O=0;O<k;O++)A[O]=this.i(O)&R.i(O);return new d(A,this.h&R.h)},n.or=function(R){for(var k=Math.max(this.g.length,R.g.length),A=[],O=0;O<k;O++)A[O]=this.i(O)|R.i(O);return new d(A,this.h|R.h)},n.xor=function(R){for(var k=Math.max(this.g.length,R.g.length),A=[],O=0;O<k;O++)A[O]=this.i(O)^R.i(O);return new d(A,this.h^R.h)};function re(R){for(var k=R.g.length+1,A=[],O=0;O<k;O++)A[O]=R.i(O)<<1|R.i(O-1)>>>31;return new d(A,R.h)}function ie(R,k){var A=k>>5;k%=32;for(var O=R.g.length-A,D=[],N=0;N<O;N++)D[N]=0<k?R.i(N+A)>>>k|R.i(N+A+1)<<32-k:R.i(N+A);return new d(D,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Jw=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=x,Ks=d}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var Du=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zw,Pl,e_,Yu,cp,t_,n_,r_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Du=="object"&&Du];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(c,g){if(g)e:{var _=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var W=c[I];if(!(W in _))break e;_=_[W]}c=c[c.length-1],I=_[c],g=g(I),g!=I&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,I=!1,W={next:function(){if(!I&&_<c.length){var ne=_++;return{value:g(ne,c[ne]),done:!1}}return I=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}o("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},h=this||self;function m(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function v(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function x(c,g,_){return c.call.apply(c.bind,arguments)}function T(c,g,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,I),c.apply(g,W)}}return function(){return c.apply(g,arguments)}}function C(c,g,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:T,C.apply(null,arguments)}function z(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function G(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,W,ne){for(var xe=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)xe[Et-2]=arguments[Et];return g.prototype[W].apply(I,xe)}}function K(c){const g=c.length;if(0<g){const _=Array(g);for(let I=0;I<g;I++)_[I]=c[I];return _}return[]}function B(c,g){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(m(I)){const W=c.length||0,ne=I.length||0;c.length=W+ne;for(let xe=0;xe<ne;xe++)c[W+xe]=I[xe]}else c.push(I)}}class ee{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function te(c){return/^[\s\xa0]*$/.test(c)}function pe(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function we(c){return we[" "](c),c}we[" "]=function(){};var re=pe().indexOf("Gecko")!=-1&&!(pe().toLowerCase().indexOf("webkit")!=-1&&pe().indexOf("Edge")==-1)&&!(pe().indexOf("Trident")!=-1||pe().indexOf("MSIE")!=-1)&&pe().indexOf("Edge")==-1;function ie(c,g,_){for(const I in c)g.call(_,c[I],I,c)}function R(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function k(c){const g={};for(const _ in c)g[_]=c[_];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,g){let _,I;for(let W=1;W<arguments.length;W++){I=arguments[W];for(_ in I)c[_]=I[_];for(let ne=0;ne<A.length;ne++)_=A[ne],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function D(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function N(c){h.setTimeout(()=>{throw c},0)}function P(){var c=Te;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ae{constructor(){this.h=this.g=null}add(g,_){const I=De.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var De=new ee(()=>new Be,c=>c.reset());class Be{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,ge=!1,Te=new Ae,_e=()=>{const c=h.Promise.resolve(void 0);qe=()=>{c.then(F)}};var F=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(_){N(_)}var g=De;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ge=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return c}();function Je(c,g){if(Ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(re){e:{try{we(g.nodeName);var W=!0;break e}catch{}W=!1}W||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:st[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Je.aa.h.call(this)}}G(Je,Ie);var st={2:"touch",3:"pen",4:"mouse"};Je.prototype.h=function(){Je.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),at=0;function bt(c,g,_,I,W){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=W,this.key=++at,this.da=this.fa=!1}function It(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ut(c){this.src=c,this.g={},this.h=0}Ut.prototype.add=function(c,g,_,I,W){var ne=c.toString();c=this.g[ne],c||(c=this.g[ne]=[],this.h++);var xe=Gt(c,g,I,W);return-1<xe?(g=c[xe],_||(g.fa=!1)):(g=new bt(g,this.src,ne,!!I,W),g.fa=_,c.push(g)),g};function Wn(c,g){var _=g.type;if(_ in c.g){var I=c.g[_],W=Array.prototype.indexOf.call(I,g,void 0),ne;(ne=0<=W)&&Array.prototype.splice.call(I,W,1),ne&&(It(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Gt(c,g,_,I){for(var W=0;W<c.length;++W){var ne=c[W];if(!ne.da&&ne.listener==g&&ne.capture==!!_&&ne.ha==I)return W}return-1}var pn="closure_lm_"+(1e6*Math.random()|0),zt={};function _r(c,g,_,I,W){if(Array.isArray(g)){for(var ne=0;ne<g.length;ne++)_r(c,g[ne],_,I,W);return null}return _=Pr(_),c&&c[tt]?c.K(g,_,v(I)?!!I.capture:!1,W):ir(c,g,_,!1,I,W)}function ir(c,g,_,I,W,ne){if(!g)throw Error("Invalid event type");var xe=v(W)?!!W.capture:!!W,Et=Bt(c);if(Et||(c[pn]=Et=new Ut(c)),_=Et.add(g,_,I,xe,ne),_.proxy)return _;if(I=sr(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)Qe||(W=xe),W===void 0&&(W=!1),c.addEventListener(g.toString(),I,W);else if(c.attachEvent)c.attachEvent(mn(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function sr(){function c(_){return g.call(c.src,c.listener,_)}const g=or;return c}function jn(c,g,_,I,W){if(Array.isArray(g))for(var ne=0;ne<g.length;ne++)jn(c,g[ne],_,I,W);else I=v(I)?!!I.capture:!!I,_=Pr(_),c&&c[tt]?(c=c.i,g=String(g).toString(),g in c.g&&(ne=c.g[g],_=Gt(ne,_,I,W),-1<_&&(It(ne[_]),Array.prototype.splice.call(ne,_,1),ne.length==0&&(delete c.g[g],c.h--)))):c&&(c=Bt(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Gt(g,_,I,W)),(_=-1<c?g[c]:null)&&tn(_))}function tn(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[tt])Wn(g.i,c);else{var _=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(_,I,c.capture):g.detachEvent?g.detachEvent(mn(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=Bt(g))?(Wn(_,c),_.h==0&&(_.src=null,g[pn]=null)):It(c)}}}function mn(c){return c in zt?zt[c]:zt[c]="on"+c}function or(c,g){if(c.da)c=!0;else{g=new Je(g,this);var _=c.listener,I=c.ha||c.src;c.fa&&tn(c),c=_.call(I,g)}return c}function Bt(c){return c=c[pn],c instanceof Ut?c:null}var Qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pr(c){return typeof c=="function"?c:(c[Qn]||(c[Qn]=function(g){return c.handleEvent(g)}),c[Qn])}function Ct(){se.call(this),this.i=new Ut(this),this.M=this,this.F=null}G(Ct,se),Ct.prototype[tt]=!0,Ct.prototype.removeEventListener=function(c,g,_,I){jn(this,c,g,_,I)};function Tt(c,g){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new Ie(g,c);else if(g instanceof Ie)g.target=g.target||c;else{var W=g;g=new Ie(I,c),O(g,W)}if(W=!0,_)for(var ne=_.length-1;0<=ne;ne--){var xe=g.g=_[ne];W=gn(xe,I,!0,g)&&W}if(xe=g.g=c,W=gn(xe,I,!0,g)&&W,W=gn(xe,I,!1,g)&&W,_)for(ne=0;ne<_.length;ne++)xe=g.g=_[ne],W=gn(xe,I,!1,g)&&W}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],I=0;I<_.length;I++)It(_[I]);delete c.g[g],c.h--}}this.F=null},Ct.prototype.K=function(c,g,_,I){return this.i.add(String(c),g,!1,_,I)},Ct.prototype.L=function(c,g,_,I){return this.i.add(String(c),g,!0,_,I)};function gn(c,g,_,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var W=!0,ne=0;ne<g.length;++ne){var xe=g[ne];if(xe&&!xe.da&&xe.capture==_){var Et=xe.listener,ln=xe.ha||xe.src;xe.fa&&Wn(c.i,xe),W=Et.call(ln,I)!==!1&&W}}return W&&!I.defaultPrevented}function br(c,g,_){if(typeof c=="function")_&&(c=C(c,_));else if(c&&typeof c.handleEvent=="function")c=C(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function Ln(c){c.g=br(()=>{c.g=null,c.i&&(c.i=!1,Ln(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class ar extends se{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ln(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tn(c){se.call(this),this.h=c,this.g={}}G(Tn,se);var Rr=[];function Sn(c){ie(c.g,function(g,_){this.g.hasOwnProperty(_)&&tn(g)},c),c.g={}}Tn.prototype.N=function(){Tn.aa.N.call(this),Sn(this)},Tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lr=h.JSON.stringify,kn=h.JSON.parse,xr=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function In(){}In.prototype.h=null;function pt(c){return c.h||(c.h=c.i())}function q(){}var X={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function me(){Ie.call(this,"d")}G(me,Ie);function Se(){Ie.call(this,"c")}G(Se,Ie);var ke={},Ue=null;function Oe(){return Ue=Ue||new Ct}ke.La="serverreachability";function wt(c){Ie.call(this,ke.La,c)}G(wt,Ie);function St(c){const g=Oe();Tt(g,new wt(g))}ke.STAT_EVENT="statevent";function Cn(c,g){Ie.call(this,ke.STAT_EVENT,c),this.stat=g}G(Cn,Ie);function kt(c){const g=Oe();Tt(g,new Cn(g,c))}ke.Ma="timingevent";function cr(c,g){Ie.call(this,ke.Ma,c),this.size=g}G(cr,Ie);function lt(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function Yt(){this.g=!0}Yt.prototype.xa=function(){this.g=!1};function yn(c,g,_,I,W,ne){c.info(function(){if(c.g)if(ne)for(var xe="",Et=ne.split("&"),ln=0;ln<Et.length;ln++){var gt=Et[ln].split("=");if(1<gt.length){var vn=gt[0];gt=gt[1];var Xt=vn.split("_");xe=2<=Xt.length&&Xt[1]=="type"?xe+(vn+"="+gt+"&"):xe+(vn+"=redacted&")}}else xe=null;else xe=ne;return"XMLHTTP REQ ("+I+") [attempt "+W+"]: "+g+`
`+_+`
`+xe})}function di(c,g,_,I,W,ne,xe){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+W+"]: "+g+`
`+_+`
`+ne+" "+xe})}function Yn(c,g,_,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+so(c,_)+(I?" "+I:"")})}function Oi(c,g){c.info(function(){return"TIMEOUT: "+g})}Yt.prototype.info=function(){};function so(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var W=I[1];if(Array.isArray(W)&&!(1>W.length)){var ne=W[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var xe=1;xe<W.length;xe++)W[xe]=""}}}}return lr(_)}catch{return g}}var Er={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nn;function Wr(){}G(Wr,In),Wr.prototype.g=function(){return new XMLHttpRequest},Wr.prototype.i=function(){return{}},nn=new Wr;function Xn(c,g,_,I){this.j=c,this.i=g,this.l=_,this.R=I||1,this.U=new Tn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cs}function cs(){this.i=null,this.g="",this.h=!1}var Mi={},fi={};function pi(c,g,_){c.L=1,c.v=$e(le(g)),c.m=_,c.P=!0,ji(c,null)}function ji(c,g){c.F=Date.now(),mt(c),c.A=le(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),ms(_.i,"t",I),c.C=0,_=c.j.J,c.h=new cs,c.g=Dc(c.j,_?g:null,!c.m),0<c.O&&(c.M=new ar(C(c.Y,c,c.g),c.O)),g=c.U,_=c.g,I=c.ca;var W="readystatechange";Array.isArray(W)||(W&&(Rr[0]=W.toString()),W=Rr);for(var ne=0;ne<W.length;ne++){var xe=_r(_,W[ne],I||g.handleEvent,!1,g.h||g);if(!xe)break;g.g[xe.key]=xe}g=c.H?k(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),St(),yn(c.i,c.u,c.A,c.l,c.R,c.m)}Xn.prototype.ca=function(c){c=c.target;const g=this.M;g&&hr(c)==3?g.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{const Xt=hr(this.g);var g=this.g.Ba();const Vr=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||Xa(this.g)))){this.J||Xt!=4||g==7||(g==8||0>=Vr?St(3):St(2)),Vn(this);var _=this.g.Z();this.X=_;t:if(us(this)){var I=Xa(this.g);c="";var W=I.length,ne=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rn(this),Dr(this);var xe="";break t}this.h.i=new h.TextDecoder}for(g=0;g<W;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!(ne&&g==W-1)});I.length=0,this.h.g+=c,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=_==200,di(this.i,this.u,this.A,this.l,this.R,Xt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,ln=this.g;if((Et=ln.g?ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Et)){var gt=Et;break t}}gt=null}if(_=gt)Yn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Or(this,_);else{this.o=!1,this.s=3,kt(12),rn(this),Dr(this);break e}}if(this.P){_=!0;let Sr;for(;!this.J&&this.C<xe.length;)if(Sr=ds(this,xe),Sr==fi){Xt==4&&(this.s=4,kt(14),_=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Sr==Mi){this.s=4,kt(15),Yn(this.i,this.l,xe,"[Invalid Chunk]"),_=!1;break}else Yn(this.i,this.l,Sr,null),Or(this,Sr);if(us(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||xe.length!=0||this.h.h||(this.s=1,kt(16),_=!1),this.o=this.o&&_,!_)Yn(this.i,this.l,xe,"[Invalid Chunked Response]"),rn(this),Dr(this);else if(0<xe.length&&!this.W){this.W=!0;var vn=this.j;vn.g==this&&vn.ba&&!vn.M&&(vn.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),Za(vn),vn.M=!0,kt(11))}}else Yn(this.i,this.l,xe,null),Or(this,xe);Xt==4&&rn(this),this.o&&!this.J&&(Xt==4?Yo(this.j,this):(this.o=!1,mt(this)))}else qo(this.g),_==400&&0<xe.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),rn(this),Dr(this)}}}catch{}finally{}};function us(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ds(c,g){var _=c.C,I=g.indexOf(`
`,_);return I==-1?fi:(_=Number(g.substring(_,I)),isNaN(_)?Mi:(I+=1,I+_>g.length?fi:(g=g.slice(I,I+_),c.C=I+_,g)))}Xn.prototype.cancel=function(){this.J=!0,rn(this)};function mt(c){c.S=Date.now()+c.I,Li(c,c.I)}function Li(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=lt(C(c.ba,c),g)}function Vn(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Xn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Oi(this.i,this.A),this.L!=2&&(St(),kt(17)),rn(this),this.s=2,Dr(this)):Li(this,this.S-c)};function Dr(c){c.j.G==0||c.J||Yo(c.j,c)}function rn(c){Vn(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Sn(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Or(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||$t(_.h,c))){if(!c.K&&$t(_.h,c)&&_.G==3){try{var I=_.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var W=I;if(W[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Qo(_),Zr(_);else break e;Wo(_),kt(18)}}else _.za=W[1],0<_.za-_.T&&37500>W[2]&&_.F&&_.v==0&&!_.C&&(_.C=lt(C(_.Za,_),6e3));if(1>=fs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else zi(_,11)}else if((c.K||_.g==c)&&Qo(_),!te(g))for(W=_.Da.g.parse(g),g=0;g<W.length;g++){let gt=W[g];if(_.T=gt[0],gt=gt[1],_.G==2)if(gt[0]=="c"){_.K=gt[1],_.ia=gt[2];const vn=gt[3];vn!=null&&(_.la=vn,_.j.info("VER="+_.la));const Xt=gt[4];Xt!=null&&(_.Aa=Xt,_.j.info("SVER="+_.Aa));const Vr=gt[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(I=1.5*Vr,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const Sr=c.g;if(Sr){const co=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var ne=I.h;ne.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(w(ne,ne.h),ne.h=null))}if(I.D){const Jo=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(I.ya=Jo,Pe(I.I,I.D,Jo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var xe=c;if(I.qa=Rc(I,I.J?I.ia:null,I.W),xe.K){S(I.h,xe);var Et=xe,ln=I.L;ln&&(Et.I=ln),Et.B&&(Vn(Et),mt(Et)),I.g=xe}else lo(I);0<_.i.length&&yi(_)}else gt[0]!="stop"&&gt[0]!="close"||zi(_,7);else _.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?zi(_,7):An(_):gt[0]!="noop"&&_.l&&_.l.ta(gt),_.v=0)}}St(4)}catch{}}var hs=class{constructor(c,g){this.g=c,this.map=g}};function Qr(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function fs(c){return c.h?1:c.g?c.g.size:0}function $t(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function w(c,g){c.g?c.g.add(g):c.h=g}function S(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Qr.prototype.cancel=function(){if(this.i=b(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function b(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return K(c.i)}function M(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(m(c)){for(var g=[],_=c.length,I=0;I<_;I++)g.push(c[I]);return g}g=[],_=0;for(I in c)g[_++]=c[I];return g}function V(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(m(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const I in c)g[_++]=I;return g}}}function L(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(m(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=V(c),I=M(c),W=I.length,ne=0;ne<W;ne++)g.call(void 0,I[ne],_&&_[ne],c)}var J=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oe(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),W=null;if(0<=I){var ne=c[_].substring(0,I);W=c[_].substring(I+1)}else ne=c[_];g(ne,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function ae(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ae){this.h=c.h,ce(this,c.j),this.o=c.o,this.g=c.g,Ee(this,c.s),this.l=c.l;var g=c.i,_=new jr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Me(this,_),this.m=c.m}else c&&(g=String(c).match(J))?(this.h=!1,ce(this,g[1]||"",!0),this.o=Le(g[2]||""),this.g=Le(g[3]||"",!0),Ee(this,g[4]),this.l=Le(g[5]||"",!0),Me(this,g[6]||"",!0),this.m=Le(g[7]||"")):(this.h=!1,this.i=new jr(null,this.h))}ae.prototype.toString=function(){var c=[],g=this.j;g&&c.push(rt(g,on,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(rt(g,on,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(rt(_,_.charAt(0)=="/"?Mr:Kt,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",rt(_,Bo)),c.join("")};function le(c){return new ae(c)}function ce(c,g,_){c.j=_?Le(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ee(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Me(c,g,_){g instanceof jr?(c.i=g,mi(c.i,c.h)):(_||(g=rt(g,ps)),c.i=new jr(g,c.h))}function Pe(c,g,_){c.i.set(g,_)}function $e(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Le(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function rt(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Ht),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ht(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var on=/[#\/\?@]/g,Kt=/[#\?:]/g,Mr=/[#\?]/g,ps=/[#\?@]/g,Bo=/#/g;function jr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function an(c){c.g||(c.g=new Map,c.h=0,c.i&&oe(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=jr.prototype,n.add=function(c,g){an(this),this.i=null,c=Lr(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function ur(c,g){an(c),g=Lr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Yr(c,g){return an(c),g=Lr(c,g),c.g.has(g)}n.forEach=function(c,g){an(this),this.g.forEach(function(_,I){_.forEach(function(W){c.call(g,W,I,this)},this)},this)},n.na=function(){an(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let I=0;I<g.length;I++){const W=c[I];for(let ne=0;ne<W.length;ne++)_.push(g[I])}return _},n.V=function(c){an(this);let g=[];if(typeof c=="string")Yr(this,c)&&(g=g.concat(this.g.get(Lr(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},n.set=function(c,g){return an(this),this.i=null,c=Lr(this,c),Yr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ms(c,g,_){ur(c,g),0<_.length&&(c.i=null,c.g.set(Lr(c,g),K(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var I=g[_];const ne=encodeURIComponent(String(I)),xe=this.V(I);for(I=0;I<xe.length;I++){var W=ne;xe[I]!==""&&(W+="="+encodeURIComponent(String(xe[I]))),c.push(W)}}return this.i=c.join("&")};function Lr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function mi(c,g){g&&!c.j&&(an(c),c.i=null,c.g.forEach(function(_,I){var W=I.toLowerCase();I!=W&&(ur(this,I),ms(this,W,_))},c)),c.j=g}function Jd(c,g){const _=new Yt;if(h.Image){const I=new Image;I.onload=z(dr,_,"TestLoadImage: loaded",!0,g,I),I.onerror=z(dr,_,"TestLoadImage: error",!1,g,I),I.onabort=z(dr,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=z(dr,_,"TestLoadImage: timeout",!1,g,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function kc(c,g){const _=new Yt,I=new AbortController,W=setTimeout(()=>{I.abort(),dr(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(ne=>{clearTimeout(W),ne.ok?dr(_,"TestPingServer: ok",!0,g):dr(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(W),dr(_,"TestPingServer: error",!1,g)})}function dr(c,g,_,I,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),I(_)}catch{}}function Zd(){this.g=new xr}function Ic(c,g,_){const I=_||"";try{L(c,function(W,ne){let xe=W;v(W)&&(xe=lr(W)),g.push(I+ne+"="+encodeURIComponent(xe))})}catch(W){throw g.push(I+"type="+encodeURIComponent("_badmap")),W}}function Vi(c){this.l=c.Ub||null,this.j=c.eb||!1}G(Vi,In),Vi.prototype.g=function(){return new oo(this.l,this.j)},Vi.prototype.i=function(c){return function(){return c}}({});function oo(c,g){Ct.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(oo,Ct),n=oo.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Jr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Xr(this):Jr(this),this.readyState==3&&Cc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Xr(this))},n.Qa=function(c){this.g&&(this.response=c,Xr(this))},n.ga=function(){this.g&&Xr(this)};function Xr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Jr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Jr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fi(c){let g="";return ie(c,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function gs(c,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Fi(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Pe(c,g,_))}function Ot(c){Ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(Ot,Ct);var eh=/^https?$/i,Qa=["POST","PUT"];n=Ot.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nn.g(),this.v=this.o?pt(this.o):pt(nn),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(ne){ao(this,ne);return}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var W in I)_.set(W,I[W]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ne of I.keys())_.set(ne,I.get(ne));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(ne=>ne.toLowerCase()=="content-type"),W=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Qa,g,void 0))||I||W||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,xe]of _)this.g.setRequestHeader(ne,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ho(this),this.u=!0,this.g.send(c),this.u=!1}catch(ne){ao(this,ne)}};function ao(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,$o(c),Tr(c)}function $o(c){c.A||(c.A=!0,Tt(c,"complete"),Tt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Tt(this,"complete"),Tt(this,"abort"),Tr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),Ot.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ya(this):this.bb())},n.bb=function(){Ya(this)};function Ya(c){if(c.h&&typeof d<"u"&&(!c.v[1]||hr(c)!=4||c.Z()!=2)){if(c.u&&hr(c)==4)br(c.Ea,0,c);else if(Tt(c,"readystatechange"),hr(c)==4){c.h=!1;try{const xe=c.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=xe===0){var W=String(c.D).match(J)[1]||null;!W&&h.self&&h.self.location&&(W=h.self.location.protocol.slice(0,-1)),I=!eh.test(W?W.toLowerCase():"")}_=I}if(_)Tt(c,"complete"),Tt(c,"success");else{c.m=6;try{var ne=2<hr(c)?c.g.statusText:""}catch{ne=""}c.l=ne+" ["+c.Z()+"]",$o(c)}}finally{Tr(c)}}}}function Tr(c,g){if(c.g){Ho(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Tt(c,"ready");try{_.onreadystatechange=I}catch{}}}function Ho(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function hr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),kn(g)}};function Xa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qo(c){const g={};c=(c.g&&2<=hr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(te(c[I]))continue;var _=D(c[I]);const W=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ne=g[W]||[];g[W]=ne,ne.push(_)}R(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gi(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function Ja(c){this.Aa=0,this.i=[],this.j=new Yt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gi("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gi("baseRetryDelayMs",5e3,c),this.cb=gi("retryDelaySeedMs",1e4,c),this.Wa=gi("forwardChannelMaxRetries",2,c),this.wa=gi("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(c&&c.concurrentRequestLimit),this.Da=new Zd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ja.prototype,n.la=8,n.G=1,n.connect=function(c,g,_,I){kt(0),this.W=c,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=Rc(this,null,this.W),yi(this)};function An(c){if(Go(c),c.G==3){var g=c.U++,_=le(c.I);if(Pe(_,"SID",c.K),Pe(_,"RID",g),Pe(_,"TYPE","terminate"),Ui(c,_),g=new Xn(c,c.j,g),g.L=2,g.v=$e(le(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.v,_=!0),_||(g.g=Dc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),mt(g)}Pc(c)}function Zr(c){c.g&&(Za(c),c.g.cancel(),c.g=null)}function Go(c){Zr(c),c.u&&(h.clearTimeout(c.u),c.u=null),Qo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function yi(c){if(!sn(c.h)&&!c.s){c.s=!0;var g=c.Ga;qe||_e(),ge||(qe(),ge=!0),Te.add(g,c),c.B=0}}function th(c,g){return fs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=lt(C(c.Ga,c,g),Nc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const W=new Xn(this,this.j,c);let ne=this.o;if(this.S&&(ne?(ne=k(ne),O(ne,this.S)):ne=this.S),this.m!==null||this.O||(W.H=ne,ne=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ys(this,W,g),_=le(this.I),Pe(_,"RID",c),Pe(_,"CVER",22),this.D&&Pe(_,"X-HTTP-Session-Id",this.D),Ui(this,_),ne&&(this.O?g="headers="+encodeURIComponent(String(Fi(ne)))+"&"+g:this.m&&gs(_,this.m,ne)),w(this.h,W),this.Ua&&Pe(_,"TYPE","init"),this.P?(Pe(_,"$req",g),Pe(_,"SID","null"),W.T=!0,pi(W,_,null)):pi(W,_,g),this.G=2}}else this.G==3&&(c?Ko(this,c):this.i.length==0||sn(this.h)||Ko(this))};function Ko(c,g){var _;g?_=g.l:_=c.U++;const I=le(c.I);Pe(I,"SID",c.K),Pe(I,"RID",_),Pe(I,"AID",c.T),Ui(c,I),c.m&&c.o&&gs(I,c.m,c.o),_=new Xn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=ys(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),w(c.h,_),pi(_,I,g)}function Ui(c,g){c.H&&ie(c.H,function(_,I){Pe(g,I,_)}),c.l&&L({},function(_,I){Pe(g,I,_)})}function ys(c,g,_){_=Math.min(c.i.length,_);var I=c.l?C(c.l.Na,c.l,c):null;e:{var W=c.i;let ne=-1;for(;;){const xe=["count="+_];ne==-1?0<_?(ne=W[0].g,xe.push("ofs="+ne)):ne=0:xe.push("ofs="+ne);let Et=!0;for(let ln=0;ln<_;ln++){let gt=W[ln].g;const vn=W[ln].map;if(gt-=ne,0>gt)ne=Math.max(0,W[ln].g-100),Et=!1;else try{Ic(vn,xe,"req"+gt+"_")}catch{I&&I(vn)}}if(Et){I=xe.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,I}function lo(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;qe||_e(),ge||(qe(),ge=!0),Te.add(g,c),c.v=0}}function Wo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=lt(C(c.Fa,c),Nc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Ac(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=lt(C(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Zr(this),Ac(this))};function Za(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function Ac(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=le(c.qa);Pe(g,"RID","rpc"),Pe(g,"SID",c.K),Pe(g,"AID",c.T),Pe(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(g,"TO",c.ja),Pe(g,"TYPE","xmlhttp"),Ui(c,g),c.m&&c.o&&gs(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=$e(le(g)),_.m=null,_.P=!0,ji(_,c)}n.Za=function(){this.C!=null&&(this.C=null,Zr(this),Wo(this),kt(19))};function Qo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Yo(c,g){var _=null;if(c.g==g){Qo(c),Za(c),c.g=null;var I=2}else if($t(c.h,g))_=g.D,S(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var W=c.B;I=Oe(),Tt(I,new cr(I,_)),yi(c)}else lo(c);else if(W=g.s,W==3||W==0&&0<g.X||!(I==1&&th(c,g)||I==2&&Wo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),W){case 1:zi(c,5);break;case 4:zi(c,10);break;case 3:zi(c,6);break;default:zi(c,2)}}}function Nc(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function zi(c,g){if(c.j.info("Error code "+g),g==2){var _=C(c.fb,c),I=c.Xa;const W=!I;I=new ae(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ce(I,"https"),$e(I),W?Jd(I.toString(),_):kc(I.toString(),_)}else kt(2);c.G=0,c.l&&c.l.sa(g),Pc(c),Go(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Pc(c){if(c.G=0,c.ka=[],c.l){const g=b(c.h);(g.length!=0||c.i.length!=0)&&(B(c.ka,g),B(c.ka,c.i),c.h.i.length=0,K(c.i),c.i.length=0),c.l.ra()}}function Rc(c,g,_){var I=_ instanceof ae?le(_):new ae(_);if(I.g!="")g&&(I.g=g+"."+I.g),Ee(I,I.s);else{var W=h.location;I=W.protocol,g=g?g+"."+W.hostname:W.hostname,W=+W.port;var ne=new ae(null);I&&ce(ne,I),g&&(ne.g=g),W&&Ee(ne,W),_&&(ne.l=_),I=ne}return _=c.D,g=c.ya,_&&g&&Pe(I,_,g),Pe(I,"VER",c.la),Ui(c,I),I}function Dc(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ot(new Vi({eb:_})):new Ot(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function el(){}n=el.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xo(){}Xo.prototype.g=function(c,g){return new Jn(c,g)};function Jn(c,g){Ct.call(this),this.g=new Ja(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!te(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!te(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new vi(this)}G(Jn,Ct),Jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){An(this.g)},Jn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=lr(c),c=_);g.i.push(new hs(g.Ya++,c)),g.G==3&&yi(g)},Jn.prototype.N=function(){this.g.l=null,delete this.j,An(this.g),delete this.g,Jn.aa.N.call(this)};function Oc(c){me.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}G(Oc,me);function Mc(){Se.call(this),this.status=1}G(Mc,Se);function vi(c){this.g=c}G(vi,el),vi.prototype.ua=function(){Tt(this.g,"a")},vi.prototype.ta=function(c){Tt(this.g,new Oc(c))},vi.prototype.sa=function(c){Tt(this.g,new Mc)},vi.prototype.ra=function(){Tt(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,r_=function(){return new Xo},n_=function(){return Oe()},t_=ke,cp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Er.NO_ERROR=0,Er.TIMEOUT=8,Er.HTTP_ERROR=6,Yu=Er,hi.COMPLETE="complete",e_=hi,q.EventType=X,X.OPEN="a",X.CLOSE="b",X.ERROR="c",X.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,Pl=q,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,Zw=Ot}).apply(typeof Du<"u"?Du:typeof self<"u"?self:typeof window<"u"?window:{});const S0="@firebase/firestore",k0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Op("@firebase/firestore");function wa(){return Do.logLevel}function Re(n,...e){if(Do.logLevel<=dt.DEBUG){const t=e.map(qp);Do.debug(`Firestore (${Ha}): ${n}`,...t)}}function ss(n,...e){if(Do.logLevel<=dt.ERROR){const t=e.map(qp);Do.error(`Firestore (${Ha}): ${n}`,...t)}}function Da(n,...e){if(Do.logLevel<=dt.WARN){const t=e.map(qp);Do.warn(`Firestore (${Ha}): ${n}`,...t)}}function qp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,i_(n,i,t)}function i_(n,e,t){let i=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ss(i),new Error(i)}function xt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||i_(e,o,i)}function nt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qn.UNAUTHENTICATED))}shutdown(){}}class f2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class p2{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xt(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let a=new Ws;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ws,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const m=a;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},h=m=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ws)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xt(typeof i.accessToken=="string",31837,{l:i}),new s_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new qn(e)}}class m2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class g2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new m2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(qn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xt(this.o===void 0,3512);const i=a=>{a.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const d=a.token!==this.m;return this.m=a.token,Re("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const o=a=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new I0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new I0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=v2(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function ht(n,e){return n<e?-1:n>e?1:0}function up(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return jf(o)===jf(a)?ht(o,a):jf(o)?1:-1}return ht(n.length,e.length)}const w2=55296,_2=57343;function jf(n){const e=n.charCodeAt(0);return e>=w2&&e<=_2}function Oa(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="__name__";class Ei{constructor(e,t,i){t===void 0?t=0:t>e.length&&Xe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Xe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ei.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ei?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Ei.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return ht(e.length,t.length)}static compareSegments(e,t){const i=Ei.isNumericId(e),o=Ei.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ei.extractNumericId(e).compare(Ei.extractNumericId(t)):up(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ks.fromString(e.substring(4,e.length-2))}}class Vt extends Ei{construct(e,t,i){return new Vt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new He(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Vt(t)}static emptyPath(){return new Vt([])}}const b2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends Ei{construct(e,t,i){return new Dn(e,t,i)}static isValidIdentifier(e){return b2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C0}static keyField(){return new Dn([C0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new He(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new He(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new He(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else h==="`"?(d=!d,o++):h!=="."||d?(i+=h,o++):(a(),o++)}if(a(),d)throw new He(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(t)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.path=e}static fromPath(e){return new We(Vt.fromString(e))}static fromName(e){return new We(Vt.fromString(e).popFirst(5))}static empty(){return new We(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(n,e,t){if(!t)throw new He(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function E2(n,e,t,i){if(e===!0&&i===!0)throw new He(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function A0(n){if(!We.isDocumentKey(n))throw new He(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function o_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Kp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xe(12329,{type:typeof n})}function Ma(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kp(n);throw new He(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n,e){const t={typeString:n};return e&&(t.value=e),t}function wc(n,e){if(!o_(n))throw new He(fe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const d=n[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&d!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new He(fe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=-62135596800,P0=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*P0);return new Dt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<N0)throw new He(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P0}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wc(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-N0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:en("string",Dt._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new Dt(0,0))}static max(){return new et(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=-1;function T2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=et.fromTimestamp(i===1e9?new Dt(t+1,0):new Dt(t,i));return new Ys(o,We.empty(),e)}function S2(n){return new Ys(n.readTime,n.key,rc)}class Ys{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ys(et.min(),We.empty(),rc)}static max(){return new Ys(et.max(),We.empty(),rc)}}function k2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=We.comparator(n.documentKey,e.documentKey),t!==0?t:ht(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==I2)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,i)=>{t(e)})}static reject(e){return new ue((t,i)=>{i(e)})}static waitFor(e){return new ue((t,i)=>{let o=0,a=0,d=!1;e.forEach(h=>{++o,h.next(()=>{++a,d&&a===o&&t()},m=>i(m))}),d=!0,a===o&&t()})}static or(e){let t=ue.resolve(!1);for(const i of e)t=t.next(o=>o?ue.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,a)=>{i.push(t.call(this,o,a))}),this.waitFor(i)}static mapArray(e,t){return new ue((i,o)=>{const a=e.length,d=new Array(a);let h=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(x=>{d[v]=x,++h,h===a&&i(d)},x=>o(x))}})}static doWhile(e,t){return new ue((i,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):i()};a()})}}function A2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ga(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ld.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=-1;function Vd(n){return n==null}function hd(n){return n===0&&1/n==-1/0}function N2(n){return typeof n=="number"&&Number.isInteger(n)&&!hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="";function P2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=R0(e)),e=R2(n.get(t),e);return R0(e)}function R2(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case a_:t+="";break;default:t+=a}}return t}function R0(n){return n+a_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function l_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t){this.comparator=e,this.root=t||Rn.EMPTY}insert(e,t){return new Ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new Ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ou(this.root,e,this.comparator,!0)}}class Ou{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Rn.RED,this.left=o??Rn.EMPTY,this.right=a??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Rn(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Rn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xe(27949);return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe(57766)}get value(){throw Xe(16141)}get color(){throw Xe(16727)}get left(){throw Xe(29726)}get right(){throw Xe(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O0(this.data.getIterator())}getIteratorFrom(e){return new O0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fn(this.comparator);return t.data=e,t}}class O0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new li([])}unionWith(e){let t=new fn(Dn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new li(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new c_("Invalid base64 string: "+a):a}}(e);return new Mn(t)}static fromUint8Array(e){const t=function(o){let a="";for(let d=0;d<o.length;++d)a+=String.fromCharCode(o[d]);return a}(e);return new Mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const D2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(n){if(xt(!!n,39018),typeof n=="string"){let e=0;const t=D2.exec(n);if(xt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qt(n.seconds),nanos:Qt(n.nanos)}}function Qt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Js(n){return typeof n=="string"?Mn.fromBase64String(n):Mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="server_timestamp",d_="__type__",h_="__previous_value__",f_="__local_write_time__";function Qp(n){return(n?.mapValue?.fields||{})[d_]?.stringValue===u_}function Fd(n){const e=n.mapValue.fields[h_];return Qp(e)?Fd(e):e}function ic(n){const e=Xs(n.mapValue.fields[f_].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t,i,o,a,d,h,m,v,x){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=d,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=x}}const fd="(default)";class sc{constructor(e,t){this.projectId=e,this.database=t||fd}static empty(){return new sc("","")}get isDefaultDatabase(){return this.database===fd}isEqual(e){return e instanceof sc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="__type__",M2="__max__",Mu={mapValue:{}},m_="__vector__",pd="value";function Zs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qp(n)?4:L2(n)?9007199254740991:j2(n)?10:11:Xe(28295,{value:n})}function Pi(n,e){if(n===e)return!0;const t=Zs(n);if(t!==Zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ic(n).isEqual(ic(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const d=Xs(o.timestampValue),h=Xs(a.timestampValue);return d.seconds===h.seconds&&d.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Js(o.bytesValue).isEqual(Js(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return Qt(o.geoPointValue.latitude)===Qt(a.geoPointValue.latitude)&&Qt(o.geoPointValue.longitude)===Qt(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return Qt(o.integerValue)===Qt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const d=Qt(o.doubleValue),h=Qt(a.doubleValue);return d===h?hd(d)===hd(h):isNaN(d)&&isNaN(h)}return!1}(n,e);case 9:return Oa(n.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return function(o,a){const d=o.mapValue.fields||{},h=a.mapValue.fields||{};if(D0(d)!==D0(h))return!1;for(const m in d)if(d.hasOwnProperty(m)&&(h[m]===void 0||!Pi(d[m],h[m])))return!1;return!0}(n,e);default:return Xe(52216,{left:n})}}function oc(n,e){return(n.values||[]).find(t=>Pi(t,e))!==void 0}function ja(n,e){if(n===e)return 0;const t=Zs(n),i=Zs(e);if(t!==i)return ht(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ht(n.booleanValue,e.booleanValue);case 2:return function(a,d){const h=Qt(a.integerValue||a.doubleValue),m=Qt(d.integerValue||d.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return M0(n.timestampValue,e.timestampValue);case 4:return M0(ic(n),ic(e));case 5:return up(n.stringValue,e.stringValue);case 6:return function(a,d){const h=Js(a),m=Js(d);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(a,d){const h=a.split("/"),m=d.split("/");for(let v=0;v<h.length&&v<m.length;v++){const x=ht(h[v],m[v]);if(x!==0)return x}return ht(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,d){const h=ht(Qt(a.latitude),Qt(d.latitude));return h!==0?h:ht(Qt(a.longitude),Qt(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return j0(n.arrayValue,e.arrayValue);case 10:return function(a,d){const h=a.fields||{},m=d.fields||{},v=h[pd]?.arrayValue,x=m[pd]?.arrayValue,T=ht(v?.values?.length||0,x?.values?.length||0);return T!==0?T:j0(v,x)}(n.mapValue,e.mapValue);case 11:return function(a,d){if(a===Mu.mapValue&&d===Mu.mapValue)return 0;if(a===Mu.mapValue)return 1;if(d===Mu.mapValue)return-1;const h=a.fields||{},m=Object.keys(h),v=d.fields||{},x=Object.keys(v);m.sort(),x.sort();for(let T=0;T<m.length&&T<x.length;++T){const C=up(m[T],x[T]);if(C!==0)return C;const z=ja(h[m[T]],v[x[T]]);if(z!==0)return z}return ht(m.length,x.length)}(n.mapValue,e.mapValue);default:throw Xe(23264,{he:t})}}function M0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ht(n,e);const t=Xs(n),i=Xs(e),o=ht(t.seconds,i.seconds);return o!==0?o:ht(t.nanos,i.nanos)}function j0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=ja(t[o],i[o]);if(a)return a}return ht(t.length,i.length)}function La(n){return dp(n)}function dp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Xs(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Js(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return We.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=dp(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const d of i)a?a=!1:o+=",",o+=`${d}:${dp(t.fields[d])}`;return o+"}"}(n.mapValue):Xe(61005,{value:n})}function Xu(n){switch(Zs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fd(n);return e?16+Xu(e):16;case 5:return 2*n.stringValue.length;case 6:return Js(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,a)=>o+Xu(a),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Lo(i.fields,(a,d)=>{o+=a.length+Xu(d)}),o}(n.mapValue);default:throw Xe(13486,{value:n})}}function hp(n){return!!n&&"integerValue"in n}function Yp(n){return!!n&&"arrayValue"in n}function L0(n){return!!n&&"nullValue"in n}function V0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ju(n){return!!n&&"mapValue"in n}function j2(n){return(n?.mapValue?.fields||{})[p_]?.stringValue===m_}function $l(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Lo(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=$l(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$l(n.arrayValue.values[t]);return e}return{...n}}function L2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===M2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.value=e}static empty(){return new Gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ju(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(t)}setAll(e){let t=Dn.emptyPath(),i={},o=[];e.forEach((d,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=h.popLast()}d?i[h.lastSegment()]=$l(d):o.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ju(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Lo(t,(o,a)=>e[o]=a);for(const o of i)delete e[o]}clone(){return new Gr($l(this.value))}}function g_(n){const e=[];return Lo(n.fields,(t,i)=>{const o=new Dn([t]);if(Ju(i)){const a=g_(i.mapValue).fields;if(a.length===0)e.push(o);else for(const d of a)e.push(o.child(d))}else e.push(o)}),new li(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,t,i,o,a,d,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=d,this.documentState=h}static newInvalidDocument(e){return new Gn(e,0,et.min(),et.min(),et.min(),Gr.empty(),0)}static newFoundDocument(e,t,i,o){return new Gn(e,1,t,et.min(),i,o,0)}static newNoDocument(e,t){return new Gn(e,2,t,et.min(),et.min(),Gr.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,et.min(),et.min(),Gr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.position=e,this.inclusive=t}}function F0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],d=n.position[o];if(a.field.isKeyField()?i=We.comparator(We.fromName(d.referenceValue),t.key):i=ja(d,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function U0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t="asc"){this.field=e,this.dir=t}}function V2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{}class hn extends y_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new U2(e,t,i):t==="array-contains"?new $2(e,i):t==="in"?new H2(e,i):t==="not-in"?new q2(e,i):t==="array-contains-any"?new G2(e,i):new hn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new z2(e,i):new B2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ja(t,this.value)):t!==null&&Zs(this.value)===Zs(t)&&this.matchesComparison(ja(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ri extends y_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ri(e,t)}matches(e){return v_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function v_(n){return n.op==="and"}function w_(n){return F2(n)&&v_(n)}function F2(n){for(const e of n.filters)if(e instanceof Ri)return!1;return!0}function fp(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+La(n.value);if(w_(n))return n.filters.map(e=>fp(e)).join(",");{const e=n.filters.map(t=>fp(t)).join(",");return`${n.op}(${e})`}}function __(n,e){return n instanceof hn?function(i,o){return o instanceof hn&&i.op===o.op&&i.field.isEqual(o.field)&&Pi(i.value,o.value)}(n,e):n instanceof Ri?function(i,o){return o instanceof Ri&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((a,d,h)=>a&&__(d,o.filters[h]),!0):!1}(n,e):void Xe(19439)}function b_(n){return n instanceof hn?function(t){return`${t.field.canonicalString()} ${t.op} ${La(t.value)}`}(n):n instanceof Ri?function(t){return t.op.toString()+" {"+t.getFilters().map(b_).join(" ,")+"}"}(n):"Filter"}class U2 extends hn{constructor(e,t,i){super(e,t,i),this.key=We.fromName(i.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class z2 extends hn{constructor(e,t){super(e,"in",t),this.keys=x_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class B2 extends hn{constructor(e,t){super(e,"not-in",t),this.keys=x_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function x_(n,e){return(e.arrayValue?.values||[]).map(t=>We.fromName(t.referenceValue))}class $2 extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yp(t)&&oc(t.arrayValue,this.value)}}class H2 extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oc(this.value.arrayValue,t)}}class q2 extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!oc(this.value.arrayValue,t)}}class G2 extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>oc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,t=null,i=[],o=[],a=null,d=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=d,this.endAt=h,this.Te=null}}function z0(n,e=null,t=[],i=[],o=null,a=null,d=null){return new K2(n,e,t,i,o,a,d)}function Xp(n){const e=nt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>fp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Vd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>La(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>La(i)).join(",")),e.Te=t}return e.Te}function Jp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!V2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!__(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!U0(n.startAt,e.startAt)&&U0(n.endAt,e.endAt)}function pp(n){return We.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t=null,i=[],o=[],a=null,d="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=d,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function W2(n,e,t,i,o,a,d,h){return new Ud(n,e,t,i,o,a,d,h)}function Zp(n){return new Ud(n)}function B0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Q2(n){return n.collectionGroup!==null}function Hl(n){const e=nt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let h=new fn(Dn.comparator);return d.filters.forEach(m=>{m.getFlattenedFilters().forEach(v=>{v.isInequality()&&(h=h.add(v.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new gd(a,i))}),t.has(Dn.keyField().canonicalString())||e.Ie.push(new gd(Dn.keyField(),i))}return e.Ie}function ki(n){const e=nt(n);return e.Ee||(e.Ee=Y2(e,Hl(n))),e.Ee}function Y2(n,e){if(n.limitType==="F")return z0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new gd(o.field,a)});const t=n.endAt?new md(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new md(n.startAt.position,n.startAt.inclusive):null;return z0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function mp(n,e,t){return new Ud(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zd(n,e){return Jp(ki(n),ki(e))&&n.limitType===e.limitType}function E_(n){return`${Xp(ki(n))}|lt:${n.limitType}`}function _a(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>b_(o)).join(", ")}]`),Vd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>La(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>La(o)).join(",")),`Target(${i})`}(ki(n))}; limitType=${n.limitType})`}function Bd(n,e){return e.isFoundDocument()&&function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):We.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,o){for(const a of Hl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(d,h,m){const v=F0(d,h,m);return d.inclusive?v<=0:v<0}(i.startAt,Hl(i),o)||i.endAt&&!function(d,h,m){const v=F0(d,h,m);return d.inclusive?v>=0:v>0}(i.endAt,Hl(i),o))}(n,e)}function X2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function T_(n){return(e,t)=>{let i=!1;for(const o of Hl(n)){const a=J2(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function J2(n,e,t){const i=n.field.isKeyField()?We.comparator(e.key,t.key):function(a,d,h){const m=d.data.field(a),v=h.data.field(a);return m!==null&&v!==null?ja(m,v):Xe(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Lo(this.inner,(t,i)=>{for(const[o,a]of i)e(o,a)})}isEmpty(){return l_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=new Ft(We.comparator);function os(){return Z2}const S_=new Ft(We.comparator);function Rl(...n){let e=S_;for(const t of n)e=e.insert(t.key,t);return e}function k_(n){let e=S_;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ko(){return ql()}function I_(){return ql()}function ql(){return new Vo(n=>n.toString(),(n,e)=>n.isEqual(e))}const eC=new Ft(We.comparator),tC=new fn(We.comparator);function ft(...n){let e=tC;for(const t of n)e=e.add(t);return e}const nC=new fn(ht);function rC(){return nC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function C_(n){return{integerValue:""+n}}function iC(n,e){return N2(e)?C_(e):em(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(){this._=void 0}}function sC(n,e,t){return n instanceof yd?function(o,a){const d={fields:{[d_]:{stringValue:u_},[f_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Qp(a)&&(a=Fd(a)),a&&(d.fields[h_]=a),{mapValue:d}}(t,e):n instanceof ac?N_(n,e):n instanceof lc?P_(n,e):function(o,a){const d=A_(o,a),h=$0(d)+$0(o.Ae);return hp(d)&&hp(o.Ae)?C_(h):em(o.serializer,h)}(n,e)}function oC(n,e,t){return n instanceof ac?N_(n,e):n instanceof lc?P_(n,e):t}function A_(n,e){return n instanceof vd?function(i){return hp(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class yd extends $d{}class ac extends $d{constructor(e){super(),this.elements=e}}function N_(n,e){const t=R_(e);for(const i of n.elements)t.some(o=>Pi(o,i))||t.push(i);return{arrayValue:{values:t}}}class lc extends $d{constructor(e){super(),this.elements=e}}function P_(n,e){let t=R_(e);for(const i of n.elements)t=t.filter(o=>!Pi(o,i));return{arrayValue:{values:t}}}class vd extends $d{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $0(n){return Qt(n.integerValue||n.doubleValue)}function R_(n){return Yp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function aC(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof ac&&o instanceof ac||i instanceof lc&&o instanceof lc?Oa(i.elements,o.elements,Pi):i instanceof vd&&o instanceof vd?Pi(i.Ae,o.Ae):i instanceof yd&&o instanceof yd}(n.transform,e.transform)}class lC{constructor(e,t){this.version=e,this.transformResults=t}}class Ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hd{}function D_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tm(n.key,Ii.none()):new _c(n.key,n.data,Ii.none());{const t=n.data,i=Gr.empty();let o=new fn(Dn.comparator);for(let a of e.fields)if(!o.has(a)){let d=t.field(a);d===null&&a.length>1&&(a=a.popLast(),d=t.field(a)),d===null?i.delete(a):i.set(a,d),o=o.add(a)}return new Fo(n.key,i,new li(o.toArray()),Ii.none())}}function cC(n,e,t){n instanceof _c?function(o,a,d){const h=o.value.clone(),m=q0(o.fieldTransforms,a,d.transformResults);h.setAll(m),a.convertToFoundDocument(d.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Fo?function(o,a,d){if(!Zu(o.precondition,a))return void a.convertToUnknownDocument(d.version);const h=q0(o.fieldTransforms,a,d.transformResults),m=a.data;m.setAll(O_(o)),m.setAll(h),a.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(n,e,t):function(o,a,d){a.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function Gl(n,e,t,i){return n instanceof _c?function(a,d,h,m){if(!Zu(a.precondition,d))return h;const v=a.value.clone(),x=G0(a.fieldTransforms,m,d);return v.setAll(x),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(n,e,t,i):n instanceof Fo?function(a,d,h,m){if(!Zu(a.precondition,d))return h;const v=G0(a.fieldTransforms,m,d),x=d.data;return x.setAll(O_(a)),x.setAll(v),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(T=>T.field))}(n,e,t,i):function(a,d,h){return Zu(a.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):h}(n,e,t)}function uC(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=A_(i.transform,o||null);a!=null&&(t===null&&(t=Gr.empty()),t.set(i.field,a))}return t||null}function H0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Oa(i,o,(a,d)=>aC(a,d))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _c extends Hd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fo extends Hd{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function O_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function q0(n,e,t){const i=new Map;xt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],d=a.transform,h=e.data.field(a.field);i.set(a.field,oC(d,h,t[o]))}return i}function G0(n,e,t){const i=new Map;for(const o of n){const a=o.transform,d=t.data.field(o.field);i.set(o.field,sC(a,d,e))}return i}class tm extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dC extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&cC(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Gl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Gl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=I_();return this.mutations.forEach(o=>{const a=e.get(o.key),d=a.overlayedDocument;let h=this.applyToLocalView(d,a.mutatedFields);h=t.has(o.key)?null:h;const m=D_(d,h);m!==null&&i.set(o.key,m),d.isValidDocument()||d.convertToNoDocument(et.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ft())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(t,i)=>H0(t,i))&&Oa(this.baseMutations,e.baseMutations,(t,i)=>H0(t,i))}}class nm{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){xt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=function(){return eC}();const a=e.mutations;for(let d=0;d<a.length;d++)o=o.insert(a[d].key,i[d].version);return new nm(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,yt;function mC(n){switch(n){case fe.OK:return Xe(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Xe(15467,{code:n})}}function M_(n){if(n===void 0)return ss("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Zt.OK:return fe.OK;case Zt.CANCELLED:return fe.CANCELLED;case Zt.UNKNOWN:return fe.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return fe.INTERNAL;case Zt.UNAVAILABLE:return fe.UNAVAILABLE;case Zt.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Zt.NOT_FOUND:return fe.NOT_FOUND;case Zt.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Zt.ABORTED:return fe.ABORTED;case Zt.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Zt.DATA_LOSS:return fe.DATA_LOSS;default:return Xe(39323,{code:n})}}(yt=Zt||(Zt={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new Ks([4294967295,4294967295],0);function K0(n){const e=gC().encode(n),t=new Jw;return t.update(e),new Uint8Array(t.digest())}function W0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ks([t,i],0),new Ks([o,a],0)]}class rm{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Dl(`Invalid padding: ${t}`);if(i<0)throw new Dl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ks.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ks.fromNumber(i)));return o.compare(yC)===1&&(o=new Ks([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=K0(e),[i,o]=W0(t);for(let a=0;a<this.hashCount;a++){const d=this.ye(i,o,a);if(!this.we(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),d=new rm(a,o,t);return i.forEach(h=>d.insert(h)),d}insert(e){if(this.ge===0)return;const t=K0(e),[i,o]=W0(t);for(let a=0;a<this.hashCount;a++){const d=this.ye(i,o,a);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new qd(et.min(),o,new Ft(ht),os(),ft())}}class bc{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new bc(i,t,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class j_{constructor(e,t){this.targetId=e,this.Ce=t}}class L_{constructor(e,t,i=Mn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Q0{constructor(){this.ve=0,this.Fe=Y0(),this.Me=Mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),t=ft(),i=ft();return this.Fe.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Xe(38017,{changeType:a})}}),new bc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Y0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vC{constructor(e){this.Ge=e,this.ze=new Map,this.je=os(),this.Je=ju(),this.He=ju(),this.Ye=new Ft(ht)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Xe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((i,o)=>{this.rt(o)&&t(o)})}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(pp(a))if(i===0){const d=new We(a.path);this.et(t,d,Gn.newNoDocument(d,et.min()))}else xt(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const h=this.ut(e),m=h?this.ct(h,e,d):1;if(m!==0){this.it(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let d,h;try{d=Js(i).toUint8Array()}catch(m){if(m instanceof c_)return Da("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new rm(d,o,a)}catch(m){return Da(m instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach(a=>{const d=this.Ge.ht(),h=`projects/${d.projectId}/databases/${d.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),o++)}),o}Tt(e){const t=new Map;this.ze.forEach((a,d)=>{const h=this.ot(d);if(h){if(a.current&&pp(h.target)){const m=new We(h.target.path);this.It(m).has(d)||this.Et(d,m)||this.et(d,m,Gn.newNoDocument(m,e))}a.Be&&(t.set(d,a.ke()),a.qe())}});let i=ft();this.He.forEach((a,d)=>{let h=!0;d.forEachWhile(m=>{const v=this.ot(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.je.forEach((a,d)=>d.setReadTime(e));const o=new qd(e,t,this.Ye,this.je,i);return this.je=os(),this.Je=ju(),this.He=ju(),this.Ye=new Ft(ht),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Q0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new fn(ht),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new fn(ht),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Q0),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ju(){return new Ft(We.comparator)}function Y0(){return new Ft(We.comparator)}const wC={asc:"ASCENDING",desc:"DESCENDING"},_C={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bC={and:"AND",or:"OR"};class xC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gp(n,e){return n.useProto3Json||Vd(e)?e:{value:e}}function wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EC(n,e){return wd(n,e.toTimestamp())}function Ci(n){return xt(!!n,49232),et.fromTimestamp(function(t){const i=Xs(t);return new Dt(i.seconds,i.nanos)}(n))}function im(n,e){return yp(n,e).canonicalString()}function yp(n,e){const t=function(o){return new Vt(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function F_(n){const e=Vt.fromString(n);return xt(H_(e),10190,{key:e.toString()}),e}function vp(n,e){return im(n.databaseId,e.path)}function Lf(n,e){const t=F_(e);if(t.get(1)!==n.databaseId.projectId)throw new He(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(z_(t))}function U_(n,e){return im(n.databaseId,e)}function TC(n){const e=F_(n);return e.length===4?Vt.emptyPath():z_(e)}function wp(n){return new Vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function z_(n){return xt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function X0(n,e,t){return{name:vp(n,e),fields:t.value.mapValue.fields}}function SC(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Xe(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(v,x){return v.useProto3Json?(xt(x===void 0||typeof x=="string",58123),Mn.fromBase64String(x||"")):(xt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Mn.fromUint8Array(x||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,h=d&&function(v){const x=v.code===void 0?fe.UNKNOWN:M_(v.code);return new He(x,v.message||"")}(d);t=new L_(i,o,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Lf(n,i.document.name),a=Ci(i.document.updateTime),d=i.document.createTime?Ci(i.document.createTime):et.min(),h=new Gr({mapValue:{fields:i.document.fields}}),m=Gn.newFoundDocument(o,a,d,h),v=i.targetIds||[],x=i.removedTargetIds||[];t=new ed(v,x,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Lf(n,i.document),a=i.readTime?Ci(i.readTime):et.min(),d=Gn.newNoDocument(o,a),h=i.removedTargetIds||[];t=new ed([],h,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Lf(n,i.document),a=i.removedTargetIds||[];t=new ed([],a,o,null)}else{if(!("filter"in e))return Xe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,d=new pC(o,a),h=i.targetId;t=new j_(h,d)}}return t}function kC(n,e){let t;if(e instanceof _c)t={update:X0(n,e.key,e.value)};else if(e instanceof tm)t={delete:vp(n,e.key)};else if(e instanceof Fo)t={update:X0(n,e.key,e.data),updateMask:MC(e.fieldMask)};else{if(!(e instanceof dC))return Xe(16599,{Vt:e.type});t={verify:vp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,d){const h=d.transform;if(h instanceof yd)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ac)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof lc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof vd)return{fieldPath:d.field.canonicalString(),increment:h.Ae};throw Xe(20930,{transform:d.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:EC(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Xe(27497)}(n,e.precondition)),t}function IC(n,e){return n&&n.length>0?(xt(e!==void 0,14353),n.map(t=>function(o,a){let d=o.updateTime?Ci(o.updateTime):Ci(a);return d.isEqual(et.min())&&(d=Ci(a)),new lC(d,o.transformResults||[])}(t,e))):[]}function CC(n,e){return{documents:[U_(n,e.path)]}}function AC(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=U_(n,o);const a=function(v){if(v.length!==0)return $_(Ri.create(v,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const d=function(v){if(v.length!==0)return v.map(x=>function(C){return{field:ba(C.field),direction:RC(C.dir)}}(x))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const h=gp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ft:t,parent:o}}function NC(n){let e=TC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){xt(i===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let a=[];t.where&&(a=function(T){const C=B_(T);return C instanceof Ri&&w_(C)?C.getFilters():[C]}(t.where));let d=[];t.orderBy&&(d=function(T){return T.map(C=>function(G){return new gd(xa(G.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(C))}(t.orderBy));let h=null;t.limit&&(h=function(T){let C;return C=typeof T=="object"?T.value:T,Vd(C)?null:C}(t.limit));let m=null;t.startAt&&(m=function(T){const C=!!T.before,z=T.values||[];return new md(z,C)}(t.startAt));let v=null;return t.endAt&&(v=function(T){const C=!T.before,z=T.values||[];return new md(z,C)}(t.endAt)),W2(e,o,d,a,h,"F",m,v)}function PC(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function B_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=xa(t.unaryFilter.field);return hn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=xa(t.unaryFilter.field);return hn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xa(t.unaryFilter.field);return hn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=xa(t.unaryFilter.field);return hn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xe(61313);default:return Xe(60726)}}(n):n.fieldFilter!==void 0?function(t){return hn.create(xa(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xe(58110);default:return Xe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ri.create(t.compositeFilter.filters.map(i=>B_(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Xe(1026)}}(t.compositeFilter.op))}(n):Xe(30097,{filter:n})}function RC(n){return wC[n]}function DC(n){return _C[n]}function OC(n){return bC[n]}function ba(n){return{fieldPath:n.canonicalString()}}function xa(n){return Dn.fromServerFormat(n.fieldPath)}function $_(n){return n instanceof hn?function(t){if(t.op==="=="){if(V0(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NAN"}};if(L0(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(V0(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NOT_NAN"}};if(L0(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ba(t.field),op:DC(t.op),value:t.value}}}(n):n instanceof Ri?function(t){const i=t.getFilters().map(o=>$_(o));return i.length===1?i[0]:{compositeFilter:{op:OC(t.op),filters:i}}}(n):Xe(54877,{filter:n})}function MC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function H_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t,i,o,a=et.min(),d=et.min(),h=Mn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.yt=e}}function LC(n){const e=NC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.Cn=new FC}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Ys.min())}updateCollectionGroup(e,t,i){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class FC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new fn(Vt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new fn(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q_=41943040;class wr{static withCacheSize(e){return new wr(e,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr.DEFAULT_COLLECTION_PERCENTILE=10,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wr.DEFAULT=new wr(q_,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wr.DISABLED=new wr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Va(0)}static cr(){return new Va(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="LruGarbageCollector",UC=1048576;function ev([n,e],[t,i]){const o=ht(n,t);return o===0?ht(e,i):o}class zC{constructor(e){this.Ir=e,this.buffer=new fn(ev),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ev(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(Z0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ga(t)?Re(Z0,"Ignoring IndexedDB error during garbage collection: ",t):await qa(t)}await this.Vr(3e5)})}}class $C{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Ld.ce);const i=new zC(t);return this.mr.forEachTarget(e,o=>i.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>i.Ar(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(J0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J0):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,d,h,m,v;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,h=Date.now(),this.removeTargets(e,i,t))).next(T=>(a=T,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(v=Date.now(),wa()<=dt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${o} in `+(h-d)+`ms
	Removed ${a} targets in `+(m-h)+`ms
	Removed ${T} documents in `+(v-m)+`ms
Total Duration: ${v-x}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T})))}}function HC(n,e){return new $C(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.changes=new Vo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ue.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Gl(i.mutation,o,li.empty(),Dt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ft()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ft()){const o=ko();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(a=>{let d=Rl();return a.forEach((h,m)=>{d=d.insert(h,m.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const i=ko();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ft()))}populateOverlays(e,t,i){const o=[];return i.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((d,h)=>{t.set(d,h)})})}computeViews(e,t,i,o){let a=os();const d=ql(),h=function(){return ql()}();return t.forEach((m,v)=>{const x=i.get(v.key);o.has(v.key)&&(x===void 0||x.mutation instanceof Fo)?a=a.insert(v.key,v):x!==void 0?(d.set(v.key,x.mutation.getFieldMask()),Gl(x.mutation,v,x.mutation.getFieldMask(),Dt.now())):d.set(v.key,li.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,x)=>d.set(v,x)),t.forEach((v,x)=>h.set(v,new GC(x,d.get(v)??null))),h))}recalculateAndSaveOverlays(e,t){const i=ql();let o=new Ft((d,h)=>d-h),a=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const h of d)h.keys().forEach(m=>{const v=t.get(m);if(v===null)return;let x=i.get(m)||li.empty();x=h.applyToLocalView(v,x),i.set(m,x);const T=(o.get(h.batchId)||ft()).add(m);o=o.insert(h.batchId,T)})}).next(()=>{const d=[],h=o.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),v=m.key,x=m.value,T=I_();x.forEach(C=>{if(!a.has(C)){const z=D_(t.get(C),i.get(C));z!==null&&T.set(C,z),a=a.add(C)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,T))}return ue.waitFor(d)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(d){return We.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Q2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(a=>{const d=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):ue.resolve(ko());let h=rc,m=a;return d.next(v=>ue.forEach(v,(x,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),a.get(x)?ue.resolve():this.remoteDocumentCache.getEntry(e,x).next(C=>{m=m.insert(x,C)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,ft())).next(x=>({batchId:h,changes:k_(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(i=>{let o=Rl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let d=Rl();return this.indexManager.getCollectionParents(e,a).next(h=>ue.forEach(h,m=>{const v=function(T,C){return new Ud(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next(x=>{x.forEach((T,C)=>{d=d.insert(T,C)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(d=>(a=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o))).next(d=>{a.forEach((m,v)=>{const x=v.getKey();d.get(x)===null&&(d=d.insert(x,Gn.newInvalidDocument(x)))});let h=Rl();return d.forEach((m,v)=>{const x=a.get(m);x!==void 0&&Gl(x.mutation,v,li.empty(),Dt.now()),Bd(t,v)&&(h=h.insert(m,v))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Ci(o.createTime)}}(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(o){return{name:o.name,query:LC(o.bundledQuery),readTime:Ci(o.readTime)}}(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.overlays=new Ft(We.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ko();return ue.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&i.set(o,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,a)=>{this.St(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(i)),ue.resolve()}getOverlaysForCollection(e,t,i){const o=ko(),a=t.length+1,d=new We(t.child("")),h=this.overlays.getIteratorFrom(d);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>i&&o.set(m.getKey(),m)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new Ft((v,x)=>v-x);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let x=a.get(v.largestBatchId);x===null&&(x=ko(),a=a.insert(v.largestBatchId,x)),x.set(v.getKey(),v)}}const h=ko(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,x)=>h.set(v,x)),!(h.size()>=o)););return ue.resolve(h)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new fC(t,i));let a=this.qr.get(t);a===void 0&&(a=ft(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this.Qr=new fn(xn.$r),this.Ur=new fn(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new xn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Gr(new xn(e,t))}zr(e,t){e.forEach(i=>this.removeReference(i,t))}jr(e){const t=new We(new Vt([])),i=new xn(t,e),o=new xn(t,e+1),a=[];return this.Ur.forEachInRange([i,o],d=>{this.Gr(d),a.push(d.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new We(new Vt([])),i=new xn(t,e),o=new xn(t,e+1);let a=ft();return this.Ur.forEachInRange([i,o],d=>{a=a.add(d.key)}),a}containsKey(e){const t=new xn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class xn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return We.comparator(e.key,t.key)||ht(e.Yr,t.Yr)}static Kr(e,t){return ht(e.Yr,t.Yr)||We.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new fn(xn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new hC(a,t,i,o);this.mutationQueue.push(d);for(const h of o)this.Zr=this.Zr.add(new xn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(d)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Wp:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new xn(t,0),o=new xn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],d=>{const h=this.Xr(d.Yr);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new fn(ht);return t.forEach(o=>{const a=new xn(o,0),d=new xn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,d],h=>{i=i.add(h.Yr)})}),ue.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;We.isDocumentKey(a)||(a=a.child(""));const d=new xn(new We(a),0);let h=new fn(ht);return this.Zr.forEachWhile(m=>{const v=m.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(h=h.add(m.Yr)),!0)},d),ue.resolve(this.ti(h))}ti(e){const t=[];return e.forEach(i=>{const o=this.Xr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){xt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ue.forEach(t.mutations,o=>{const a=new xn(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){const i=new xn(t,0),o=this.Zr.firstAfterOrEqual(i);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.ri=e,this.docs=function(){return new Ft(We.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ue.resolve(i?i.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let i=os();return t.forEach(o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():Gn.newInvalidDocument(o))}),ue.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=os();const d=t.path,h=new We(d.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:v,value:{document:x}}=m.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||k2(S2(x),i)<=0||(o.has(x.key)||Bd(t,x))&&(a=a.insert(x.key,x.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Xe(9500)}ii(e,t){return ue.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new ZC(this)}getSize(e){return ue.resolve(this.size)}}class ZC extends qC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)}),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.persistence=e,this.si=new Vo(t=>Xp(t),Jp),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.oi=0,this._i=new sm,this.targetCount=0,this.ai=Va.ur()}forEachTarget(e,t){return this.si.forEach((i,o)=>t(o)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Va(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach((d,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(d),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),ue.waitFor(a).next(()=>o)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ue.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ue.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(d=>{a.push(o.markPotentiallyOrphaned(e,d))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ue.resolve(i)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ld(0),this.li=!1,this.li=!0,this.hi=new YC,this.referenceDelegate=e(this),this.Pi=new eA(this),this.indexManager=new VC,this.remoteDocumentCache=function(o){return new JC(o)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new jC(t),this.Ii=new WC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new XC(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){Re("MemoryPersistence","Starting transaction:",e);const o=new tA(this.ci.next());return this.referenceDelegate.Ei(),i(o).next(a=>this.referenceDelegate.di(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Ai(e,t){return ue.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}}class tA extends C2{constructor(e){super(),this.currentSequenceNumber=e}}class om{constructor(e){this.persistence=e,this.Ri=new sm,this.Vi=null}static mi(e){return new om(e)}get fi(){if(this.Vi)return this.Vi;throw Xe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ue.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(o=>this.fi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.fi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,i=>{const o=We.fromPath(i);return this.gi(e,o).next(a=>{a||t.removeEntry(o,et.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _d{constructor(e,t){this.persistence=e,this.pi=new Vo(i=>P2(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=HC(this,t)}static mi(e,t){return new _d(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}wr(e){let t=0;return this.pr(e,i=>{t++}).next(()=>t)}pr(e,t){return ue.forEach(this.pi,(i,o)=>this.br(e,i,o).next(a=>a?ue.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,d=>this.br(e,d,t).next(h=>{h||(i++,a.removeEntry(d,et.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xu(e.data.value)),t}br(e,t,i){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ue.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=ft(),o=ft();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new am(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return PT()?8:A2(Kn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next(d=>{a.result=d}).next(()=>{if(!a.result)return this.ws(e,t,o,i).next(d=>{a.result=d})}).next(()=>{if(a.result)return;const d=new nA;return this.Ss(e,t,d).next(h=>{if(a.result=h,this.Vs)return this.bs(e,t,d,h.size)})}).next(()=>a.result)}bs(e,t,i,o){return i.documentReadCount<this.fs?(wa()<=dt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",_a(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(wa()<=dt.DEBUG&&Re("QueryEngine","Query:",_a(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(wa()<=dt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",_a(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(t))):ue.resolve())}ys(e,t){if(B0(t))return ue.resolve(null);let i=ki(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=mp(t,null,"F"),i=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const d=ft(...a);return this.ps.getDocuments(e,d).next(h=>this.indexManager.getMinOffset(e,i).next(m=>{const v=this.Ds(t,h);return this.Cs(t,v,d,m.readTime)?this.ys(e,mp(t,null,"F")):this.vs(e,v,t,m)}))})))}ws(e,t,i,o){return B0(t)||o.isEqual(et.min())?ue.resolve(null):this.ps.getDocuments(e,i).next(a=>{const d=this.Ds(t,a);return this.Cs(t,d,i,o)?ue.resolve(null):(wa()<=dt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_a(t)),this.vs(e,d,t,T2(o,rc)).next(h=>h))})}Ds(e,t){let i=new fn(T_(e));return t.forEach((o,a)=>{Bd(e,a)&&(i=i.add(a))}),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return wa()<=dt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",_a(t)),this.ps.getDocumentsMatchingQuery(e,t,Ys.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next(a=>(t.forEach(d=>{a=a.insert(d.key,d)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="LocalStore",iA=3e8;class sA{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Ft(ht),this.xs=new Vo(a=>Xp(a),Jp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function oA(n,e,t,i){return new sA(n,e,t,i)}async function K_(n,e){const t=nt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const d=[],h=[];let m=ft();for(const v of o){d.push(v.batchId);for(const x of v.mutations)m=m.add(x.key)}for(const v of a){h.push(v.batchId);for(const x of v.mutations)m=m.add(x.key)}return t.localDocuments.getDocuments(i,m).next(v=>({Ls:v,removedBatchIds:d,addedBatchIds:h}))})})}function aA(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return function(h,m,v,x){const T=v.batch,C=T.keys();let z=ue.resolve();return C.forEach(G=>{z=z.next(()=>x.getEntry(m,G)).next(K=>{const B=v.docVersions.get(G);xt(B!==null,48541),K.version.compareTo(B)<0&&(T.applyToRemoteDocument(K,v),K.isValidDocument()&&(K.setReadTime(v.commitVersion),x.addEntry(K)))})}),z.next(()=>h.mutationQueue.removeMutationBatch(m,T))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let m=ft();for(let v=0;v<h.mutationResults.length;++v)h.mutationResults[v].transformResults.length>0&&(m=m.add(h.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function W_(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function lA(n,e){const t=nt(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const h=[];e.targetChanges.forEach((x,T)=>{const C=o.get(T);if(!C)return;h.push(t.Pi.removeMatchingKeys(a,x.removedDocuments,T).next(()=>t.Pi.addMatchingKeys(a,x.addedDocuments,T)));let z=C.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?z=z.withResumeToken(Mn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):x.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(x.resumeToken,i)),o=o.insert(T,z),function(K,B,ee){return K.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=iA?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}(C,z,x)&&h.push(t.Pi.updateTargetData(a,z))});let m=os(),v=ft();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,x))}),h.push(cA(a,d,e.documentUpdates).next(x=>{m=x.ks,v=x.qs})),!i.isEqual(et.min())){const x=t.Pi.getLastRemoteSnapshotVersion(a).next(T=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(x)}return ue.waitFor(h).next(()=>d.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ms=o,a))}function cA(n,e,t){let i=ft(),o=ft();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let d=os();return t.forEach((h,m)=>{const v=a.get(h);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(h)),m.isNoDocument()&&m.version.isEqual(et.min())?(e.removeEntry(h,m.readTime),d=d.insert(h,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),d=d.insert(h,m)):Re(lm,"Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",m.version)}),{ks:d,qs:o}})}function uA(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Wp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function dA(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Pi.getTargetData(i,e).next(a=>a?(o=a,ue.resolve(o)):t.Pi.allocateTargetId(i).next(d=>(o=new zs(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i})}async function _p(n,e,t){const i=nt(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,d=>i.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Ga(d))throw d;Re(lm,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function tv(n,e,t){const i=nt(n);let o=et.min(),a=ft();return i.persistence.runTransaction("Execute query","readwrite",d=>function(m,v,x){const T=nt(m),C=T.xs.get(x);return C!==void 0?ue.resolve(T.Ms.get(C)):T.Pi.getTargetData(v,x)}(i,d,ki(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,h.targetId).next(m=>{a=m})}).next(()=>i.Fs.getDocumentsMatchingQuery(d,e,t?o:et.min(),t?a:ft())).next(h=>(hA(i,X2(e),h),{documents:h,Qs:a})))}function hA(n,e,t){let i=n.Os.get(e)||et.min();t.forEach((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Os.set(e,i)}class nv{constructor(){this.activeTargetIds=rC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fA{constructor(){this.Mo=new nv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="ConnectivityMonitor";class iv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(rv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re(rv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu=null;function bp(){return Lu===null?Lu=function(){return 268435456+Math.round(2147483648*Math.random())}():Lu++,"0x"+Lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="RestConnection",mA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===fd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const d=bp(),h=this.zo(e,t.toUriEncodedString());Re(Vf,`Sending RPC '${e}' ${d}:`,h,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,a);const{host:v}=new URL(h),x=za(v);return this.Jo(e,h,m,i,x).then(T=>(Re(Vf,`Received RPC '${e}' ${d}: `,T),T),T=>{throw Da(Vf,`RPC '${e}' ${d} failed with error: `,T,"url: ",h,"request:",i),T})}Ho(e,t,i,o,a,d){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),i&&i.headers.forEach((o,a)=>e[a]=o)}zo(e,t){const i=mA[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class vA extends gA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const d=bp();return new Promise((h,m)=>{const v=new Zw;v.setWithCredentials(!0),v.listenOnce(e_.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Yu.NO_ERROR:const T=v.getResponseJson();Re($n,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),h(T);break;case Yu.TIMEOUT:Re($n,`RPC '${e}' ${d} timed out`),m(new He(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const C=v.getStatus();if(Re($n,`RPC '${e}' ${d} failed with status:`,C,"response text:",v.getResponseText()),C>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const G=z?.error;if(G&&G.status&&G.message){const K=function(ee){const te=ee.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(te)>=0?te:fe.UNKNOWN}(G.status);m(new He(K,G.message))}else m(new He(fe.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new He(fe.UNAVAILABLE,"Connection failed."));break;default:Xe(9055,{l_:e,streamId:d,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{Re($n,`RPC '${e}' ${d} completed.`)}});const x=JSON.stringify(o);Re($n,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",x,i,15)})}T_(e,t,i){const o=bp(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=r_(),h=n_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const x=a.join("");Re($n,`Creating RPC '${e}' stream ${o}: ${x}`,m);const T=d.createWebChannel(x,m);this.I_(T);let C=!1,z=!1;const G=new yA({Yo:B=>{z?Re($n,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(C||(Re($n,`Opening RPC '${e}' stream ${o} transport.`),T.open(),C=!0),Re($n,`RPC '${e}' stream ${o} sending:`,B),T.send(B))},Zo:()=>T.close()}),K=(B,ee,te)=>{B.listen(ee,pe=>{try{te(pe)}catch(we){setTimeout(()=>{throw we},0)}})};return K(T,Pl.EventType.OPEN,()=>{z||(Re($n,`RPC '${e}' stream ${o} transport opened.`),G.o_())}),K(T,Pl.EventType.CLOSE,()=>{z||(z=!0,Re($n,`RPC '${e}' stream ${o} transport closed`),G.a_(),this.E_(T))}),K(T,Pl.EventType.ERROR,B=>{z||(z=!0,Da($n,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),G.a_(new He(fe.UNAVAILABLE,"The operation could not be completed")))}),K(T,Pl.EventType.MESSAGE,B=>{if(!z){const ee=B.data[0];xt(!!ee,16349);const te=ee,pe=te?.error||te[0]?.error;if(pe){Re($n,`RPC '${e}' stream ${o} received error:`,pe);const we=pe.status;let re=function(k){const A=Zt[k];if(A!==void 0)return M_(A)}(we),ie=pe.message;re===void 0&&(re=fe.INTERNAL,ie="Unknown error status: "+we+" with message "+pe.message),z=!0,G.a_(new He(re,ie)),T.close()}else Re($n,`RPC '${e}' stream ${o} received:`,ee),G.u_(ee)}}),K(h,t_.STAT_EVENT,B=>{B.stat===cp.PROXY?Re($n,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===cp.NOPROXY&&Re($n,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.__()},0),G}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(n){return new xC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="PersistentStream";class Y_{constructor(e,t,i,o,a,d,h,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Q_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(ss(t.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.D_===t&&this.G_(i,o)},i=>{e(()=>{const o=new He(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)})})}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{i(()=>this.z_(o))}),this.stream.onMessage(o=>{i(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Re(sv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Re(sv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wA extends Y_{constructor(e,t,i,o,a,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=SC(this.serializer,e),i=function(a){if(!("targetChange"in a))return et.min();const d=a.targetChange;return d.targetIds&&d.targetIds.length?et.min():d.readTime?Ci(d.readTime):et.min()}(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=wp(this.serializer),t.addTarget=function(a,d){let h;const m=d.target;if(h=pp(m)?{documents:CC(a,m)}:{query:AC(a,m).ft},h.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){h.resumeToken=V_(a,d.resumeToken);const v=gp(a,d.expectedCount);v!==null&&(h.expectedCount=v)}else if(d.snapshotVersion.compareTo(et.min())>0){h.readTime=wd(a,d.snapshotVersion.toTimestamp());const v=gp(a,d.expectedCount);v!==null&&(h.expectedCount=v)}return h}(this.serializer,e);const i=PC(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=wp(this.serializer),t.removeTarget=e,this.q_(t)}}class _A extends Y_{constructor(e,t,i,o,a,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=IC(e.writeResults,e.commitTime),i=Ci(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=wp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>kC(this.serializer,i))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{}class xA extends bA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new He(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,d])=>this.connection.Go(e,yp(t,i),o,a,d)).catch(a=>{throw a.name==="FirebaseError"?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(fe.UNKNOWN,a.toString())})}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,h])=>this.connection.Ho(e,yp(t,i),o,d,h,a)).catch(d=>{throw d.name==="FirebaseError"?(d.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new He(fe.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class EA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ss(t),this.aa=!1):Re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="RemoteStore";class TA{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(d=>{i.enqueueAndForget(async()=>{Uo(this)&&(Re(Oo,"Restarting streams for network reachability change."),await async function(m){const v=nt(m);v.Ea.add(4),await xc(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Kd(v)}(this))})}),this.Ra=new EA(i,o)}}async function Kd(n){if(Uo(n))for(const e of n.da)await e(!0)}async function xc(n){for(const e of n.da)await e(!1)}function X_(n,e){const t=nt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hm(t)?dm(t):Ka(t).O_()&&um(t,e))}function cm(n,e){const t=nt(n),i=Ka(t);t.Ia.delete(e),i.O_()&&J_(t,e),t.Ia.size===0&&(i.O_()?i.L_():Uo(t)&&t.Ra.set("Unknown"))}function um(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ka(n).Y_(e)}function J_(n,e){n.Va.Ue(e),Ka(n).Z_(e)}function dm(n){n.Va=new vC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ka(n).start(),n.Ra.ua()}function hm(n){return Uo(n)&&!Ka(n).x_()&&n.Ia.size>0}function Uo(n){return nt(n).Ea.size===0}function Z_(n){n.Va=void 0}async function SA(n){n.Ra.set("Online")}async function kA(n){n.Ia.forEach((e,t)=>{um(n,e)})}async function IA(n,e){Z_(n),hm(n)?(n.Ra.ha(e),dm(n)):n.Ra.set("Unknown")}async function CA(n,e,t){if(n.Ra.set("Online"),e instanceof L_&&e.state===2&&e.cause)try{await async function(o,a){const d=a.cause;for(const h of a.targetIds)o.Ia.has(h)&&(await o.remoteSyncer.rejectListen(h,d),o.Ia.delete(h),o.Va.removeTarget(h))}(n,e)}catch(i){Re(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await bd(n,i)}else if(e instanceof ed?n.Va.Ze(e):e instanceof j_?n.Va.st(e):n.Va.tt(e),!t.isEqual(et.min()))try{const i=await W_(n.localStore);t.compareTo(i)>=0&&await function(a,d){const h=a.Va.Tt(d);return h.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const x=a.Ia.get(v);x&&a.Ia.set(v,x.withResumeToken(m.resumeToken,d))}}),h.targetMismatches.forEach((m,v)=>{const x=a.Ia.get(m);if(!x)return;a.Ia.set(m,x.withResumeToken(Mn.EMPTY_BYTE_STRING,x.snapshotVersion)),J_(a,m);const T=new zs(x.target,m,v,x.sequenceNumber);um(a,T)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){Re(Oo,"Failed to raise snapshot:",i),await bd(n,i)}}async function bd(n,e,t){if(!Ga(e))throw e;n.Ea.add(1),await xc(n),n.Ra.set("Offline"),t||(t=()=>W_(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Re(Oo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Kd(n)})}function eb(n,e){return e().catch(t=>bd(n,t,e))}async function Wd(n){const e=nt(n),t=eo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wp;for(;AA(e);)try{const o=await uA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,NA(e,o)}catch(o){await bd(e,o)}tb(e)&&nb(e)}function AA(n){return Uo(n)&&n.Ta.length<10}function NA(n,e){n.Ta.push(e);const t=eo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function tb(n){return Uo(n)&&!eo(n).x_()&&n.Ta.length>0}function nb(n){eo(n).start()}async function PA(n){eo(n).ra()}async function RA(n){const e=eo(n);for(const t of n.Ta)e.ea(t.mutations)}async function DA(n,e,t){const i=n.Ta.shift(),o=nm.from(i,e,t);await eb(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Wd(n)}async function OA(n,e){e&&eo(n).X_&&await async function(i,o){if(function(d){return mC(d)&&d!==fe.ABORTED}(o.code)){const a=i.Ta.shift();eo(i).B_(),await eb(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Wd(i)}}(n,e),tb(n)&&nb(n)}async function ov(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Re(Oo,"RemoteStore received new credentials");const i=Uo(t);t.Ea.add(3),await xc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Kd(t)}async function MA(n,e){const t=nt(n);e?(t.Ea.delete(2),await Kd(t)):e||(t.Ea.add(2),await xc(t),t.Ra.set("Unknown"))}function Ka(n){return n.ma||(n.ma=function(t,i,o){const a=nt(t);return a.sa(),new wA(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Xo:SA.bind(null,n),t_:kA.bind(null,n),r_:IA.bind(null,n),H_:CA.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),hm(n)?dm(n):n.Ra.set("Unknown")):(await n.ma.stop(),Z_(n))})),n.ma}function eo(n){return n.fa||(n.fa=function(t,i,o){const a=nt(t);return a.sa(),new _A(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:PA.bind(null,n),r_:OA.bind(null,n),ta:RA.bind(null,n),na:DA.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Wd(n)):(await n.fa.stop(),n.Ta.length>0&&(Re(Oo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const d=Date.now()+i,h=new fm(e,t,d,o,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pm(n,e){if(ss("AsyncQueue",`${e}: ${n}`),Ga(n))return new He(fe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{static emptySet(e){return new Na(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||We.comparator(t.key,i.key):(t,i)=>We.comparator(t.key,i.key),this.keyedMap=Rl(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Na;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.ga=new Ft(We.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Xe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,i)=>{e.push(i)}),e}}class Fa{constructor(e,t,i,o,a,d,h,m,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=d,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,a){const d=[];return t.forEach(h=>{d.push({type:0,doc:h})}),new Fa(e,t,Na.emptySet(t),d,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class LA{constructor(){this.queries=lv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=nt(t),a=o.queries;o.queries=lv(),a.forEach((d,h)=>{for(const m of h.Sa)m.onError(i)})})(this,new He(fe.ABORTED,"Firestore shutting down"))}}function lv(){return new Vo(n=>E_(n),zd)}async function VA(n,e){const t=nt(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new jA,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const h=pm(d,`Initialization of query '${_a(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&mm(t)}async function FA(n,e){const t=nt(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const d=a.Sa.indexOf(e);d>=0&&(a.Sa.splice(d,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function UA(n,e){const t=nt(n);let i=!1;for(const o of e){const a=o.query,d=t.queries.get(a);if(d){for(const h of d.Sa)h.Fa(o)&&(i=!0);d.wa=o}}i&&mm(t)}function zA(n,e,t){const i=nt(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function mm(n){n.Ca.forEach(e=>{e.next()})}var xp,cv;(cv=xp||(xp={})).Ma="default",cv.Cache="cache";class BA{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Fa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.key=e}}class ib{constructor(e){this.key=e}}class $A{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ft(),this.mutatedKeys=ft(),this.eu=T_(e),this.tu=new Na(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new av,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,d=o,h=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,T)=>{const C=o.get(x),z=Bd(this.query,T)?T:null,G=!!C&&this.mutatedKeys.has(C.key),K=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let B=!1;C&&z?C.data.isEqual(z.data)?G!==K&&(i.track({type:3,doc:z}),B=!0):this.su(C,z)||(i.track({type:2,doc:z}),B=!0,(m&&this.eu(z,m)>0||v&&this.eu(z,v)<0)&&(h=!0)):!C&&z?(i.track({type:0,doc:z}),B=!0):C&&!z&&(i.track({type:1,doc:C}),B=!0,(m||v)&&(h=!0)),B&&(z?(d=d.add(z),a=K?a.add(x):a.delete(x)):(d=d.delete(x),a=a.delete(x)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),a=a.delete(x.key),i.track({type:1,doc:x})}return{tu:d,iu:i,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort((x,T)=>function(z,G){const K=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe(20277,{Rt:B})}};return K(z)-K(G)}(x.type,T.type)||this.eu(x.doc,T.doc)),this.ou(i),o=o??!1;const h=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,v=m!==this.Za;return this.Za=m,d.length!==0||v?{snapshot:new Fa(this.query,e.tu,a,d,e.mutatedKeys,m===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new av,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ft(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const t=[];return e.forEach(i=>{this.Xa.has(i)||t.push(new ib(i))}),this.Xa.forEach(i=>{e.has(i)||t.push(new rb(i))}),t}cu(e){this.Ya=e.Qs,this.Xa=ft();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Fa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gm="SyncEngine";class HA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class qA{constructor(e){this.key=e,this.hu=!1}}class GA{constructor(e,t,i,o,a,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Vo(h=>E_(h),zd),this.Iu=new Map,this.Eu=new Set,this.du=new Ft(We.comparator),this.Au=new Map,this.Ru=new sm,this.Vu={},this.mu=new Map,this.fu=Va.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KA(n,e,t=!0){const i=ub(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await sb(i,e,t,!0),o}async function WA(n,e){const t=ub(n);await sb(t,e,!0,!1)}async function sb(n,e,t,i){const o=await dA(n.localStore,ki(e)),a=o.targetId,d=n.sharedClientState.addLocalQueryTarget(a,t);let h;return i&&(h=await QA(n,e,a,d==="current",o.resumeToken)),n.isPrimaryClient&&t&&X_(n.remoteStore,o),h}async function QA(n,e,t,i,o){n.pu=(T,C,z)=>async function(K,B,ee,te){let pe=B.view.ru(ee);pe.Cs&&(pe=await tv(K.localStore,B.query,!1).then(({documents:R})=>B.view.ru(R,pe)));const we=te&&te.targetChanges.get(B.targetId),re=te&&te.targetMismatches.get(B.targetId)!=null,ie=B.view.applyChanges(pe,K.isPrimaryClient,we,re);return dv(K,B.targetId,ie.au),ie.snapshot}(n,T,C,z);const a=await tv(n.localStore,e,!0),d=new $A(e,a.Qs),h=d.ru(a.documents),m=bc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),v=d.applyChanges(h,n.isPrimaryClient,m);dv(n,t,v.au);const x=new HA(e,t,d);return n.Tu.set(e,x),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),v.snapshot}async function YA(n,e,t){const i=nt(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter(d=>!zd(d,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await _p(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&cm(i.remoteStore,o.targetId),Ep(i,o.targetId)}).catch(qa)):(Ep(i,o.targetId),await _p(i.localStore,o.targetId,!0))}async function XA(n,e){const t=nt(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),cm(t.remoteStore,i.targetId))}async function JA(n,e,t){const i=sN(n);try{const o=await function(d,h){const m=nt(d),v=Dt.now(),x=h.reduce((z,G)=>z.add(G.key),ft());let T,C;return m.persistence.runTransaction("Locally write mutations","readwrite",z=>{let G=os(),K=ft();return m.Ns.getEntries(z,x).next(B=>{G=B,G.forEach((ee,te)=>{te.isValidDocument()||(K=K.add(ee))})}).next(()=>m.localDocuments.getOverlayedDocuments(z,G)).next(B=>{T=B;const ee=[];for(const te of h){const pe=uC(te,T.get(te.key).overlayedDocument);pe!=null&&ee.push(new Fo(te.key,pe,g_(pe.value.mapValue),Ii.exists(!0)))}return m.mutationQueue.addMutationBatch(z,v,ee,h)}).next(B=>{C=B;const ee=B.applyToLocalDocumentSet(T,K);return m.documentOverlayCache.saveOverlays(z,B.batchId,ee)})}).then(()=>({batchId:C.batchId,changes:k_(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(d,h,m){let v=d.Vu[d.currentUser.toKey()];v||(v=new Ft(ht)),v=v.insert(h,m),d.Vu[d.currentUser.toKey()]=v}(i,o.batchId,t),await Ec(i,o.changes),await Wd(i.remoteStore)}catch(o){const a=pm(o,"Failed to persist write");t.reject(a)}}async function ob(n,e){const t=nt(n);try{const i=await lA(t.localStore,e);e.targetChanges.forEach((o,a)=>{const d=t.Au.get(a);d&&(xt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?xt(d.hu,14607):o.removedDocuments.size>0&&(xt(d.hu,42227),d.hu=!1))}),await Ec(t,i,e)}catch(i){await qa(i)}}function uv(n,e,t){const i=nt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach((a,d)=>{const h=d.view.va(e);h.snapshot&&o.push(h.snapshot)}),function(d,h){const m=nt(d);m.onlineState=h;let v=!1;m.queries.forEach((x,T)=>{for(const C of T.Sa)C.va(h)&&(v=!0)}),v&&mm(m)}(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ZA(n,e,t){const i=nt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let d=new Ft(We.comparator);d=d.insert(a,Gn.newNoDocument(a,et.min()));const h=ft().add(a),m=new qd(et.min(),new Map,new Ft(ht),d,h);await ob(i,m),i.du=i.du.remove(a),i.Au.delete(e),ym(i)}else await _p(i.localStore,e,!1).then(()=>Ep(i,e,t)).catch(qa)}async function eN(n,e){const t=nt(n),i=e.batch.batchId;try{const o=await aA(t.localStore,e);lb(t,i,null),ab(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ec(t,o)}catch(o){await qa(o)}}async function tN(n,e,t){const i=nt(n);try{const o=await function(d,h){const m=nt(d);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let x;return m.mutationQueue.lookupMutationBatch(v,h).next(T=>(xt(T!==null,37113),x=T.keys(),m.mutationQueue.removeMutationBatch(v,T))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,x,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,x)).next(()=>m.localDocuments.getDocuments(v,x))})}(i.localStore,e);lb(i,e,t),ab(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ec(i,o)}catch(o){await qa(o)}}function ab(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function lb(n,e,t){const i=nt(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Ep(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(i=>{n.Ru.containsKey(i)||cb(n,i)})}function cb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(cm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ym(n))}function dv(n,e,t){for(const i of t)i instanceof rb?(n.Ru.addReference(i.key,e),nN(n,i)):i instanceof ib?(Re(gm,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||cb(n,i.key)):Xe(19791,{wu:i})}function nN(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(Re(gm,"New document in limbo: "+t),n.Eu.add(i),ym(n))}function ym(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new We(Vt.fromString(e)),i=n.fu.next();n.Au.set(i,new qA(t)),n.du=n.du.insert(t,i),X_(n.remoteStore,new zs(ki(Zp(t.path)),i,"TargetPurposeLimboResolution",Ld.ce))}}async function Ec(n,e,t){const i=nt(n),o=[],a=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach((h,m)=>{d.push(i.pu(m,e,t).then(v=>{if((v||t)&&i.isPrimaryClient){const x=v?!v.fromCache:t?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,x?"current":"not-current")}if(v){o.push(v);const x=am.As(m.targetId,v);a.push(x)}}))}),await Promise.all(d),i.Pu.H_(o),await async function(m,v){const x=nt(m);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ue.forEach(v,C=>ue.forEach(C.Es,z=>x.persistence.referenceDelegate.addReference(T,C.targetId,z)).next(()=>ue.forEach(C.ds,z=>x.persistence.referenceDelegate.removeReference(T,C.targetId,z)))))}catch(T){if(!Ga(T))throw T;Re(lm,"Failed to update sequence numbers: "+T)}for(const T of v){const C=T.targetId;if(!T.fromCache){const z=x.Ms.get(C),G=z.snapshotVersion,K=z.withLastLimboFreeSnapshotVersion(G);x.Ms=x.Ms.insert(C,K)}}}(i.localStore,a))}async function rN(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Re(gm,"User change. New user:",e.toKey());const i=await K_(t.localStore,e);t.currentUser=e,function(a,d){a.mu.forEach(h=>{h.forEach(m=>{m.reject(new He(fe.CANCELLED,d))})}),a.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ec(t,i.Ls)}}function iN(n,e){const t=nt(n),i=t.Au.get(e);if(i&&i.hu)return ft().add(i.key);{let o=ft();const a=t.Iu.get(e);if(!a)return o;for(const d of a){const h=t.Tu.get(d);o=o.unionWith(h.view.nu)}return o}}function ub(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ob.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZA.bind(null,e),e.Pu.H_=UA.bind(null,e.eventManager),e.Pu.yu=zA.bind(null,e.eventManager),e}function sN(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tN.bind(null,e),e}class xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return oA(this.persistence,new rA,e.initialUser,this.serializer)}Cu(e){return new G_(om.mi,this.serializer)}Du(e){return new fA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xd.provider={build:()=>new xd};class oN extends xd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){xt(this.persistence.referenceDelegate instanceof _d,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new BC(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?wr.withCacheSize(this.cacheSizeBytes):wr.DEFAULT;return new G_(i=>_d.mi(i,t),this.serializer)}}class Tp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rN.bind(null,this.syncEngine),await MA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LA}()}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),i=function(a){return new vA(a)}(e.databaseInfo);return function(a,d,h,m){return new xA(a,d,h,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,a,d,h){return new TA(i,o,a,d,h)}(this.localStore,this.datastore,e.asyncQueue,t=>uv(this.syncEngine,t,0),function(){return iv.v()?new iv:new pA}())}createSyncEngine(e,t){return function(o,a,d,h,m,v,x){const T=new GA(o,a,d,h,m,v);return x&&(T.gu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const i=nt(t);Re(Oo,"RemoteStore shutting down."),i.Ea.add(5),await xc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Tp.provider={build:()=>new Tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="FirestoreClient";class lN{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=qn.UNAUTHENTICATED,this.clientId=Gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async d=>{Re(to,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(i,d=>(Re(to,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pm(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Uf(n,e){n.asyncQueue.verifyOperationInProgress(),Re(to,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await K_(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function hv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await cN(n);Re(to,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>ov(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>ov(e.remoteStore,o)),n._onlineComponents=e}async function cN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(to,"Using user provided OfflineComponentProvider");try{await Uf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===fe.FAILED_PRECONDITION||o.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Da("Error using user provided cache. Falling back to memory cache: "+t),await Uf(n,new xd)}}else Re(to,"Using default OfflineComponentProvider"),await Uf(n,new oN(void 0));return n._offlineComponents}async function db(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(to,"Using user provided OnlineComponentProvider"),await hv(n,n._uninitializedComponentsProvider._online)):(Re(to,"Using default OnlineComponentProvider"),await hv(n,new Tp))),n._onlineComponents}function uN(n){return db(n).then(e=>e.syncEngine)}async function dN(n){const e=await db(n),t=e.eventManager;return t.onListen=KA.bind(null,e.syncEngine),t.onUnlisten=YA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XA.bind(null,e.syncEngine),t}function hN(n,e,t={}){const i=new Ws;return n.asyncQueue.enqueueAndForget(async()=>function(a,d,h,m,v){const x=new aN({next:C=>{x.Nu(),d.enqueueAndForget(()=>FA(a,T));const z=C.docs.has(h);!z&&C.fromCache?v.reject(new He(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&C.fromCache&&m&&m.source==="server"?v.reject(new He(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),T=new BA(Zp(h.path),x,{includeMetadataChanges:!0,qa:!0});return VA(a,T)}(await dN(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="firestore.googleapis.com",pv=!0;class mv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fb,this.ssl=pv}else this.host=e.host,this.ssl=e.ssl??pv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UC)throw new He(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hb(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new He(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new He(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new He(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new h2;switch(i.type){case"firstParty":return new g2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new He(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=fv.get(t);i&&(Re("ComponentProvider","Removing Datastore"),fv.delete(t),i.terminate())}(this),Promise.resolve()}}function fN(n,e,t,i={}){n=Ma(n,vm);const o=za(e),a=n._getSettings(),d={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;o&&(uw(`https://${h}`),dw("Firestore",!0)),a.host!==fb&&a.host!==h&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:h,ssl:o,emulatorOptions:i};if(!Ao(m,d)&&(n._setSettings(m),i.mockUserToken)){let v,x;if(typeof i.mockUserToken=="string")v=i.mockUserToken,x=qn.MOCK_USER;else{v=xT(i.mockUserToken,n._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new He(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new qn(T)}n._authCredentials=new f2(new s_(v,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wm(this.firestore,e,this._query)}}class En{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}toJSON(){return{type:En._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(wc(t,En._jsonSchema))return new En(e,i||null,new We(Vt.fromString(t.referencePath)))}}En._jsonSchemaVersion="firestore/documentReference/1.0",En._jsonSchema={type:en("string",En._jsonSchemaVersion),referencePath:en("string")};class cc extends wm{constructor(e,t,i){super(e,t,Zp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new We(e))}withConverter(e){return new cc(this.firestore,e,this._path)}}function On(n,e,...t){if(n=Nr(n),arguments.length===1&&(e=Gp.newId()),x2("doc","path",e),n instanceof vm){const i=Vt.fromString(e,...t);return A0(i),new En(n,null,new We(i))}{if(!(n instanceof En||n instanceof cc))throw new He(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Vt.fromString(e,...t));return A0(i),new En(n.firestore,n instanceof cc?n.converter:null,new We(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="AsyncQueue";class yv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Q_(this,"async_queue_retry"),this._c=()=>{const i=Ff();i&&Re(gv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ws;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ga(e))throw e;Re(gv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,ss("INTERNAL UNHANDLED ERROR: ",vv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=fm.createAndSchedule(this,e,t,i,a=>this.hc(a));return this.tc.push(o),o}uc(){this.nc&&Xe(47125,{Pc:vv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function vv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Qd extends vm{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new yv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yv(e),this._firestoreClient=void 0,await e}}}function pN(n,e){const t=typeof n=="object"?n:mw(),i=typeof n=="string"?n:fd,o=jp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=_T("firestore");a&&fN(o,...a)}return o}function pb(n){if(n._terminated)throw new He(fe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mN(n),n._firestoreClient}function mN(n){const e=n._freezeSettings(),t=function(o,a,d,h){return new O2(o,a,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,hb(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new lN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(o){const a=o?._online.build();return{_offline:o?._offline.build(a),_online:a}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kr(Mn.fromBase64String(e))}catch(t){throw new He(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kr(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wc(e,Kr._jsonSchema))return Kr.fromBase64String(e.bytes)}}Kr._jsonSchemaVersion="firestore/bytes/1.0",Kr._jsonSchema={type:en("string",Kr._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new He(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(wc(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:en("string",Ai._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wc(e,Ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ni(e.vectorValues);throw new He(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:en("string",Ni._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=/^__.*__$/;class yN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new _c(e,this.data,t,this.fieldTransforms)}}function gb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe(40011,{Ac:n})}}class bm{constructor(e,t,i,o,a,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ed(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gb(this.Ac)&&gN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vN{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gd(e)}Cc(e,t,i,o=!1){return new bm({Ac:e,methodName:t,Dc:i,path:Dn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wN(n){const e=n._freezeSettings(),t=Gd(n._databaseId);return new vN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _N(n,e,t,i,o,a={}){const d=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);_b("Data must be an object, but it was:",d,i);const h=vb(i,d);let m,v;if(a.merge)m=new li(d.fieldMask),v=d.fieldTransforms;else if(a.mergeFields){const x=[];for(const T of a.mergeFields){const C=bN(e,T,t);if(!d.contains(C))throw new He(fe.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);EN(x,C)||x.push(C)}m=new li(x),v=d.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,v=d.fieldTransforms;return new yN(new Gr(h),m,v)}function yb(n,e){if(wb(n=Nr(n)))return _b("Unsupported field value:",e,n),vb(n,e);if(n instanceof mb)return function(i,o){if(!gb(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,o){const a=[];let d=0;for(const h of i){let m=yb(h,o.wc(d));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),d++}return{arrayValue:{values:a}}}(n,e)}return function(i,o){if((i=Nr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return iC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Dt.fromDate(i);return{timestampValue:wd(o.serializer,a)}}if(i instanceof Dt){const a=new Dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wd(o.serializer,a)}}if(i instanceof Ai)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kr)return{bytesValue:V_(o.serializer,i._byteString)};if(i instanceof En){const a=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(a))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:im(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ni)return function(d,h){return{mapValue:{fields:{[p_]:{stringValue:m_},[pd]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw h.Sc("VectorValues must only contain numeric values.");return em(h.serializer,v)})}}}}}}(i,o);throw o.Sc(`Unsupported field value: ${Kp(i)}`)}(n,e)}function vb(n,e){const t={};return l_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lo(n,(i,o)=>{const a=yb(o,e.mc(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function wb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Dt||n instanceof Ai||n instanceof Kr||n instanceof En||n instanceof mb||n instanceof Ni)}function _b(n,e,t){if(!wb(t)||!o_(t)){const i=Kp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function bN(n,e,t){if((e=Nr(e))instanceof _m)return e._internalPath;if(typeof e=="string")return bb(n,e);throw Ed("Field path arguments must be of type string or ",n,!1,void 0,t)}const xN=new RegExp("[~\\*/\\[\\]]");function bb(n,e,t){if(e.search(xN)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _m(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ed(n,e,t,i,o){const a=i&&!i.isEmpty(),d=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||d)&&(m+=" (found",a&&(m+=` in field ${i}`),d&&(m+=` in document ${o}`),m+=")"),new He(fe.INVALID_ARGUMENT,h+n+m)}function EN(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Eb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TN extends xb{data(){return super.data()}}function Eb(n,e){return typeof e=="string"?bb(n,e):e instanceof _m?e._internalPath:e._delegate._internalPath}class SN{convertValue(e,t="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Lo(e,(o,a)=>{i[o]=this.convertValue(a,t)}),i}convertVectorValue(e){const t=e.fields?.[pd].arrayValue?.values?.map(i=>Qt(i.doubleValue));return new Ni(t)}convertGeoPoint(e){return new Ai(Qt(e.latitude),Qt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Fd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const t=Xs(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Vt.fromString(e);xt(H_(i),9688,{name:e});const o=new sc(i.get(1),i.get(3)),a=new We(i.popFirst(5));return o.isEqual(t)||ss(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Co extends xb{constructor(e,t,i,o,a,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Eb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Co._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Co._jsonSchemaVersion="firestore/documentSnapshot/1.0",Co._jsonSchema={type:en("string",Co._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};class td extends Co{data(e={}){return super.data(e)}}class Kl{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ol(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new td(this._firestore,this._userDataWriter,i.key,i,new Ol(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(h=>{const m=new td(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Ol(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const m=new td(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Ol(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,x=-1;return h.type!==0&&(v=d.indexOf(h.doc.key),d=d.delete(h.doc.key)),h.type!==1&&(d=d.add(h.doc),x=d.indexOf(h.doc.key)),{type:IN(h.type),doc:m,oldIndex:v,newIndex:x}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(n){n=Ma(n,En);const e=Ma(n.firestore,Qd);return hN(pb(e),n._key).then(t=>AN(e,n,t))}Kl._jsonSchemaVersion="firestore/querySnapshot/1.0",Kl._jsonSchema={type:en("string",Kl._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};class CN extends SN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function uc(n,e,t){n=Ma(n,En);const i=Ma(n.firestore,Qd),o=kN(n.converter,e,t);return Tb(i,[_N(wN(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Ii.none())])}function To(n){return Tb(Ma(n.firestore,Qd),[new tm(n._key,Ii.none())])}function Tb(n,e){return function(i,o){const a=new Ws;return i.asyncQueue.enqueueAndForget(async()=>JA(await uN(i),o,a)),a.promise}(pb(n),e)}function AN(n,e,t){const i=t.docs.get(e._key),o=new CN(n);return new Co(n,o,e._key,i,new Ol(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ha=o})(Ba),Ra(new No("firestore",(i,{instanceIdentifier:o,options:a})=>{const d=i.getProvider("app").getImmediate(),h=new Qd(new p2(i.getProvider("auth-internal")),new y2(d,i.getProvider("app-check-internal")),function(v,x){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new He(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sc(v.options.projectId,x)}(d,o),d);return a={useFetchStreams:t,...a},h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Gs(S0,k0,e),Gs(S0,k0,"esm2020")})();const NN={};let Ms=null,Wl=null,Ql=null;const kl={apiKey:"AIzaSyCPb1KXH-w5kcTdC9YSFmmnnhSrIs5Q-Ls",authDomain:"promptide-95e5f.firebaseapp.com",projectId:"promptide-95e5f",storageBucket:"promptide-95e5f.firebasestorage.app",messagingSenderId:"806172071595",appId:"1:806172071595:web:b50b38f8d00dbd3813c9ee"};function ui(){return Ms?{app:Ms,auth:Wl,db:Ql}:NN?.VITE_FORCE_LOCAL==="1"?(typeof console<"u"&&console.warn("[PromptIDE] Firebase disabled via VITE_FORCE_LOCAL=1"),null):kl.apiKey&&kl.authDomain&&kl.projectId&&kl.appId?(Ms=pw(kl),Wl=u2(Ms),Ql=pN(Ms),{app:Ms,auth:Wl,db:Ql}):null}function rr(){return Ms&&Wl&&Ql?{app:Ms,auth:Wl,db:Ql}:null}const Sb=H.createContext(void 0);function PN(n,e){try{const t=localStorage.getItem(n);return t?JSON.parse(t):e}catch{return e}}function RN(n,e){try{localStorage.setItem(n,JSON.stringify(e))}catch{}}function Tc(){const n=H.useContext(Sb);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function DN({children:n}){const[e,t]=H.useState(null),[i,o]=H.useState(null),[a,d]=H.useState(!0);H.useEffect(()=>{const C=ui();if(C){const z=Jk(C.auth,G=>{if(G){const K={id:G.uid,email:G.email||""};t(K);const B=PN(`profile_${K.id}`,null)||{id:K.id,user_id:K.id,settings:{theme:"dark",editor_font_size:14,auto_save:!0,show_line_numbers:!0,word_wrap:!0},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};o(B)}else t(null),o(null);d(!1)});return()=>z()}else t(null),o(null),d(!1)},[]);async function h(C,z){const G=rr();if(G)try{await Qk(G.auth,C,z),ut.success("Erfolgreich angemeldet!");return}catch(K){const B=K?.code||"auth/unknown",ee=B==="auth/invalid-credential"||B==="auth/wrong-password"?"E-Mail oder Passwort ist falsch.":B==="auth/user-not-found"?"Kein Benutzer mit dieser E-Mail gefunden.":B==="auth/too-many-requests"?"Zu viele Versuche. Bitte später erneut versuchen.":"Anmeldung fehlgeschlagen.";throw ut.error(ee),K}ut.error("Cloud-only: Bitte Firebase in .env.local konfigurieren und erneut versuchen.")}async function m(C,z,G){const K=rr();if(K)try{await Wk(K.auth,C,z),ut.success("Registrierung erfolgreich!");return}catch(B){const ee=B?.code||"auth/unknown",te=ee==="auth/email-already-in-use"?"Diese E-Mail wird bereits verwendet.":ee==="auth/invalid-email"?"Ungültige E-Mail-Adresse.":ee==="auth/weak-password"?"Das Passwort ist zu schwach.":"Registrierung fehlgeschlagen.";throw ut.error(te),B}ut.error("Cloud-only: Bitte Firebase in .env.local konfigurieren und erneut versuchen.")}async function v(){const C=rr();if(C){await Zk(C.auth),ut.success("Erfolgreich abgemeldet!");return}t(null),o(null),ut.success("Erfolgreich abgemeldet!")}async function x(C){if(!e||!i)return;const z={...i,...C,settings:{...i.settings||{},...C.settings||{}},updated_at:new Date().toISOString()};o(z),RN(`profile_${e.id}`,z),ut.success("Profil erfolgreich aktualisiert!")}const T={user:e,profile:i,loading:a,signIn:h,signUp:m,signOut:v,updateProfile:x};return f.jsx(Sb.Provider,{value:T,children:n})}function kb(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=kb(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function ON(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=kb(n))&&(i&&(i+=" "),i+=e);return i}const xm="-",MN=n=>{const e=LN(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:d=>{const h=d.split(xm);return h[0]===""&&h.length!==1&&h.shift(),Ib(h,e)||jN(d)},getConflictingClassGroupIds:(d,h)=>{const m=t[d]||[];return h&&i[d]?[...m,...i[d]]:m}}},Ib=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),o=i?Ib(n.slice(1),i):void 0;if(o)return o;if(e.validators.length===0)return;const a=n.join(xm);return e.validators.find(({validator:d})=>d(a))?.classGroupId},wv=/^\[(.+)\]$/,jN=n=>{if(wv.test(n)){const e=wv.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},LN=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return FN(Object.entries(n.classGroups),t).forEach(([a,d])=>{Sp(d,i,a,e)}),i},Sp=(n,e,t,i)=>{n.forEach(o=>{if(typeof o=="string"){const a=o===""?e:_v(e,o);a.classGroupId=t;return}if(typeof o=="function"){if(VN(o)){Sp(o(i),e,t,i);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([a,d])=>{Sp(d,_v(e,a),t,i)})})},_v=(n,e)=>{let t=n;return e.split(xm).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},VN=n=>n.isThemeGetter,FN=(n,e)=>e?n.map(([t,i])=>{const o=i.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([d,h])=>[e+d,h])):a);return[t,o]}):n,UN=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const o=(a,d)=>{t.set(a,d),e++,e>n&&(e=0,i=t,t=new Map)};return{get(a){let d=t.get(a);if(d!==void 0)return d;if((d=i.get(a))!==void 0)return o(a,d),d},set(a,d){t.has(a)?t.set(a,d):o(a,d)}}},Cb="!",zN=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,o=e[0],a=e.length,d=h=>{const m=[];let v=0,x=0,T;for(let B=0;B<h.length;B++){let ee=h[B];if(v===0){if(ee===o&&(i||h.slice(B,B+a)===e)){m.push(h.slice(x,B)),x=B+a;continue}if(ee==="/"){T=B;continue}}ee==="["?v++:ee==="]"&&v--}const C=m.length===0?h:h.substring(x),z=C.startsWith(Cb),G=z?C.substring(1):C,K=T&&T>x?T-x:void 0;return{modifiers:m,hasImportantModifier:z,baseClassName:G,maybePostfixModifierPosition:K}};return t?h=>t({className:h,parseClassName:d}):d},BN=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},$N=n=>({cache:UN(n.cacheSize),parseClassName:zN(n),...MN(n)}),HN=/\s+/,qN=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:o}=e,a=[],d=n.trim().split(HN);let h="";for(let m=d.length-1;m>=0;m-=1){const v=d[m],{modifiers:x,hasImportantModifier:T,baseClassName:C,maybePostfixModifierPosition:z}=t(v);let G=!!z,K=i(G?C.substring(0,z):C);if(!K){if(!G){h=v+(h.length>0?" "+h:h);continue}if(K=i(C),!K){h=v+(h.length>0?" "+h:h);continue}G=!1}const B=BN(x).join(":"),ee=T?B+Cb:B,te=ee+K;if(a.includes(te))continue;a.push(te);const pe=o(K,G);for(let we=0;we<pe.length;++we){const re=pe[we];a.push(ee+re)}h=v+(h.length>0?" "+h:h)}return h};function GN(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Ab(e))&&(i&&(i+=" "),i+=t);return i}const Ab=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=Ab(n[i]))&&(t&&(t+=" "),t+=e);return t};function KN(n,...e){let t,i,o,a=d;function d(m){const v=e.reduce((x,T)=>T(x),n());return t=$N(v),i=t.cache.get,o=t.cache.set,a=h,h(m)}function h(m){const v=i(m);if(v)return v;const x=qN(m,t);return o(m,x),x}return function(){return a(GN.apply(null,arguments))}}const Rt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Nb=/^\[(?:([a-z-]+):)?(.+)\]$/i,WN=/^\d+\/\d+$/,QN=new Set(["px","full","screen"]),YN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,XN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ZN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xi=n=>Pa(n)||QN.has(n)||WN.test(n),Ds=n=>Wa(n,"length",lP),Pa=n=>!!n&&!Number.isNaN(Number(n)),zf=n=>Wa(n,"number",Pa),Il=n=>!!n&&Number.isInteger(Number(n)),tP=n=>n.endsWith("%")&&Pa(n.slice(0,-1)),it=n=>Nb.test(n),Os=n=>YN.test(n),nP=new Set(["length","size","percentage"]),rP=n=>Wa(n,nP,Pb),iP=n=>Wa(n,"position",Pb),sP=new Set(["image","url"]),oP=n=>Wa(n,sP,uP),aP=n=>Wa(n,"",cP),Cl=()=>!0,Wa=(n,e,t)=>{const i=Nb.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},lP=n=>XN.test(n)&&!JN.test(n),Pb=()=>!1,cP=n=>ZN.test(n),uP=n=>eP.test(n),dP=()=>{const n=Rt("colors"),e=Rt("spacing"),t=Rt("blur"),i=Rt("brightness"),o=Rt("borderColor"),a=Rt("borderRadius"),d=Rt("borderSpacing"),h=Rt("borderWidth"),m=Rt("contrast"),v=Rt("grayscale"),x=Rt("hueRotate"),T=Rt("invert"),C=Rt("gap"),z=Rt("gradientColorStops"),G=Rt("gradientColorStopPositions"),K=Rt("inset"),B=Rt("margin"),ee=Rt("opacity"),te=Rt("padding"),pe=Rt("saturate"),we=Rt("scale"),re=Rt("sepia"),ie=Rt("skew"),R=Rt("space"),k=Rt("translate"),A=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",it,e],N=()=>[it,e],P=()=>["",Xi,Ds],Ae=()=>["auto",Pa,it],De=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Be=()=>["solid","dashed","dotted","double","none"],qe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ge=()=>["start","end","center","between","around","evenly","stretch"],Te=()=>["","0",it],_e=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[Pa,it];return{cacheSize:500,separator:":",theme:{colors:[Cl],spacing:[Xi,Ds],blur:["none","",Os,it],brightness:F(),borderColor:[n],borderRadius:["none","","full",Os,it],borderSpacing:N(),borderWidth:P(),contrast:F(),grayscale:Te(),hueRotate:F(),invert:Te(),gap:N(),gradientColorStops:[n],gradientColorStopPositions:[tP,Ds],inset:D(),margin:D(),opacity:F(),padding:N(),saturate:F(),scale:F(),sepia:Te(),skew:F(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",it]}],container:["container"],columns:[{columns:[Os]}],"break-after":[{"break-after":_e()}],"break-before":[{"break-before":_e()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...De(),it]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[K]}],"inset-x":[{"inset-x":[K]}],"inset-y":[{"inset-y":[K]}],start:[{start:[K]}],end:[{end:[K]}],top:[{top:[K]}],right:[{right:[K]}],bottom:[{bottom:[K]}],left:[{left:[K]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Il,it]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",it]}],grow:[{grow:Te()}],shrink:[{shrink:Te()}],order:[{order:["first","last","none",Il,it]}],"grid-cols":[{"grid-cols":[Cl]}],"col-start-end":[{col:["auto",{span:["full",Il,it]},it]}],"col-start":[{"col-start":Ae()}],"col-end":[{"col-end":Ae()}],"grid-rows":[{"grid-rows":[Cl]}],"row-start-end":[{row:["auto",{span:[Il,it]},it]}],"row-start":[{"row-start":Ae()}],"row-end":[{"row-end":Ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",it]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",it]}],gap:[{gap:[C]}],"gap-x":[{"gap-x":[C]}],"gap-y":[{"gap-y":[C]}],"justify-content":[{justify:["normal",...ge()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ge(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ge(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[te]}],px:[{px:[te]}],py:[{py:[te]}],ps:[{ps:[te]}],pe:[{pe:[te]}],pt:[{pt:[te]}],pr:[{pr:[te]}],pb:[{pb:[te]}],pl:[{pl:[te]}],m:[{m:[B]}],mx:[{mx:[B]}],my:[{my:[B]}],ms:[{ms:[B]}],me:[{me:[B]}],mt:[{mt:[B]}],mr:[{mr:[B]}],mb:[{mb:[B]}],ml:[{ml:[B]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",it,e]}],"min-w":[{"min-w":[it,e,"min","max","fit"]}],"max-w":[{"max-w":[it,e,"none","full","min","max","fit","prose",{screen:[Os]},Os]}],h:[{h:[it,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[it,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[it,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[it,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Os,Ds]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zf]}],"font-family":[{font:[Cl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",it]}],"line-clamp":[{"line-clamp":["none",Pa,zf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xi,it]}],"list-image":[{"list-image":["none",it]}],"list-style-type":[{list:["none","disc","decimal",it]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[ee]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[ee]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Be(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xi,Ds]}],"underline-offset":[{"underline-offset":["auto",Xi,it]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",it]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",it]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[ee]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...De(),iP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oP]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[G]}],"gradient-via-pos":[{via:[G]}],"gradient-to-pos":[{to:[G]}],"gradient-from":[{from:[z]}],"gradient-via":[{via:[z]}],"gradient-to":[{to:[z]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[ee]}],"border-style":[{border:[...Be(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[ee]}],"divide-style":[{divide:Be()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...Be()]}],"outline-offset":[{"outline-offset":[Xi,it]}],"outline-w":[{outline:[Xi,Ds]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[ee]}],"ring-offset-w":[{"ring-offset":[Xi,Ds]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Os,aP]}],"shadow-color":[{shadow:[Cl]}],opacity:[{opacity:[ee]}],"mix-blend":[{"mix-blend":[...qe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":qe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[m]}],"drop-shadow":[{"drop-shadow":["","none",Os,it]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[T]}],saturate:[{saturate:[pe]}],sepia:[{sepia:[re]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[m]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[T]}],"backdrop-opacity":[{"backdrop-opacity":[ee]}],"backdrop-saturate":[{"backdrop-saturate":[pe]}],"backdrop-sepia":[{"backdrop-sepia":[re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",it]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",it]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",it]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[we]}],"scale-x":[{"scale-x":[we]}],"scale-y":[{"scale-y":[we]}],rotate:[{rotate:[Il,it]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[ie]}],"skew-y":[{"skew-y":[ie]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",it]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",it]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",it]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Xi,Ds,zf]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hP=KN(dP);function dn(...n){return hP(ON(n))}function Vu(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bf={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var bv;function fP(){return bv||(bv=1,function(n,e){(function(t){n.exports=t()})(function(){return function t(i,o,a){function d(v,x){if(!o[v]){if(!i[v]){var T=typeof Vu=="function"&&Vu;if(!x&&T)return T(v,!0);if(h)return h(v,!0);var C=new Error("Cannot find module '"+v+"'");throw C.code="MODULE_NOT_FOUND",C}var z=o[v]={exports:{}};i[v][0].call(z.exports,function(G){var K=i[v][1][G];return d(K||G)},z,z.exports,t,i,o,a)}return o[v].exports}for(var h=typeof Vu=="function"&&Vu,m=0;m<a.length;m++)d(a[m]);return d}({1:[function(t,i,o){(function(a){var d=a.MutationObserver||a.WebKitMutationObserver,h;if(d){var m=0,v=new d(G),x=a.document.createTextNode("");v.observe(x,{characterData:!0}),h=function(){x.data=m=++m%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var T=new a.MessageChannel;T.port1.onmessage=G,h=function(){T.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?h=function(){var B=a.document.createElement("script");B.onreadystatechange=function(){G(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},a.document.documentElement.appendChild(B)}:h=function(){setTimeout(G,0)};var C,z=[];function G(){C=!0;for(var B,ee,te=z.length;te;){for(ee=z,z=[],B=-1;++B<te;)ee[B]();te=z.length}C=!1}i.exports=K;function K(B){z.push(B)===1&&!C&&h()}}).call(this,typeof Cu<"u"?Cu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,i,o){var a=t(1);function d(){}var h={},m=["REJECTED"],v=["FULFILLED"],x=["PENDING"];i.exports=T;function T(re){if(typeof re!="function")throw new TypeError("resolver must be a function");this.state=x,this.queue=[],this.outcome=void 0,re!==d&&K(this,re)}T.prototype.catch=function(re){return this.then(null,re)},T.prototype.then=function(re,ie){if(typeof re!="function"&&this.state===v||typeof ie!="function"&&this.state===m)return this;var R=new this.constructor(d);if(this.state!==x){var k=this.state===v?re:ie;z(R,k,this.outcome)}else this.queue.push(new C(R,re,ie));return R};function C(re,ie,R){this.promise=re,typeof ie=="function"&&(this.onFulfilled=ie,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}C.prototype.callFulfilled=function(re){h.resolve(this.promise,re)},C.prototype.otherCallFulfilled=function(re){z(this.promise,this.onFulfilled,re)},C.prototype.callRejected=function(re){h.reject(this.promise,re)},C.prototype.otherCallRejected=function(re){z(this.promise,this.onRejected,re)};function z(re,ie,R){a(function(){var k;try{k=ie(R)}catch(A){return h.reject(re,A)}k===re?h.reject(re,new TypeError("Cannot resolve promise with itself")):h.resolve(re,k)})}h.resolve=function(re,ie){var R=B(G,ie);if(R.status==="error")return h.reject(re,R.value);var k=R.value;if(k)K(re,k);else{re.state=v,re.outcome=ie;for(var A=-1,O=re.queue.length;++A<O;)re.queue[A].callFulfilled(ie)}return re},h.reject=function(re,ie){re.state=m,re.outcome=ie;for(var R=-1,k=re.queue.length;++R<k;)re.queue[R].callRejected(ie);return re};function G(re){var ie=re&&re.then;if(re&&(typeof re=="object"||typeof re=="function")&&typeof ie=="function")return function(){ie.apply(re,arguments)}}function K(re,ie){var R=!1;function k(N){R||(R=!0,h.reject(re,N))}function A(N){R||(R=!0,h.resolve(re,N))}function O(){ie(A,k)}var D=B(O);D.status==="error"&&k(D.value)}function B(re,ie){var R={};try{R.value=re(ie),R.status="success"}catch(k){R.status="error",R.value=k}return R}T.resolve=ee;function ee(re){return re instanceof this?re:h.resolve(new this(d),re)}T.reject=te;function te(re){var ie=new this(d);return h.reject(ie,re)}T.all=pe;function pe(re){var ie=this;if(Object.prototype.toString.call(re)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=re.length,k=!1;if(!R)return this.resolve([]);for(var A=new Array(R),O=0,D=-1,N=new this(d);++D<R;)P(re[D],D);return N;function P(Ae,De){ie.resolve(Ae).then(Be,function(qe){k||(k=!0,h.reject(N,qe))});function Be(qe){A[De]=qe,++O===R&&!k&&(k=!0,h.resolve(N,A))}}}T.race=we;function we(re){var ie=this;if(Object.prototype.toString.call(re)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=re.length,k=!1;if(!R)return this.resolve([]);for(var A=-1,O=new this(d);++A<R;)D(re[A]);return O;function D(N){ie.resolve(N).then(function(P){k||(k=!0,h.resolve(O,P))},function(P){k||(k=!0,h.reject(O,P))})}}},{1:1}],3:[function(t,i,o){(function(a){typeof a.Promise!="function"&&(a.Promise=t(2))}).call(this,typeof Cu<"u"?Cu:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,i,o){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w};function d(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function h(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var m=h();function v(){try{if(!m||!m.open)return!1;var w=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),S=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!w||S)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function x(w,S){w=w||[],S=S||{};try{return new Blob(w,S)}catch(L){if(L.name!=="TypeError")throw L;for(var b=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,M=new b,V=0;V<w.length;V+=1)M.append(w[V]);return M.getBlob(S.type)}}typeof Promise>"u"&&t(3);var T=Promise;function C(w,S){S&&w.then(function(b){S(null,b)},function(b){S(b)})}function z(w,S,b){typeof S=="function"&&w.then(S),typeof b=="function"&&w.catch(b)}function G(w){return typeof w!="string"&&(console.warn(w+" used as a key, but it is not a string."),w=String(w)),w}function K(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var B="local-forage-detect-blob-support",ee=void 0,te={},pe=Object.prototype.toString,we="readonly",re="readwrite";function ie(w){for(var S=w.length,b=new ArrayBuffer(S),M=new Uint8Array(b),V=0;V<S;V++)M[V]=w.charCodeAt(V);return b}function R(w){return new T(function(S){var b=w.transaction(B,re),M=x([""]);b.objectStore(B).put(M,"key"),b.onabort=function(V){V.preventDefault(),V.stopPropagation(),S(!1)},b.oncomplete=function(){var V=navigator.userAgent.match(/Chrome\/(\d+)/),L=navigator.userAgent.match(/Edge\//);S(L||!V||parseInt(V[1],10)>=43)}}).catch(function(){return!1})}function k(w){return typeof ee=="boolean"?T.resolve(ee):R(w).then(function(S){return ee=S,ee})}function A(w){var S=te[w.name],b={};b.promise=new T(function(M,V){b.resolve=M,b.reject=V}),S.deferredOperations.push(b),S.dbReady?S.dbReady=S.dbReady.then(function(){return b.promise}):S.dbReady=b.promise}function O(w){var S=te[w.name],b=S.deferredOperations.pop();if(b)return b.resolve(),b.promise}function D(w,S){var b=te[w.name],M=b.deferredOperations.pop();if(M)return M.reject(S),M.promise}function N(w,S){return new T(function(b,M){if(te[w.name]=te[w.name]||se(),w.db)if(S)A(w),w.db.close();else return b(w.db);var V=[w.name];S&&V.push(w.version);var L=m.open.apply(m,V);S&&(L.onupgradeneeded=function(J){var oe=L.result;try{oe.createObjectStore(w.storeName),J.oldVersion<=1&&oe.createObjectStore(B)}catch(ae){if(ae.name==="ConstraintError")console.warn('The database "'+w.name+'" has been upgraded from version '+J.oldVersion+" to version "+J.newVersion+', but the storage "'+w.storeName+'" already exists.');else throw ae}}),L.onerror=function(J){J.preventDefault(),M(L.error)},L.onsuccess=function(){var J=L.result;J.onversionchange=function(oe){oe.target.close()},b(J),O(w)}})}function P(w){return N(w,!1)}function Ae(w){return N(w,!0)}function De(w,S){if(!w.db)return!0;var b=!w.db.objectStoreNames.contains(w.storeName),M=w.version<w.db.version,V=w.version>w.db.version;if(M&&(w.version!==S&&console.warn('The database "'+w.name+`" can't be downgraded from version `+w.db.version+" to version "+w.version+"."),w.version=w.db.version),V||b){if(b){var L=w.db.version+1;L>w.version&&(w.version=L)}return!0}return!1}function Be(w){return new T(function(S,b){var M=new FileReader;M.onerror=b,M.onloadend=function(V){var L=btoa(V.target.result||"");S({__local_forage_encoded_blob:!0,data:L,type:w.type})},M.readAsBinaryString(w)})}function qe(w){var S=ie(atob(w.data));return x([S],{type:w.type})}function ge(w){return w&&w.__local_forage_encoded_blob}function Te(w){var S=this,b=S._initReady().then(function(){var M=te[S._dbInfo.name];if(M&&M.dbReady)return M.dbReady});return z(b,w,w),b}function _e(w){A(w);for(var S=te[w.name],b=S.forages,M=0;M<b.length;M++){var V=b[M];V._dbInfo.db&&(V._dbInfo.db.close(),V._dbInfo.db=null)}return w.db=null,P(w).then(function(L){return w.db=L,De(w)?Ae(w):L}).then(function(L){w.db=S.db=L;for(var J=0;J<b.length;J++)b[J]._dbInfo.db=L}).catch(function(L){throw D(w,L),L})}function F(w,S,b,M){M===void 0&&(M=1);try{var V=w.db.transaction(w.storeName,S);b(null,V)}catch(L){if(M>0&&(!w.db||L.name==="InvalidStateError"||L.name==="NotFoundError"))return T.resolve().then(function(){if(!w.db||L.name==="NotFoundError"&&!w.db.objectStoreNames.contains(w.storeName)&&w.version<=w.db.version)return w.db&&(w.version=w.db.version+1),Ae(w)}).then(function(){return _e(w).then(function(){F(w,S,b,M-1)})}).catch(b);b(L)}}function se(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ie(w){var S=this,b={db:null};if(w)for(var M in w)b[M]=w[M];var V=te[b.name];V||(V=se(),te[b.name]=V),V.forages.push(S),S._initReady||(S._initReady=S.ready,S.ready=Te);var L=[];function J(){return T.resolve()}for(var oe=0;oe<V.forages.length;oe++){var ae=V.forages[oe];ae!==S&&L.push(ae._initReady().catch(J))}var le=V.forages.slice(0);return T.all(L).then(function(){return b.db=V.db,P(b)}).then(function(ce){return b.db=ce,De(b,S._defaultConfig.version)?Ae(b):ce}).then(function(ce){b.db=V.db=ce,S._dbInfo=b;for(var Ee=0;Ee<le.length;Ee++){var Me=le[Ee];Me!==S&&(Me._dbInfo.db=b.db,Me._dbInfo.version=b.version)}})}function Qe(w,S){var b=this;w=G(w);var M=new T(function(V,L){b.ready().then(function(){F(b._dbInfo,we,function(J,oe){if(J)return L(J);try{var ae=oe.objectStore(b._dbInfo.storeName),le=ae.get(w);le.onsuccess=function(){var ce=le.result;ce===void 0&&(ce=null),ge(ce)&&(ce=qe(ce)),V(ce)},le.onerror=function(){L(le.error)}}catch(ce){L(ce)}})}).catch(L)});return C(M,S),M}function Je(w,S){var b=this,M=new T(function(V,L){b.ready().then(function(){F(b._dbInfo,we,function(J,oe){if(J)return L(J);try{var ae=oe.objectStore(b._dbInfo.storeName),le=ae.openCursor(),ce=1;le.onsuccess=function(){var Ee=le.result;if(Ee){var Me=Ee.value;ge(Me)&&(Me=qe(Me));var Pe=w(Me,Ee.key,ce++);Pe!==void 0?V(Pe):Ee.continue()}else V()},le.onerror=function(){L(le.error)}}catch(Ee){L(Ee)}})}).catch(L)});return C(M,S),M}function st(w,S,b){var M=this;w=G(w);var V=new T(function(L,J){var oe;M.ready().then(function(){return oe=M._dbInfo,pe.call(S)==="[object Blob]"?k(oe.db).then(function(ae){return ae?S:Be(S)}):S}).then(function(ae){F(M._dbInfo,re,function(le,ce){if(le)return J(le);try{var Ee=ce.objectStore(M._dbInfo.storeName);ae===null&&(ae=void 0);var Me=Ee.put(ae,w);ce.oncomplete=function(){ae===void 0&&(ae=null),L(ae)},ce.onabort=ce.onerror=function(){var Pe=Me.error?Me.error:Me.transaction.error;J(Pe)}}catch(Pe){J(Pe)}})}).catch(J)});return C(V,b),V}function tt(w,S){var b=this;w=G(w);var M=new T(function(V,L){b.ready().then(function(){F(b._dbInfo,re,function(J,oe){if(J)return L(J);try{var ae=oe.objectStore(b._dbInfo.storeName),le=ae.delete(w);oe.oncomplete=function(){V()},oe.onerror=function(){L(le.error)},oe.onabort=function(){var ce=le.error?le.error:le.transaction.error;L(ce)}}catch(ce){L(ce)}})}).catch(L)});return C(M,S),M}function at(w){var S=this,b=new T(function(M,V){S.ready().then(function(){F(S._dbInfo,re,function(L,J){if(L)return V(L);try{var oe=J.objectStore(S._dbInfo.storeName),ae=oe.clear();J.oncomplete=function(){M()},J.onabort=J.onerror=function(){var le=ae.error?ae.error:ae.transaction.error;V(le)}}catch(le){V(le)}})}).catch(V)});return C(b,w),b}function bt(w){var S=this,b=new T(function(M,V){S.ready().then(function(){F(S._dbInfo,we,function(L,J){if(L)return V(L);try{var oe=J.objectStore(S._dbInfo.storeName),ae=oe.count();ae.onsuccess=function(){M(ae.result)},ae.onerror=function(){V(ae.error)}}catch(le){V(le)}})}).catch(V)});return C(b,w),b}function It(w,S){var b=this,M=new T(function(V,L){if(w<0){V(null);return}b.ready().then(function(){F(b._dbInfo,we,function(J,oe){if(J)return L(J);try{var ae=oe.objectStore(b._dbInfo.storeName),le=!1,ce=ae.openKeyCursor();ce.onsuccess=function(){var Ee=ce.result;if(!Ee){V(null);return}w===0||le?V(Ee.key):(le=!0,Ee.advance(w))},ce.onerror=function(){L(ce.error)}}catch(Ee){L(Ee)}})}).catch(L)});return C(M,S),M}function Ut(w){var S=this,b=new T(function(M,V){S.ready().then(function(){F(S._dbInfo,we,function(L,J){if(L)return V(L);try{var oe=J.objectStore(S._dbInfo.storeName),ae=oe.openKeyCursor(),le=[];ae.onsuccess=function(){var ce=ae.result;if(!ce){M(le);return}le.push(ce.key),ce.continue()},ae.onerror=function(){V(ae.error)}}catch(ce){V(ce)}})}).catch(V)});return C(b,w),b}function Wn(w,S){S=K.apply(this,arguments);var b=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||b.name,w.storeName=w.storeName||b.storeName);var M=this,V;if(!w.name)V=T.reject("Invalid arguments");else{var L=w.name===b.name&&M._dbInfo.db,J=L?T.resolve(M._dbInfo.db):P(w).then(function(oe){var ae=te[w.name],le=ae.forages;ae.db=oe;for(var ce=0;ce<le.length;ce++)le[ce]._dbInfo.db=oe;return oe});w.storeName?V=J.then(function(oe){if(oe.objectStoreNames.contains(w.storeName)){var ae=oe.version+1;A(w);var le=te[w.name],ce=le.forages;oe.close();for(var Ee=0;Ee<ce.length;Ee++){var Me=ce[Ee];Me._dbInfo.db=null,Me._dbInfo.version=ae}var Pe=new T(function($e,Le){var rt=m.open(w.name,ae);rt.onerror=function(Ht){var on=rt.result;on.close(),Le(Ht)},rt.onupgradeneeded=function(){var Ht=rt.result;Ht.deleteObjectStore(w.storeName)},rt.onsuccess=function(){var Ht=rt.result;Ht.close(),$e(Ht)}});return Pe.then(function($e){le.db=$e;for(var Le=0;Le<ce.length;Le++){var rt=ce[Le];rt._dbInfo.db=$e,O(rt._dbInfo)}}).catch(function($e){throw(D(w,$e)||T.resolve()).catch(function(){}),$e})}}):V=J.then(function(oe){A(w);var ae=te[w.name],le=ae.forages;oe.close();for(var ce=0;ce<le.length;ce++){var Ee=le[ce];Ee._dbInfo.db=null}var Me=new T(function(Pe,$e){var Le=m.deleteDatabase(w.name);Le.onerror=function(){var rt=Le.result;rt&&rt.close(),$e(Le.error)},Le.onblocked=function(){console.warn('dropInstance blocked for database "'+w.name+'" until all open connections are closed')},Le.onsuccess=function(){var rt=Le.result;rt&&rt.close(),Pe(rt)}});return Me.then(function(Pe){ae.db=Pe;for(var $e=0;$e<le.length;$e++){var Le=le[$e];O(Le._dbInfo)}}).catch(function(Pe){throw(D(w,Pe)||T.resolve()).catch(function(){}),Pe})})}return C(V,S),V}var Gt={_driver:"asyncStorage",_initStorage:Ie,_support:v(),iterate:Je,getItem:Qe,setItem:st,removeItem:tt,clear:at,length:bt,key:It,keys:Ut,dropInstance:Wn};function pn(){return typeof openDatabase=="function"}var zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_r="~~local_forage_type~",ir=/^~~local_forage_type~([^~]+)~/,sr="__lfsc__:",jn=sr.length,tn="arbf",mn="blob",or="si08",Bt="ui08",Qn="uic8",Pr="si16",Ct="si32",Tt="ur16",gn="ui32",br="fl32",Ln="fl64",ar=jn+tn.length,Tn=Object.prototype.toString;function Rr(w){var S=w.length*.75,b=w.length,M,V=0,L,J,oe,ae;w[w.length-1]==="="&&(S--,w[w.length-2]==="="&&S--);var le=new ArrayBuffer(S),ce=new Uint8Array(le);for(M=0;M<b;M+=4)L=zt.indexOf(w[M]),J=zt.indexOf(w[M+1]),oe=zt.indexOf(w[M+2]),ae=zt.indexOf(w[M+3]),ce[V++]=L<<2|J>>4,ce[V++]=(J&15)<<4|oe>>2,ce[V++]=(oe&3)<<6|ae&63;return le}function Sn(w){var S=new Uint8Array(w),b="",M;for(M=0;M<S.length;M+=3)b+=zt[S[M]>>2],b+=zt[(S[M]&3)<<4|S[M+1]>>4],b+=zt[(S[M+1]&15)<<2|S[M+2]>>6],b+=zt[S[M+2]&63];return S.length%3===2?b=b.substring(0,b.length-1)+"=":S.length%3===1&&(b=b.substring(0,b.length-2)+"=="),b}function lr(w,S){var b="";if(w&&(b=Tn.call(w)),w&&(b==="[object ArrayBuffer]"||w.buffer&&Tn.call(w.buffer)==="[object ArrayBuffer]")){var M,V=sr;w instanceof ArrayBuffer?(M=w,V+=tn):(M=w.buffer,b==="[object Int8Array]"?V+=or:b==="[object Uint8Array]"?V+=Bt:b==="[object Uint8ClampedArray]"?V+=Qn:b==="[object Int16Array]"?V+=Pr:b==="[object Uint16Array]"?V+=Tt:b==="[object Int32Array]"?V+=Ct:b==="[object Uint32Array]"?V+=gn:b==="[object Float32Array]"?V+=br:b==="[object Float64Array]"?V+=Ln:S(new Error("Failed to get type for BinaryArray"))),S(V+Sn(M))}else if(b==="[object Blob]"){var L=new FileReader;L.onload=function(){var J=_r+w.type+"~"+Sn(this.result);S(sr+mn+J)},L.readAsArrayBuffer(w)}else try{S(JSON.stringify(w))}catch(J){console.error("Couldn't convert value into a JSON string: ",w),S(null,J)}}function kn(w){if(w.substring(0,jn)!==sr)return JSON.parse(w);var S=w.substring(ar),b=w.substring(jn,ar),M;if(b===mn&&ir.test(S)){var V=S.match(ir);M=V[1],S=S.substring(V[0].length)}var L=Rr(S);switch(b){case tn:return L;case mn:return x([L],{type:M});case or:return new Int8Array(L);case Bt:return new Uint8Array(L);case Qn:return new Uint8ClampedArray(L);case Pr:return new Int16Array(L);case Tt:return new Uint16Array(L);case Ct:return new Int32Array(L);case gn:return new Uint32Array(L);case br:return new Float32Array(L);case Ln:return new Float64Array(L);default:throw new Error("Unkown type: "+b)}}var xr={serialize:lr,deserialize:kn,stringToBuffer:Rr,bufferToString:Sn};function In(w,S,b,M){w.executeSql("CREATE TABLE IF NOT EXISTS "+S.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],b,M)}function pt(w){var S=this,b={db:null};if(w)for(var M in w)b[M]=typeof w[M]!="string"?w[M].toString():w[M];var V=new T(function(L,J){try{b.db=openDatabase(b.name,String(b.version),b.description,b.size)}catch(oe){return J(oe)}b.db.transaction(function(oe){In(oe,b,function(){S._dbInfo=b,L()},function(ae,le){J(le)})},J)});return b.serializer=xr,V}function q(w,S,b,M,V,L){w.executeSql(b,M,V,function(J,oe){oe.code===oe.SYNTAX_ERR?J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[S.storeName],function(ae,le){le.rows.length?L(ae,oe):In(ae,S,function(){ae.executeSql(b,M,V,L)},L)},L):L(J,oe)},L)}function X(w,S){var b=this;w=G(w);var M=new T(function(V,L){b.ready().then(function(){var J=b._dbInfo;J.db.transaction(function(oe){q(oe,J,"SELECT * FROM "+J.storeName+" WHERE key = ? LIMIT 1",[w],function(ae,le){var ce=le.rows.length?le.rows.item(0).value:null;ce&&(ce=J.serializer.deserialize(ce)),V(ce)},function(ae,le){L(le)})})}).catch(L)});return C(M,S),M}function me(w,S){var b=this,M=new T(function(V,L){b.ready().then(function(){var J=b._dbInfo;J.db.transaction(function(oe){q(oe,J,"SELECT * FROM "+J.storeName,[],function(ae,le){for(var ce=le.rows,Ee=ce.length,Me=0;Me<Ee;Me++){var Pe=ce.item(Me),$e=Pe.value;if($e&&($e=J.serializer.deserialize($e)),$e=w($e,Pe.key,Me+1),$e!==void 0){V($e);return}}V()},function(ae,le){L(le)})})}).catch(L)});return C(M,S),M}function Se(w,S,b,M){var V=this;w=G(w);var L=new T(function(J,oe){V.ready().then(function(){S===void 0&&(S=null);var ae=S,le=V._dbInfo;le.serializer.serialize(S,function(ce,Ee){Ee?oe(Ee):le.db.transaction(function(Me){q(Me,le,"INSERT OR REPLACE INTO "+le.storeName+" (key, value) VALUES (?, ?)",[w,ce],function(){J(ae)},function(Pe,$e){oe($e)})},function(Me){if(Me.code===Me.QUOTA_ERR){if(M>0){J(Se.apply(V,[w,ae,b,M-1]));return}oe(Me)}})})}).catch(oe)});return C(L,b),L}function ke(w,S,b){return Se.apply(this,[w,S,b,1])}function Ue(w,S){var b=this;w=G(w);var M=new T(function(V,L){b.ready().then(function(){var J=b._dbInfo;J.db.transaction(function(oe){q(oe,J,"DELETE FROM "+J.storeName+" WHERE key = ?",[w],function(){V()},function(ae,le){L(le)})})}).catch(L)});return C(M,S),M}function Oe(w){var S=this,b=new T(function(M,V){S.ready().then(function(){var L=S._dbInfo;L.db.transaction(function(J){q(J,L,"DELETE FROM "+L.storeName,[],function(){M()},function(oe,ae){V(ae)})})}).catch(V)});return C(b,w),b}function wt(w){var S=this,b=new T(function(M,V){S.ready().then(function(){var L=S._dbInfo;L.db.transaction(function(J){q(J,L,"SELECT COUNT(key) as c FROM "+L.storeName,[],function(oe,ae){var le=ae.rows.item(0).c;M(le)},function(oe,ae){V(ae)})})}).catch(V)});return C(b,w),b}function St(w,S){var b=this,M=new T(function(V,L){b.ready().then(function(){var J=b._dbInfo;J.db.transaction(function(oe){q(oe,J,"SELECT key FROM "+J.storeName+" WHERE id = ? LIMIT 1",[w+1],function(ae,le){var ce=le.rows.length?le.rows.item(0).key:null;V(ce)},function(ae,le){L(le)})})}).catch(L)});return C(M,S),M}function Cn(w){var S=this,b=new T(function(M,V){S.ready().then(function(){var L=S._dbInfo;L.db.transaction(function(J){q(J,L,"SELECT key FROM "+L.storeName,[],function(oe,ae){for(var le=[],ce=0;ce<ae.rows.length;ce++)le.push(ae.rows.item(ce).key);M(le)},function(oe,ae){V(ae)})})}).catch(V)});return C(b,w),b}function kt(w){return new T(function(S,b){w.transaction(function(M){M.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(V,L){for(var J=[],oe=0;oe<L.rows.length;oe++)J.push(L.rows.item(oe).name);S({db:w,storeNames:J})},function(V,L){b(L)})},function(M){b(M)})})}function cr(w,S){S=K.apply(this,arguments);var b=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||b.name,w.storeName=w.storeName||b.storeName);var M=this,V;return w.name?V=new T(function(L){var J;w.name===b.name?J=M._dbInfo.db:J=openDatabase(w.name,"","",0),w.storeName?L({db:J,storeNames:[w.storeName]}):L(kt(J))}).then(function(L){return new T(function(J,oe){L.db.transaction(function(ae){function le(Pe){return new T(function($e,Le){ae.executeSql("DROP TABLE IF EXISTS "+Pe,[],function(){$e()},function(rt,Ht){Le(Ht)})})}for(var ce=[],Ee=0,Me=L.storeNames.length;Ee<Me;Ee++)ce.push(le(L.storeNames[Ee]));T.all(ce).then(function(){J()}).catch(function(Pe){oe(Pe)})},function(ae){oe(ae)})})}):V=T.reject("Invalid arguments"),C(V,S),V}var lt={_driver:"webSQLStorage",_initStorage:pt,_support:pn(),iterate:me,getItem:X,setItem:ke,removeItem:Ue,clear:Oe,length:wt,key:St,keys:Cn,dropInstance:cr};function Yt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function yn(w,S){var b=w.name+"/";return w.storeName!==S.storeName&&(b+=w.storeName+"/"),b}function di(){var w="_localforage_support_test";try{return localStorage.setItem(w,!0),localStorage.removeItem(w),!1}catch{return!0}}function Yn(){return!di()||localStorage.length>0}function Oi(w){var S=this,b={};if(w)for(var M in w)b[M]=w[M];return b.keyPrefix=yn(w,S._defaultConfig),Yn()?(S._dbInfo=b,b.serializer=xr,T.resolve()):T.reject()}function so(w){var S=this,b=S.ready().then(function(){for(var M=S._dbInfo.keyPrefix,V=localStorage.length-1;V>=0;V--){var L=localStorage.key(V);L.indexOf(M)===0&&localStorage.removeItem(L)}});return C(b,w),b}function Er(w,S){var b=this;w=G(w);var M=b.ready().then(function(){var V=b._dbInfo,L=localStorage.getItem(V.keyPrefix+w);return L&&(L=V.serializer.deserialize(L)),L});return C(M,S),M}function hi(w,S){var b=this,M=b.ready().then(function(){for(var V=b._dbInfo,L=V.keyPrefix,J=L.length,oe=localStorage.length,ae=1,le=0;le<oe;le++){var ce=localStorage.key(le);if(ce.indexOf(L)===0){var Ee=localStorage.getItem(ce);if(Ee&&(Ee=V.serializer.deserialize(Ee)),Ee=w(Ee,ce.substring(J),ae++),Ee!==void 0)return Ee}}});return C(M,S),M}function nn(w,S){var b=this,M=b.ready().then(function(){var V=b._dbInfo,L;try{L=localStorage.key(w)}catch{L=null}return L&&(L=L.substring(V.keyPrefix.length)),L});return C(M,S),M}function Wr(w){var S=this,b=S.ready().then(function(){for(var M=S._dbInfo,V=localStorage.length,L=[],J=0;J<V;J++){var oe=localStorage.key(J);oe.indexOf(M.keyPrefix)===0&&L.push(oe.substring(M.keyPrefix.length))}return L});return C(b,w),b}function Xn(w){var S=this,b=S.keys().then(function(M){return M.length});return C(b,w),b}function cs(w,S){var b=this;w=G(w);var M=b.ready().then(function(){var V=b._dbInfo;localStorage.removeItem(V.keyPrefix+w)});return C(M,S),M}function Mi(w,S,b){var M=this;w=G(w);var V=M.ready().then(function(){S===void 0&&(S=null);var L=S;return new T(function(J,oe){var ae=M._dbInfo;ae.serializer.serialize(S,function(le,ce){if(ce)oe(ce);else try{localStorage.setItem(ae.keyPrefix+w,le),J(L)}catch(Ee){(Ee.name==="QuotaExceededError"||Ee.name==="NS_ERROR_DOM_QUOTA_REACHED")&&oe(Ee),oe(Ee)}})})});return C(V,b),V}function fi(w,S){if(S=K.apply(this,arguments),w=typeof w!="function"&&w||{},!w.name){var b=this.config();w.name=w.name||b.name,w.storeName=w.storeName||b.storeName}var M=this,V;return w.name?V=new T(function(L){w.storeName?L(yn(w,M._defaultConfig)):L(w.name+"/")}).then(function(L){for(var J=localStorage.length-1;J>=0;J--){var oe=localStorage.key(J);oe.indexOf(L)===0&&localStorage.removeItem(oe)}}):V=T.reject("Invalid arguments"),C(V,S),V}var pi={_driver:"localStorageWrapper",_initStorage:Oi,_support:Yt(),iterate:hi,getItem:Er,setItem:Mi,removeItem:cs,clear:so,length:Xn,key:nn,keys:Wr,dropInstance:fi},ji=function(S,b){return S===b||typeof S=="number"&&typeof b=="number"&&isNaN(S)&&isNaN(b)},us=function(S,b){for(var M=S.length,V=0;V<M;){if(ji(S[V],b))return!0;V++}return!1},ds=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"},mt={},Li={},Vn={INDEXEDDB:Gt,WEBSQL:lt,LOCALSTORAGE:pi},Dr=[Vn.INDEXEDDB._driver,Vn.WEBSQL._driver,Vn.LOCALSTORAGE._driver],rn=["dropInstance"],Or=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(rn),hs={description:"",driver:Dr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Qr(w,S){w[S]=function(){var b=arguments;return w.ready().then(function(){return w[S].apply(w,b)})}}function sn(){for(var w=1;w<arguments.length;w++){var S=arguments[w];if(S)for(var b in S)S.hasOwnProperty(b)&&(ds(S[b])?arguments[0][b]=S[b].slice():arguments[0][b]=S[b])}return arguments[0]}var fs=function(){function w(S){d(this,w);for(var b in Vn)if(Vn.hasOwnProperty(b)){var M=Vn[b],V=M._driver;this[b]=V,mt[V]||this.defineDriver(M)}this._defaultConfig=sn({},hs),this._config=sn({},this._defaultConfig,S),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return w.prototype.config=function(b){if((typeof b>"u"?"undefined":a(b))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var M in b){if(M==="storeName"&&(b[M]=b[M].replace(/\W/g,"_")),M==="version"&&typeof b[M]!="number")return new Error("Database version must be a number.");this._config[M]=b[M]}return"driver"in b&&b.driver?this.setDriver(this._config.driver):!0}else return typeof b=="string"?this._config[b]:this._config},w.prototype.defineDriver=function(b,M,V){var L=new T(function(J,oe){try{var ae=b._driver,le=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!b._driver){oe(le);return}for(var ce=Or.concat("_initStorage"),Ee=0,Me=ce.length;Ee<Me;Ee++){var Pe=ce[Ee],$e=!us(rn,Pe);if(($e||b[Pe])&&typeof b[Pe]!="function"){oe(le);return}}var Le=function(){for(var on=function(jr){return function(){var an=new Error("Method "+jr+" is not implemented by the current driver"),ur=T.reject(an);return C(ur,arguments[arguments.length-1]),ur}},Kt=0,Mr=rn.length;Kt<Mr;Kt++){var ps=rn[Kt];b[ps]||(b[ps]=on(ps))}};Le();var rt=function(on){mt[ae]&&console.info("Redefining LocalForage driver: "+ae),mt[ae]=b,Li[ae]=on,J()};"_support"in b?b._support&&typeof b._support=="function"?b._support().then(rt,oe):rt(!!b._support):rt(!0)}catch(Ht){oe(Ht)}});return z(L,M,V),L},w.prototype.driver=function(){return this._driver||null},w.prototype.getDriver=function(b,M,V){var L=mt[b]?T.resolve(mt[b]):T.reject(new Error("Driver not found."));return z(L,M,V),L},w.prototype.getSerializer=function(b){var M=T.resolve(xr);return z(M,b),M},w.prototype.ready=function(b){var M=this,V=M._driverSet.then(function(){return M._ready===null&&(M._ready=M._initDriver()),M._ready});return z(V,b,b),V},w.prototype.setDriver=function(b,M,V){var L=this;ds(b)||(b=[b]);var J=this._getSupportedDrivers(b);function oe(){L._config.driver=L.driver()}function ae(Ee){return L._extend(Ee),oe(),L._ready=L._initStorage(L._config),L._ready}function le(Ee){return function(){var Me=0;function Pe(){for(;Me<Ee.length;){var $e=Ee[Me];return Me++,L._dbInfo=null,L._ready=null,L.getDriver($e).then(ae).catch(Pe)}oe();var Le=new Error("No available storage method found.");return L._driverSet=T.reject(Le),L._driverSet}return Pe()}}var ce=this._driverSet!==null?this._driverSet.catch(function(){return T.resolve()}):T.resolve();return this._driverSet=ce.then(function(){var Ee=J[0];return L._dbInfo=null,L._ready=null,L.getDriver(Ee).then(function(Me){L._driver=Me._driver,oe(),L._wrapLibraryMethodsWithReady(),L._initDriver=le(J)})}).catch(function(){oe();var Ee=new Error("No available storage method found.");return L._driverSet=T.reject(Ee),L._driverSet}),z(this._driverSet,M,V),this._driverSet},w.prototype.supports=function(b){return!!Li[b]},w.prototype._extend=function(b){sn(this,b)},w.prototype._getSupportedDrivers=function(b){for(var M=[],V=0,L=b.length;V<L;V++){var J=b[V];this.supports(J)&&M.push(J)}return M},w.prototype._wrapLibraryMethodsWithReady=function(){for(var b=0,M=Or.length;b<M;b++)Qr(this,Or[b])},w.prototype.createInstance=function(b){return new w(b)},w}(),$t=new fs;i.exports=$t},{3:3}]},{},[4])(4)})}(Bf)),Bf.exports}var pP=fP();const Io=Rv(pP),Ua={BASE_URL:"/PromptIDE/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCPb1KXH-w5kcTdC9YSFmmnnhSrIs5Q-Ls",VITE_FIREBASE_APP_ID:"1:806172071595:web:b50b38f8d00dbd3813c9ee",VITE_FIREBASE_AUTH_DOMAIN:"promptide-95e5f.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-5049FBJ46Q",VITE_FIREBASE_MESSAGING_SENDER_ID:"806172071595",VITE_FIREBASE_PROJECT_ID:"promptide-95e5f",VITE_FIREBASE_STORAGE_BUCKET:"promptide-95e5f.firebasestorage.app",VITE_STORAGE_MODE:"cloud"},Td=new Map,Ta=new Map,mP=Number(Ua?.VITE_FIRESTORE_DEBOUNCE_MS)||1500,gP={prompts:Number(Ua?.VITE_FIRESTORE_PROMPTS_DEBOUNCE_MS)||2e3,folders:Number(Ua?.VITE_FIRESTORE_FOLDERS_DEBOUNCE_MS)||1200},Yd=new Set(["prompts","folders"]),Em=new Set(["prompt_meta"]),Rb=Number(Ua?.VITE_FIRESTORE_CHUNK_BYTES)||2e5;Io.config({name:"prompt-ide",storeName:"kv",description:"Prompt IDE data store"});async function $f(n,e){try{const t=await Io.getItem(n);if(t!=null)return t;const i=localStorage.getItem(n);if(i){const o=JSON.parse(i);return await Io.setItem(n,o),o}}catch{}return e}function Di(){try{const e=rr()?.auth?.currentUser?.uid;if(e)return e}catch{}try{if(rr())return null}catch{}try{const n=localStorage.getItem("auth_user");return n&&JSON.parse(n)?.id||null}catch{return null}}async function yP(n){if(Yd.has(n))return wP(n);if(Em.has(n))return xP(n);const e=rr()||ui();if(!e)return;const t=Di();if(!t)return;const i=On(e.db,"users",t,"kv",n),o=await as(i);if(o.exists())return o.data()?.value}async function Tm(n,e){const t=rr()||ui();if(!t)return!1;const i=Di();if(!i)return!1;const o=On(t.db,"users",i,"kv",n);return await uc(o,{value:e,updated_at:Date.now()},{merge:!0}),!0}function Db(n){try{const e=JSON.stringify(n);return typeof TextEncoder<"u"?new TextEncoder().encode(e).length:e.length*2}catch{return 0}}function vP(n,e){const t=[];let i=[],o=2;const a=1;for(const d of n){const h=Db(d)+a;i.length>0&&o+h>e&&(t.push(i),i=[],o=2),i.push(d),o+=h}return i.length>0&&t.push(i),t}async function wP(n){const e=rr()||ui();if(!e)return;const t=Di();if(!t)return;const i=On(e.db,"users",t,"kv",`${n}__index`),o=await as(i);if(!o.exists())return;const a=Number(o.data()?.numChunks||0);if(!a)return[];const d=[];for(let h=0;h<a;h++){const m=On(e.db,"users",t,"kv",`${n}__c_${h}`),v=await as(m);if(v.exists()){const x=v.data()?.value||[];for(const T of x)d.push(T)}}return d}async function _P(n,e){const t=rr()||ui();if(!t)return!1;const i=Di();if(!i)return!1;if(!Array.isArray(e))return Tm(n,e);const o=On(t.db,"users",i,"kv",`${n}__index`),a=await as(o).catch(()=>null),d=Number(a?.exists()&&a.data()?.numChunks||0),h=vP(e,Rb);for(let m=0;m<h.length;m++){const v=On(t.db,"users",i,"kv",`${n}__c_${m}`);await uc(v,{value:h[m],updated_at:Date.now()},{merge:!0})}for(let m=h.length;m<d;m++){const v=On(t.db,"users",i,"kv",`${n}__c_${m}`);await To(v).catch(()=>{})}return await uc(o,{numChunks:h.length,updated_at:Date.now()},{merge:!0}),!0}function bP(n,e){const t=Object.entries(n),i=[];let o={},a=2;for(const[d,h]of t){const m=Db({[d]:h})+1;Object.keys(o).length>0&&a+m>e&&(i.push(o),o={},a=2),o[d]=h,a+=m}return Object.keys(o).length>0&&i.push(o),i}async function xP(n){const e=rr()||ui();if(!e)return;const t=Di();if(!t)return;const i=On(e.db,"users",t,"kv",`${n}__obj_index`),o=await as(i);if(!o.exists())return;const a=Number(o.data()?.numChunks||0),d={};for(let h=0;h<a;h++){const m=On(e.db,"users",t,"kv",`${n}__obj_c_${h}`),v=await as(m);v.exists()&&Object.assign(d,v.data()?.value||{})}return d}async function EP(n,e){const t=rr()||ui();if(!t)return!1;const i=Di();if(!i)return!1;if(!e||typeof e!="object"||Array.isArray(e))return Tm(n,e);const a=bP(e,Rb),d=On(t.db,"users",i,"kv",`${n}__obj_index`),h=await as(d).catch(()=>null),m=Number(h?.exists()&&h.data()?.numChunks||0);for(let v=0;v<a.length;v++){const x=On(t.db,"users",i,"kv",`${n}__obj_c_${v}`);await uc(x,{value:a[v],updated_at:Date.now()},{merge:!0})}for(let v=a.length;v<m;v++){const x=On(t.db,"users",i,"kv",`${n}__obj_c_${v}`);await To(x).catch(()=>{})}return await uc(d,{numChunks:a.length,updated_at:Date.now()},{merge:!0}),!0}async function Ob(n,e){return Yd.has(n)?_P(n,e):Em.has(n)?EP(n,e):Tm(n,e)}function kp(n,e){const t=Ta.get(n)||0,i=gP[n]??mP,a=Td.get(n)||{timer:null,inflight:!1,pendingValue:e,pendingSeq:t};a.pendingValue=e,a.pendingSeq=t,a.timer&&clearTimeout(a.timer),a.timer=setTimeout(async()=>{const d=rr()||ui(),h=Di();if(!d||!h)return;if(a.inflight){kp(n,a.pendingValue);return}a.inflight=!0;const m=a.pendingValue,v=a.pendingSeq;try{const x=Ta.get(n)||0;v<x||await Ob(n,m),a.lastWriteAt=Date.now()}catch(x){typeof console<"u"&&console.warn("[PromptIDE] Firestore write failed for key",n,x)}finally{a.inflight=!1,a.pendingValue!==m&&setTimeout(()=>kp(n,a.pendingValue),250)}},i),Td.set(n,a)}function TP(n){const e=Td.get(n);e?.timer&&clearTimeout(e.timer),Td.delete(n)}async function SP(n){const e=rr()||ui();if(!e)return!1;const t=Di();if(!t)return!1;if(Yd.has(n)){const o=On(e.db,"users",t,"kv",`${n}__index`),a=await as(o).catch(()=>null),d=Number(a?.exists()&&a.data()?.numChunks||0);for(let h=0;h<d;h++){const m=On(e.db,"users",t,"kv",`${n}__c_${h}`);await To(m).catch(()=>{})}return await To(o).catch(()=>{}),!0}if(Em.has(n)){const o=On(e.db,"users",t,"kv",`${n}__obj_index`),a=await as(o).catch(()=>null),d=Number(a?.exists()&&a.data()?.numChunks||0);for(let h=0;h<d;h++){const m=On(e.db,"users",t,"kv",`${n}__obj_c_${h}`);await To(m).catch(()=>{})}return await To(o).catch(()=>{}),!0}const i=On(e.db,"users",t,"kv",n);return await To(i),!0}const ct={async loadLocalMirror(n){const e=n==="prompts"||n==="folders"?[]:{};try{return await $f(n,e)??e}catch{return e}},async loadData(n){if(n==="settings")return await $f(n,{})??{};{const e=await yP(n).catch(()=>{});if(e!==void 0)return e;try{const i=await $f(n,n==="prompts"||n==="folders"?[]:{});if(i!=null)return i}catch{}return n==="prompts"||n==="folders"?[]:{}}},async saveData(n,e){if(n==="settings"){await Io.setItem(n,e);return}await Io.setItem(n,e);const t=(()=>{try{const a=JSON.stringify(e),d=typeof TextEncoder<"u"?new TextEncoder().encode(a).length:a.length*2,h=Number(Ua?.VITE_FIRESTORE_DOC_SIZE_THRESHOLD_BYTES)||8e5;return String(Ua?.VITE_FIRESTORE_LOCAL_ONLY_KEYS||"").split(",").map(v=>v.trim()).filter(Boolean).includes(n)?!1:Yd.has(n)?!0:d<h+1e5}catch{return!0}})(),i=rr()||ui(),o=!!Di();if(i&&o&&t){Ta.set(n,(Ta.get(n)||0)+1),kp(n,e);return}},async saveDataNow(n,e){if(n==="settings"){await Io.setItem(n,e);return}await Io.setItem(n,e);const t=rr()||ui(),i=!!Di();if(t&&i){TP(n),Ta.set(n,(Ta.get(n)||0)+1);try{await Ob(n,e)}catch{}}},async deleteData(n){const e=await SP(n).catch(()=>!1);{if(!e)throw new Error("Cloud-only mode: delete failed (not signed in or Firestore unavailable).");return}}},kP=async()=>await ct.loadData("settings")||{},Mb="prompt_meta";async function Sd(){const n=await ct.loadData(Mb);return n&&typeof n=="object"?n:{}}async function jb(n){await ct.saveDataNow(Mb,n)}async function Fu(n,e){const t=await Sd(),o={...t[n]||{},...e};return t[n]=o,await jb(t),o}async function IP(n){const e=await Sd();e[n]&&(delete e[n],await jb(e))}function CP(){return`loc_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,8)}`}function zo(n){const e=new Set,t=[];for(const i of n)e.has(i.id)||(e.add(i.id),t.push(i));return t}async function AP(n={}){const{section:e,searchTerm:t}=n;let o=[...zo(await ct.loadData("prompts")||[])];if(e==="featured"&&(o=o.filter(a=>a.is_featured)),e==="image-prompts"&&(o=o.filter(a=>a.type==="image")),e==="video-prompts"&&(o=o.filter(a=>a.type==="video")),e==="text-prompts"&&(o=o.filter(a=>a.type==="text")),t&&t.trim()){const a=t.trim().toLowerCase();o=o.filter(d=>(d.title||"").toLowerCase().includes(a)||(d.content||"").toLowerCase().includes(a))}return o.sort((a,d)=>(d.updated_at||"").localeCompare(a.updated_at||"")),o}async function Ip(){const n=zo(await ct.loadData("prompts")||[]);return n.sort((e,t)=>(t.updated_at||"").localeCompare(e.updated_at||"")),n}async function Lb(n){const e=zo(await ct.loadLocalMirror("prompts")||[]),t=n?.title||"Neuer Prompt",i=new Set((e||[]).map(d=>(d.title||"").trim())),o=d=>{if(!i.has(d))return d;let h=2;for(;i.has(`${d} ${h}`);)h++;return`${d} ${h}`},a={id:CP(),title:o(t),content:n?.content||"",description:n?.description||"",type:n?.type||"text",tags:Array.isArray(n?.tags)?n.tags:[],parameters:n?.parameters||{},negative_prompt:n?.negative_prompt||null,is_public:!!n?.is_public,is_featured:!!n?.is_featured,version:n?.version||"1.0.0",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),view_count:0,copy_count:0};return e.unshift(a),ct.saveData("prompts",e).catch(()=>{}),a}async function Ml(n,e){const t=zo(await ct.loadLocalMirror("prompts")||[]),i=t.findIndex(a=>a.id===n);if(i<0)throw new Error("Prompt not found");const o={...t[i],...e,updated_at:new Date().toISOString()};return t[i]=o,ct.saveData("prompts",t).catch(()=>{}),o}async function NP(n){const t=zo(await ct.loadLocalMirror("prompts")||[]).filter(i=>i.id!==n);await ct.saveDataNow("prompts",t)}async function PP(n,e){const t=zo(await ct.loadLocalMirror("prompts")||[]),i=t.findIndex(o=>o.id===n);i<0||(t[i]={...t[i],is_favorite:!!e,updated_at:new Date().toISOString()},ct.saveData("prompts",t).catch(()=>{}))}async function RP(n){const e=zo(await ct.loadLocalMirror("prompts")||[]),t=e.findIndex(o=>o.id===n);if(t<0)return;const i=e[t].copy_count||0;e[t]={...e[t],copy_count:i+1,updated_at:new Date().toISOString()},ct.saveData("prompts",e).catch(()=>{})}const jl={folder:qu,"folder-open":LE,archive:EE,"file-text":Jf,star:nT,camera:ka,image:Dp,book:Kv,tag:iT,layers:$E,film:Nd,clapperboard:NE,video:rw,heart:Jv,sparkles:$s,pencil:ZE,brush:kE,"pen-tool":JE,beaker:TE,code:Qv,terminal:sT,cpu:OE,brain:SE,zap:Rd,wrench:dT,hammer:zE,rocket:eT,compass:DE,globe:FE,cloud:RE,sun:rT,moon:tw,music:XE,headphones:BE,mic:QE,message:WE,bell:Gv,calendar:IE,clock:PE,shield:nw,lock:qE,key:Zv},DP=Object.keys(jl);function OP({activeSection:n,onSectionChange:e,isCollapsed:t,onToggleCollapse:i,onNewPrompt:o,onOpenPrompt:a,onLoaded:d,onProgress:h}){const{loading:m,user:v}=Tc(),[x,T]=H.useState([]),[C,z]=H.useState([]),[G,K]=H.useState({}),[B,ee]=H.useState({x:0,y:0}),[te,pe]=H.useState([{id:"all-prompts",name:"Alle Prompts",iconName:"file-text",prompts:[],isDeletable:!1}]),[we,re]=H.useState(["all-prompts"]),[ie,R]=H.useState(null),[k,A]=H.useState(!1),[O,D]=H.useState(null),N=H.useRef({}),P=(q,X)=>{const me=document.elementFromPoint(q,X);return me&&me.closest("[data-folder-id]")?.getAttribute("data-folder-id")||null},[Ae,De]=H.useState(null),[Be,qe]=H.useState(null),[ge,Te]=H.useState("all-prompts"),[_e,F]=H.useState(null),[se,Ie]=H.useState(null),[Qe,Je]=H.useState(null),[st,tt]=H.useState(null),at=H.useRef(null),[bt,It]=H.useState(null),[Ut,Wn]=H.useState(""),Gt=q=>{const X=new Set,me=[];for(const Se of q)X.has(Se.id)||(X.add(Se.id),me.push(Se));return me},pn=q=>(Array.isArray(te)?te:[]).filter(X=>X.parentId===q),zt=H.useRef(!1);H.useEffect(()=>{if(zt.current||m||!v)return;(async()=>{try{h?.(.05,"Lade Ordner…");const X=await ct.loadData("folders");let me=[];if(Array.isArray(X)&&X.length>0){me=Gt(X.map(Ue=>({...Ue,iconName:Ue.iconName||"folder",parentId:Ue.parentId||void 0}))),pe(me);try{await ct.saveDataNow("folders",me)}catch{}}h?.(.25,"Lade Metadaten…");const Se=await Sd();K(Se),h?.(.55,"Lade Prompts…");const ke=Gt(await Ip());if(Array.isArray(ke)){const Ue=ke.map(lt=>({...lt,...Se[lt.id]||{}}));T(Ue);const Oe=new Set(Ue.map(lt=>lt.folder).filter(lt=>lt&&lt!=="all-prompts")),wt=Array.isArray(me)&&me.length>0?me:te,St=new Set(wt.map(lt=>lt.id)),Cn=Array.from(Oe).filter(lt=>!St.has(lt)).map(lt=>({id:String(lt),name:"Ordner",iconName:"folder",prompts:[],isDeletable:!0})),kt=Gt([...wt,...Cn]),cr=kt.map(lt=>({...lt,iconName:lt.iconName||"folder",prompts:lt.id==="all-prompts"?Ue.filter(Yt=>!Yt.folder||Yt.folder==="all-prompts"):Ue.filter(Yt=>Yt.folder===lt.id)}));pe(cr);try{await ct.saveDataNow("folders",kt)}catch{}z(Ue.filter(lt=>lt.is_bookmarked));try{await ct.saveDataNow("prompt_meta",Se)}catch{}}h?.(.95,"Finalisiere…"),d&&d(),h?.(1,"Fertig"),zt.current=!0}catch(X){console.error("Error loading saved data:",X),d&&d(),h?.(1,"Fehler – offline Modus"),zt.current=!0}})()},[m,v]),H.useEffect(()=>{const q=async()=>{const Se=await Sd();K(Se);const ke=Gt(await Ip());if(Array.isArray(ke)){const Ue=ke.map(Oe=>({...Oe,...Se[Oe.id]||{}}));T(Ue),pe(Oe=>Oe.map(wt=>({...wt,prompts:wt.id==="all-prompts"?Ue.filter(St=>!St.folder||St.folder==="all-prompts"):Ue.filter(St=>St.folder===wt.id)}))),z(Ue.filter(Oe=>Oe.is_bookmarked))}},X=Se=>{const{prompts:ke}=Se.detail,Ue=Gt(ke.map(Oe=>({...Oe,...G[Oe.id]||{}})));T(Ue),pe(Oe=>Oe.map(wt=>({...wt,prompts:wt.id==="all-prompts"?Ue.filter(St=>!St.folder||St.folder==="all-prompts"):Ue.filter(St=>St.folder===wt.id)}))),z(Ue.filter(Oe=>Oe.is_bookmarked))},me=Se=>{const{promptId:ke}=Se.detail;qe(ke),re(Ue=>Ue.includes("all-prompts")?Ue:[...Ue,"all-prompts"])};return window.addEventListener("storage",q),window.addEventListener("prompts-updated",X),window.addEventListener("prompt-created",me),()=>{window.removeEventListener("storage",q),window.removeEventListener("prompts-updated",X),window.removeEventListener("prompt-created",me)}},[G]);const _r=q=>{re(X=>X.includes(q)?X.filter(me=>me!==q):[...X,q])},ir=q=>{a&&a(q)},sr=async(q,X)=>{X.stopPropagation();const me=x.filter(Se=>Se.id!==q.id);T(me);try{await NP(q.id)}catch{}try{await IP(q.id)}catch{}window.dispatchEvent(new CustomEvent("prompts-updated",{detail:{prompts:me}})),ut.success("Prompt gelöscht!")},jn=async(q,X)=>{X.stopPropagation();const me=await Lb({title:`${q.title} (Kopie)`,content:q.content,type:q.type,tags:q.tags||[]}),Se={...q,id:me.id,title:me.title},ke=[...x,Se];T(ke);try{await Fu(me.id,{folder:q.folder,previewDataUrl:q.previewDataUrl})}catch{}window.dispatchEvent(new CustomEvent("prompts-updated",{detail:{prompts:ke}})),ut.success("Prompt kopiert!")},tn=async(q,X)=>{if(!X.trim()){qe(null);return}const me=x.map(Se=>Se.id===q?{...Se,title:X.trim()}:Se);T(me),ct.saveData("prompts",me).catch(()=>{}),Ml(q,{title:X.trim()}).catch(()=>{}),window.dispatchEvent(new CustomEvent("prompts-updated",{detail:{prompts:me}})),qe(null),ut.success("Prompt umbenannt!")},mn=async()=>{const q={id:`folder_${Date.now()}`,name:"Neuer Ordner",iconName:"folder",prompts:[],isDeletable:!0,isEditing:!0},X=[...te,q];pe(X),await ct.saveData("folders",X),De(q.id),Te(q.id),re(me=>me.includes(q.id)?me:[...me,q.id]),ut.success("Ordner erstellt!")},or=async q=>{if(te.find(ke=>ke.id===q)&&pn(q).length>0){ut.error("Ordner enthält Unterordner!");return}if(x.some(ke=>ke.folder===q)){ut.error("Ordner enthält Prompts! Bitte zuerst verschieben oder löschen.");return}const Se=te.filter(ke=>ke.id!==q);pe(Se),await ct.saveData("folders",Se),ut.success("Ordner gelöscht!")},Bt=async(q,X)=>{if(X.trim()===""){ut.error("Name darf nicht leer sein!");return}const me=te.map(Se=>Se.id===q?{...Se,name:X.trim(),isEditing:!1}:Se);pe(me),await ct.saveData("folders",me),De(null),ut.success("Ordner umbenannt!")},Qn=async(q,X)=>{const me=te.map(Se=>Se.id===q?{...Se,iconName:X}:Se);pe(me),await ct.saveData("folders",me),F(null),ut.success("Ordner-Icon geändert!")},Pr="application/x-prompt-ide",Ct=(q,X,me)=>{R({type:X,item:me}),A(!0);try{const Se=JSON.stringify({type:X,id:me.id});q.dataTransfer.setData(Pr,Se),q.dataTransfer.setData("text/plain",Se)}catch{}q.dataTransfer.effectAllowed="move"},Tt=()=>{R(null),A(!1),D(null)},gn=q=>{q.preventDefault(),q.dataTransfer.dropEffect="move"},br=q=>{const X=N.current;X[q]=(X[q]||0)+1,O!==q&&D(q)},Ln=q=>{const X=at.current;if(!X)return;const me=X.getBoundingClientRect(),Se=40,ke=12;q.clientY<me.top+Se?X.scrollTop-=ke:q.clientY>me.bottom-Se&&(X.scrollTop+=ke);const Ue=P(q.clientX,q.clientY);br(Ue||"all-prompts")},ar=async(q,X)=>{q.preventDefault(),N.current[X]=0,O===X&&D(null);let me=ie;if(!me)try{const Se=q.dataTransfer.getData(Pr)||q.dataTransfer.getData("text/plain");if(Se){const ke=JSON.parse(Se);if(ke&&ke.type&&ke.id){if(ke.type==="prompt"){const Ue=x.find(Oe=>Oe.id===ke.id);Ue&&(me={type:"prompt",item:Ue})}else if(ke.type==="folder"){const Ue=te.find(Oe=>Oe.id===ke.id);Ue&&(me={type:"folder",item:Ue})}}}}catch{}if(me){if(me.type==="prompt"){const Se=me.item,ke=x.map(Ue=>Ue.id===Se.id?{...Ue,folder:X}:Ue);T(ke);try{await Fu(Se.id,{folder:X})}catch{}window.dispatchEvent(new CustomEvent("prompts-updated",{detail:{prompts:ke}})),R(null),A(!1),ut.success("Prompt verschoben!");return}if(me.type==="folder"){const Se=me.item;if(Se.id==="all-prompts"){R(null),A(!1);return}if(X==="all-prompts"){const Oe=te.map(wt=>wt.id===Se.id?{...wt,parentId:void 0}:wt);pe(Oe),await ct.saveData("folders",Oe),R(null),A(!1),ut.success("Ordner nach „Alle Prompts“ verschoben!");return}const ke=(Oe,wt)=>{const St=pn(Oe);for(const Cn of St)if(Cn.id===wt||ke(Cn.id,wt))return!0;return!1};if(Se.id===X||ke(Se.id,X)){R(null),A(!1);return}const Ue=te.map(Oe=>Oe.id===Se.id?{...Oe,parentId:X}:Oe);pe(Ue),await ct.saveData("folders",Ue),R(null),A(!1),ut.success("Ordner verschoben!");return}}},Tn=(q,X)=>{X.stopPropagation(),document.getElementById(`preview-upload-${q}`)?.click()},Rr=async(q,X)=>{if(!X)return;Je(q);const me=new FileReader;me.onload=async Se=>{try{const ke=Se.target?.result,Ue=x.map(Oe=>Oe.id===q?{...Oe,previewDataUrl:ke}:Oe);T(Ue);try{await Fu(q,{previewDataUrl:ke})}catch{}window.dispatchEvent(new CustomEvent("prompts-updated",{detail:{prompts:Ue}})),ut.success("Vorschaubild gespeichert!")}catch(ke){console.error(ke),ut.error("Fehler beim Speichern des Vorschaubilds")}finally{Je(null)}},me.onerror=()=>{Je(null),ut.error("Fehler beim Lesen der Datei")},me.readAsDataURL(X)},Sn=async(q,X)=>{X.stopPropagation();const me=x.map(Se=>Se.id===q?{...Se,previewDataUrl:void 0}:Se);T(me);try{await Fu(q,{previewDataUrl:void 0})}catch{}window.dispatchEvent(new CustomEvent("prompts-updated",{detail:{prompts:me}})),ut.success("Vorschaubild entfernt")},lr=q=>f.jsx("div",{className:"absolute right-2 top-8 z-50 p-2 rounded-lg border border-slate-200/60 dark:border-slate-700/60 bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-lg",children:f.jsx("div",{className:"grid grid-cols-4 gap-2",children:DP.map(X=>{const me=jl[X],Se=(q.iconName||"folder")===X;return f.jsx("button",{className:dn("p-2 rounded hover:bg-slate-100/80 dark:hover:bg-slate-700/60",Se&&"ring-2 ring-blue-500/70"),title:X,onClick:ke=>{ke.stopPropagation(),Qn(q.id,X)},children:f.jsx(me,{className:"w-4 h-4"})},X)})})}),kn=q=>f.jsxs("div",{draggable:!0,onDragStart:X=>Ct(X,"prompt",q),onDragEnd:Tt,onClick:()=>Be!==q.id?ir(q):void 0,onDoubleClick:()=>qe(q.id),onMouseMove:X=>ee({x:X.clientX,y:X.clientY}),className:"group relative flex items-center justify-between p-2 rounded cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[q.previewDataUrl?f.jsxs("div",{className:"relative",children:[f.jsx("button",{className:"block",title:"Vorschaubild ersetzen",onClick:X=>Tn(q.id,X),onMouseEnter:()=>Ie(q.id),onMouseLeave:()=>Ie(X=>X===q.id?null:X),children:f.jsx("img",{src:q.previewDataUrl,alt:"Preview",className:"w-4 h-4 rounded object-cover flex-shrink-0"})}),se===q.id&&typeof window<"u"&&qv.createPortal((()=>{const X=Math.min(window.innerWidth-500,(B?.x||0)+24),me=Math.max(12,(B?.y||0)-100);return f.jsx("div",{className:"fixed pointer-events-none",style:{left:X,top:me,zIndex:2147483647},children:f.jsx("div",{className:"p-2 rounded-lg border border-slate-200/60 dark:border-slate-700/60 bg-white/95 dark:bg-slate-900/95 shadow-2xl backdrop-blur-md",children:f.jsx("img",{src:q.previewDataUrl,alt:"Preview large",className:"max-w-[480px] max-h-[360px] rounded object-contain"})})})})(),document.body)]}):f.jsx("button",{className:"flex items-center justify-center w-5 h-5 relative",title:"Vorschaubild hochladen",onClick:X=>Tn(q.id,X),onMouseEnter:()=>Ie(q.id),onMouseLeave:()=>Ie(X=>X===q.id?null:X),children:Qe===q.id?f.jsx(Hn,{className:"w-4 h-4 text-slate-600 dark:text-slate-400 animate-spin"}):f.jsx(Jf,{className:"w-4 h-4 text-slate-600 dark:text-slate-400 flex-shrink-0"})}),f.jsx("input",{id:`preview-upload-${q.id}`,type:"file",accept:"image/*",className:"hidden",onChange:X=>Rr(q.id,X.target.files?.[0])}),Be===q.id?f.jsx("input",{type:"text",defaultValue:q.title,className:"bg-transparent border-b border-slate-300 dark:border-slate-600 outline-none text-sm flex-1",onBlur:X=>tn(q.id,X.target.value),onKeyDown:X=>{X.key==="Enter"?tn(q.id,X.currentTarget.value):X.key==="Escape"&&qe(null)},autoFocus:!0,onClick:X=>X.stopPropagation()}):f.jsx("span",{className:"text-sm truncate",children:q.title})]}),f.jsx("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:Be===q.id?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:X=>Tn(q.id,X),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 rounded hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",title:"Vorschaubild ersetzen",children:f.jsx(Dp,{className:"w-3 h-3"})}),q.previewDataUrl&&f.jsx("button",{onClick:X=>Sn(q.id,X),className:"p-1 text-slate-400 hover:text-red-500 rounded hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",title:"Vorschaubild entfernen",children:f.jsx(Ul,{className:"w-3 h-3"})})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:X=>jn(q,X),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 rounded hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:f.jsx(Rp,{className:"w-3 h-3"})}),f.jsx("button",{onClick:X=>sr(q,X),className:"p-1 text-slate-400 hover:text-red-500 rounded hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:f.jsx(Ul,{className:"w-3 h-3"})})]})})]},q.id),xr=q=>{const X=we.includes(q.id),me=jl[q.iconName||"folder"]||qu,Se=pn(q.id),ke=(Array.isArray(x)?x:[]).filter(Oe=>Oe.folder===q.id),Ue=O===q.id;return f.jsxs("div",{"data-folder-id":q.id,className:dn("mb-2 relative rounded",Ue&&"ring-2 ring-blue-400/70 bg-blue-50/40 dark:bg-blue-900/20"),children:[f.jsxs("div",{draggable:q.id!=="all-prompts",onDragStart:Oe=>{q.id!=="all-prompts"&&Ct(Oe,"folder",q)},onDragEnd:Tt,className:"flex items-center justify-between p-2 rounded cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-1",onClick:()=>{_r(q.id),Te(q.id)},onDoubleClick:()=>De(q.id),children:[X?f.jsx(Wv,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"}):f.jsx(Xf,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"}),f.jsx("button",{className:"p-1 -m-1 rounded hover:bg-slate-200/60 dark:hover:bg-slate-700/60",onClick:Oe=>{Oe.stopPropagation(),F(_e===q.id?null:q.id)},title:"Ordner-Icon ändern",children:f.jsx(me,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})}),Ae===q.id?f.jsx("input",{type:"text",defaultValue:q.name,className:"bg-transparent border-b border-slate-300 dark:border-slate-600 outline-none text-sm flex-1",onBlur:Oe=>Bt(q.id,Oe.target.value),onKeyDown:Oe=>{Oe.key==="Enter"?Bt(q.id,Oe.currentTarget.value):Oe.key==="Escape"&&De(null)},autoFocus:!0}):f.jsx("span",{className:"text-sm font-medium",children:q.name}),f.jsx("span",{className:"text-xs text-slate-500 ml-auto",children:ke.length})]}),f.jsx("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:q.isDeletable&&f.jsx("button",{onClick:Oe=>{if(Oe.stopPropagation(),pn(q.id).length>0){ut.error("Ordner enthält Unterordner!");return}or(q.id)},className:"p-1 text-slate-400 hover:text-red-500 rounded hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:f.jsx(Ul,{className:"w-3 h-3"})})})]}),_e===q.id&&lr(q),X&&f.jsxs("div",{className:dn("ml-6 mt-1 rounded",Ue&&"ring-2 ring-blue-400/70 bg-blue-50/40 dark:bg-blue-900/20"),children:[Se.sort((Oe,wt)=>Oe.name.localeCompare(wt.name)).map(Oe=>xr(Oe)),ke.map(Oe=>kn(Oe)),f.jsx("div",{className:"h-6 mt-1 rounded","data-folder-id":q.id}),Se.length===0&&ke.length===0&&f.jsx("div",{className:"p-2 text-xs text-slate-500 italic",children:"Ordner ist leer"})]})]},q.id)},In=Ut.trim().length>0,pt=H.useMemo(()=>{if(!In)return[];const q=Ut.toLowerCase();return(Array.isArray(x)?x:[]).filter(X=>(X.content||"").toLowerCase().includes(q))},[In,Ut,x]);if(t){const q=X=>{const me=te.find(ke=>ke.id===X);if(!me)return null;const Se=pn(me.id);return f.jsxs("div",{className:"absolute left-12 top-12 z-30 w-80 max-h-[70vh] overflow-y-auto rounded-xl border border-slate-200/60 dark:border-slate-700/60 bg-white/90 dark:bg-slate-800/90 shadow-xl backdrop-blur-xl glass-panel",onMouseLeave:()=>tt(null),children:[f.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200/60 dark:border-slate-700/60",children:[f.jsx("div",{className:"text-sm font-semibold truncate",children:me.name}),f.jsx("button",{onClick:()=>tt(null),className:"p-1 rounded hover:bg-slate-200/60 dark:hover:bg-slate-700/60",title:"Schließen",children:f.jsx(Ji,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"p-2",children:[Se.length>0&&f.jsxs("div",{className:"mb-2",children:[f.jsx("div",{className:"px-2 py-1 text-xs uppercase tracking-wide text-slate-500",children:"Unterordner"}),Se.sort((ke,Ue)=>ke.name.localeCompare(Ue.name)).map(ke=>{const Ue=jl[ke.iconName||"folder"]||qu;return f.jsxs("button",{className:"w-full flex items-center gap-2 px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700 text-left",onClick:()=>{Te(ke.id),tt(ke.id)},children:[f.jsx(Ue,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm flex-1 truncate",children:ke.name}),f.jsx("span",{className:"text-xs text-slate-500",children:ke.prompts.length})]},ke.id)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"px-2 py-1 text-xs uppercase tracking-wide text-slate-500",children:"Prompts"}),me.prompts.length===0?f.jsx("div",{className:"px-2 py-2 text-xs text-slate-500 italic",children:"Ordner ist leer"}):me.prompts.map(ke=>f.jsxs("button",{className:"w-full flex items-center gap-2 px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700 text-left",onClick:()=>{ir(ke),tt(null)},title:ke.title,children:[f.jsx(Jf,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm truncate flex-1",children:ke.title})]},ke.id))]})]})]})};return f.jsxs("div",{className:"relative w-12 h-full bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex flex-col items-center py-4",children:[f.jsx("div",{className:"mb-3",children:f.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Seitenleiste ausklappen",children:f.jsx(Xf,{className:"w-4 h-4 text-slate-600 dark:text-slate-300"})})}),f.jsx("div",{className:"flex flex-col gap-2",children:(Array.isArray(te)?te:[]).filter(X=>X.id!=="all-prompts").map(X=>{const me=jl[X.iconName||"folder"]||qu;return f.jsx("button",{onClick:()=>{Te(X.id),tt(X.id)},className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:X.name,children:f.jsx(me,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})},X.id)})}),st&&q(st)]})}return f.jsxs("div",{className:"w-96 h-full bg-white/70 dark:bg-slate-900/60 border-r border-slate-200/60 dark:border-slate-700/60 flex flex-col text-slate-900 dark:text-slate-100 backdrop-blur-xl",children:[f.jsxs("div",{className:"p-4 pt-12 border-b border-slate-200/60 dark:border-slate-700/60 bg-white/20 dark:bg-slate-800/30 glass-panel",style:{WebkitAppRegion:"drag"},children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h1",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Prompt Library"}),f.jsx("button",{onClick:i,className:"p-1 rounded hover:bg-slate-200/60 dark:hover:bg-slate-700/60 transition-colors",style:{WebkitAppRegion:"no-drag"},title:"Seitenleiste einklappen",children:f.jsx(CE,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]}),f.jsxs("div",{className:"relative",style:{WebkitAppRegion:"no-drag"},children:[f.jsx(Fl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),f.jsx("input",{value:Ut,onChange:q=>Wn(q.target.value),placeholder:"In Prompt-Texten suchen",className:"w-full pl-8 pr-7 py-2 text-sm rounded-lg border border-slate-200 dark:border-slate-700 bg-white/70 dark:bg-slate-900/60 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:focus:ring-slate-700"}),In&&f.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded text-slate-400 hover:text-slate-700 dark:hover:text-slate-200",onClick:()=>Wn(""),title:"Suche löschen",children:f.jsx(Ji,{className:"w-4 h-4"})})]})]}),f.jsxs("div",{ref:at,className:"flex-1 overflow-y-auto p-4 bg-transparent",style:{WebkitAppRegion:"no-drag"},onDragOver:q=>{gn(q),Ln(q)},onDragEnter:q=>{gn(q)},onDragLeave:()=>D(null),onDrop:q=>{const X=P(q.clientX,q.clientY)||O||"all-prompts";ar(q,X)},children:[!In&&f.jsxs("div",{"data-folder-id":"all-prompts",className:dn("mb-6 surface-ghost p-3 rounded-lg",O==="all-prompts"&&"ring-2 ring-blue-400/70 bg-blue-50/40 dark:bg-blue-900/20"),title:"Hierhin ziehen, um in die Root-Ebene zu verschieben",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:"Deine Prompts"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>o("all-prompts"),className:"p-1 rounded hover:bg-slate-200/40 dark:hover:bg-slate-700/40 transition-colors",title:"Neuer Prompt",children:f.jsx(jE,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),f.jsx("button",{onClick:mn,className:"p-1 rounded hover:bg-slate-200/40 dark:hover:bg-slate-700/40 transition-colors",title:"Neuer Ordner",children:f.jsx(VE,{className:"w-4 h-4 text-green-600 dark:text-green-400"})})]})]}),f.jsxs("div",{className:"space-y-1",children:[(Array.isArray(x)?x:[]).filter(X=>!X.folder||X.folder==="all-prompts").sort((X,me)=>X.title.localeCompare(me.title)).map(X=>kn(X)),(Array.isArray(te)?te:[]).filter(X=>!X.parentId&&X.id!=="all-prompts").sort((X,me)=>X.name.localeCompare(me.name)).map(X=>xr(X))]})]}),In&&f.jsxs("div",{className:"surface-ghost p-3 rounded-lg",children:[f.jsx("div",{className:"flex items-center justify-between mb-3",children:f.jsxs("h2",{className:"text-sm font-semibold",children:["Suchergebnisse (",pt.length,")"]})}),pt.length===0?f.jsx("div",{className:"text-xs text-slate-500",children:"Keine Treffer"}):f.jsx("div",{className:"space-y-1",children:pt.map(q=>kn(q))})]})]}),f.jsx("div",{className:"p-4 border-t border-slate-200/60 dark:border-slate-700/60 bg-white/10 dark:bg-slate-800/20",children:f.jsxs("button",{onClick:()=>e("settings"),className:dn("w-full flex items-center gap-2 p-2 rounded transition-colors",n==="settings"?"bg-blue-100/40 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-slate-600 dark:text-slate-400 hover:bg-slate-100/40 dark:hover:bg-slate-700/40"),children:[f.jsx(Pd,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm",children:"Einstellungen"})]})})]})}function MP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function Ev(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xv(Object(t),!0).forEach(function(i){MP(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xv(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function jP(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function LP(n,e){if(n==null)return{};var t=jP(n,e),i,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a.length;o++)i=a[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function VP(n,e){return FP(n)||UP(n,e)||zP(n,e)||BP()}function FP(n){if(Array.isArray(n))return n}function UP(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],i=!0,o=!1,a=void 0;try{for(var d=n[Symbol.iterator](),h;!(i=(h=d.next()).done)&&(t.push(h.value),!(e&&t.length===e));i=!0);}catch(m){o=!0,a=m}finally{try{!i&&d.return!=null&&d.return()}finally{if(o)throw a}}return t}}function zP(n,e){if(n){if(typeof n=="string")return Tv(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Tv(n,e)}}function Tv(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function BP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $P(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function kv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sv(Object(t),!0).forEach(function(i){$P(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sv(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function HP(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){return e.reduceRight(function(o,a){return a(o)},i)}}function Ll(n){return function e(){for(var t=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.length>=n.length?n.apply(this,o):function(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return e.apply(t,[].concat(o,h))}}}function kd(n){return{}.toString.call(n).includes("Object")}function qP(n){return!Object.keys(n).length}function dc(n){return typeof n=="function"}function GP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function KP(n,e){return kd(e)||Qs("changeType"),Object.keys(e).some(function(t){return!GP(n,t)})&&Qs("changeField"),e}function WP(n){dc(n)||Qs("selectorType")}function QP(n){dc(n)||kd(n)||Qs("handlerType"),kd(n)&&Object.values(n).some(function(e){return!dc(e)})&&Qs("handlersType")}function YP(n){n||Qs("initialIsRequired"),kd(n)||Qs("initialType"),qP(n)&&Qs("initialContent")}function XP(n,e){throw new Error(n[e]||n.default)}var JP={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Qs=Ll(XP)(JP),Uu={changes:KP,selector:WP,handler:QP,initial:YP};function ZP(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Uu.initial(n),Uu.handler(e);var t={current:n},i=Ll(nR)(t,e),o=Ll(tR)(t),a=Ll(Uu.changes)(n),d=Ll(eR)(t);function h(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(x){return x};return Uu.selector(v),v(t.current)}function m(v){HP(i,o,a,d)(v)}return[h,m]}function eR(n,e){return dc(e)?e(n.current):e}function tR(n,e){return n.current=kv(kv({},n.current),e),e}function nR(n,e,t){return dc(e)?e(n.current):Object.keys(t).forEach(function(i){var o;return(o=e[i])===null||o===void 0?void 0:o.call(e,n.current[i])}),t}var rR={create:ZP},iR={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function sR(n){return function e(){for(var t=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.length>=n.length?n.apply(this,o):function(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return e.apply(t,[].concat(o,h))}}}function oR(n){return{}.toString.call(n).includes("Object")}function aR(n){return n||Iv("configIsRequired"),oR(n)||Iv("configType"),n.urls?(lR(),{paths:{vs:n.urls.monacoBase}}):n}function lR(){console.warn(Vb.deprecation)}function cR(n,e){throw new Error(n[e]||n.default)}var Vb={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Iv=sR(cR)(Vb),uR={config:aR},dR=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(o){return t.reduceRight(function(a,d){return d(a)},o)}};function Fb(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],Fb(n[t],e[t]))}),Ev(Ev({},n),e)}var hR={type:"cancelation",msg:"operation is manually canceled"};function Hf(n){var e=!1,t=new Promise(function(i,o){n.then(function(a){return e?o(hR):i(a)}),n.catch(o)});return t.cancel=function(){return e=!0},t}var fR=rR.create({config:iR,isInitialized:!1,resolve:null,reject:null,monaco:null}),Ub=VP(fR,2),Sc=Ub[0],Xd=Ub[1];function pR(n){var e=uR.config(n),t=e.monaco,i=LP(e,["monaco"]);Xd(function(o){return{config:Fb(o.config,i),monaco:t}})}function mR(){var n=Sc(function(e){var t=e.monaco,i=e.isInitialized,o=e.resolve;return{monaco:t,isInitialized:i,resolve:o}});if(!n.isInitialized){if(Xd({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Hf(qf);if(window.monaco&&window.monaco.editor)return zb(window.monaco),n.resolve(window.monaco),Hf(qf);dR(gR,vR)(wR)}return Hf(qf)}function gR(n){return document.body.appendChild(n)}function yR(n){var e=document.createElement("script");return n&&(e.src=n),e}function vR(n){var e=Sc(function(i){var o=i.config,a=i.reject;return{config:o,reject:a}}),t=yR("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function wR(){var n=Sc(function(t){var i=t.config,o=t.resolve,a=t.reject;return{config:i,resolve:o,reject:a}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){zb(t),n.resolve(t)},function(t){n.reject(t)})}function zb(n){Sc().monaco||Xd({monaco:n})}function _R(){return Sc(function(n){var e=n.monaco;return e})}var qf=new Promise(function(n,e){return Xd({resolve:n,reject:e})}),Bb={config:pR,init:mR,__getMonacoInstance:_R},bR={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Gf=bR,xR={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ER=xR;function TR({children:n}){return Bs.createElement("div",{style:ER.container},n)}var SR=TR,kR=SR;function IR({width:n,height:e,isEditorReady:t,loading:i,_ref:o,className:a,wrapperProps:d}){return Bs.createElement("section",{style:{...Gf.wrapper,width:n,height:e},...d},!t&&Bs.createElement(kR,null,i),Bs.createElement("div",{ref:o,style:{...Gf.fullWidth,...!t&&Gf.hide},className:a}))}var CR=IR,$b=H.memo(CR);function AR(n){H.useEffect(n,[])}var Hb=AR;function NR(n,e,t=!0){let i=H.useRef(!0);H.useEffect(i.current||!t?()=>{i.current=!1}:n,e)}var Ar=NR;function Yl(){}function Sa(n,e,t,i){return PR(n,i)||RR(n,e,t,i)}function PR(n,e){return n.editor.getModel(qb(n,e))}function RR(n,e,t,i){return n.editor.createModel(e,t,i?qb(n,i):void 0)}function qb(n,e){return n.Uri.parse(e)}function DR({original:n,modified:e,language:t,originalLanguage:i,modifiedLanguage:o,originalModelPath:a,modifiedModelPath:d,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:m=!1,theme:v="light",loading:x="Loading...",options:T={},height:C="100%",width:z="100%",className:G,wrapperProps:K={},beforeMount:B=Yl,onMount:ee=Yl}){let[te,pe]=H.useState(!1),[we,re]=H.useState(!0),ie=H.useRef(null),R=H.useRef(null),k=H.useRef(null),A=H.useRef(ee),O=H.useRef(B),D=H.useRef(!1);Hb(()=>{let De=Bb.init();return De.then(Be=>(R.current=Be)&&re(!1)).catch(Be=>Be?.type!=="cancelation"&&console.error("Monaco initialization: error:",Be)),()=>ie.current?Ae():De.cancel()}),Ar(()=>{if(ie.current&&R.current){let De=ie.current.getOriginalEditor(),Be=Sa(R.current,n||"",i||t||"text",a||"");Be!==De.getModel()&&De.setModel(Be)}},[a],te),Ar(()=>{if(ie.current&&R.current){let De=ie.current.getModifiedEditor(),Be=Sa(R.current,e||"",o||t||"text",d||"");Be!==De.getModel()&&De.setModel(Be)}},[d],te),Ar(()=>{let De=ie.current.getModifiedEditor();De.getOption(R.current.editor.EditorOption.readOnly)?De.setValue(e||""):e!==De.getValue()&&(De.executeEdits("",[{range:De.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),De.pushUndoStop())},[e],te),Ar(()=>{ie.current?.getModel()?.original.setValue(n||"")},[n],te),Ar(()=>{let{original:De,modified:Be}=ie.current.getModel();R.current.editor.setModelLanguage(De,i||t||"text"),R.current.editor.setModelLanguage(Be,o||t||"text")},[t,i,o],te),Ar(()=>{R.current?.editor.setTheme(v)},[v],te),Ar(()=>{ie.current?.updateOptions(T)},[T],te);let N=H.useCallback(()=>{if(!R.current)return;O.current(R.current);let De=Sa(R.current,n||"",i||t||"text",a||""),Be=Sa(R.current,e||"",o||t||"text",d||"");ie.current?.setModel({original:De,modified:Be})},[t,e,o,n,i,a,d]),P=H.useCallback(()=>{!D.current&&k.current&&(ie.current=R.current.editor.createDiffEditor(k.current,{automaticLayout:!0,...T}),N(),R.current?.editor.setTheme(v),pe(!0),D.current=!0)},[T,v,N]);H.useEffect(()=>{te&&A.current(ie.current,R.current)},[te]),H.useEffect(()=>{!we&&!te&&P()},[we,te,P]);function Ae(){let De=ie.current?.getModel();h||De?.original?.dispose(),m||De?.modified?.dispose(),ie.current?.dispose()}return Bs.createElement($b,{width:z,height:C,isEditorReady:te,loading:x,_ref:k,className:G,wrapperProps:K})}var OR=DR;H.memo(OR);function MR(n){let e=H.useRef();return H.useEffect(()=>{e.current=n},[n]),e.current}var jR=MR,zu=new Map;function LR({defaultValue:n,defaultLanguage:e,defaultPath:t,value:i,language:o,path:a,theme:d="light",line:h,loading:m="Loading...",options:v={},overrideServices:x={},saveViewState:T=!0,keepCurrentModel:C=!1,width:z="100%",height:G="100%",className:K,wrapperProps:B={},beforeMount:ee=Yl,onMount:te=Yl,onChange:pe,onValidate:we=Yl}){let[re,ie]=H.useState(!1),[R,k]=H.useState(!0),A=H.useRef(null),O=H.useRef(null),D=H.useRef(null),N=H.useRef(te),P=H.useRef(ee),Ae=H.useRef(),De=H.useRef(i),Be=jR(a),qe=H.useRef(!1),ge=H.useRef(!1);Hb(()=>{let F=Bb.init();return F.then(se=>(A.current=se)&&k(!1)).catch(se=>se?.type!=="cancelation"&&console.error("Monaco initialization: error:",se)),()=>O.current?_e():F.cancel()}),Ar(()=>{let F=Sa(A.current,n||i||"",e||o||"",a||t||"");F!==O.current?.getModel()&&(T&&zu.set(Be,O.current?.saveViewState()),O.current?.setModel(F),T&&O.current?.restoreViewState(zu.get(a)))},[a],re),Ar(()=>{O.current?.updateOptions(v)},[v],re),Ar(()=>{!O.current||i===void 0||(O.current.getOption(A.current.editor.EditorOption.readOnly)?O.current.setValue(i):i!==O.current.getValue()&&(ge.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),O.current.pushUndoStop(),ge.current=!1))},[i],re),Ar(()=>{let F=O.current?.getModel();F&&o&&A.current?.editor.setModelLanguage(F,o)},[o],re),Ar(()=>{h!==void 0&&O.current?.revealLine(h)},[h],re),Ar(()=>{A.current?.editor.setTheme(d)},[d],re);let Te=H.useCallback(()=>{if(!(!D.current||!A.current)&&!qe.current){P.current(A.current);let F=a||t,se=Sa(A.current,i||n||"",e||o||"",F||"");O.current=A.current?.editor.create(D.current,{model:se,automaticLayout:!0,...v},x),T&&O.current.restoreViewState(zu.get(F)),A.current.editor.setTheme(d),h!==void 0&&O.current.revealLine(h),ie(!0),qe.current=!0}},[n,e,t,i,o,a,v,x,T,d,h]);H.useEffect(()=>{re&&N.current(O.current,A.current)},[re]),H.useEffect(()=>{!R&&!re&&Te()},[R,re,Te]),De.current=i,H.useEffect(()=>{re&&pe&&(Ae.current?.dispose(),Ae.current=O.current?.onDidChangeModelContent(F=>{ge.current||pe(O.current.getValue(),F)}))},[re,pe]),H.useEffect(()=>{if(re){let F=A.current.editor.onDidChangeMarkers(se=>{let Ie=O.current.getModel()?.uri;if(Ie&&se.find(Qe=>Qe.path===Ie.path)){let Qe=A.current.editor.getModelMarkers({resource:Ie});we?.(Qe)}});return()=>{F?.dispose()}}return()=>{}},[re,we]);function _e(){Ae.current?.dispose(),C?T&&zu.set(a,O.current.saveViewState()):O.current.getModel()?.dispose(),O.current.dispose()}return Bs.createElement($b,{width:z,height:G,isEditorReady:re,loading:m,_ref:D,className:K,wrapperProps:B})}var VR=LR,FR=H.memo(VR);function UR(n){const e=n.toLowerCase();return e.includes("drone")||e.includes("aerial")||e.includes("flyover")?"drone_cinematography":e.includes("shot")||e.includes("camera")||e.includes("lens")||e.includes("angle")?"cinematography":e.includes("person")||e.includes("woman")||e.includes("man")||e.includes("child")||e.includes("character")||e.includes("face")||e.includes("eyes")||e.includes("hair")?"people":e.includes("running")||e.includes("walking")||e.includes("dancing")||e.includes("moving")||e.includes("action")||e.includes("motion")||e.includes("dynamic")?"movement":e.includes("light")||e.includes("shadow")||e.includes("bright")||e.includes("dark")||e.includes("illuminat")||e.includes("glow")||e.includes("golden hour")?"lighting":e.includes("mountain")||e.includes("ocean")||e.includes("city")||e.includes("forest")||e.includes("landscape")||e.includes("beach")||e.includes("desert")||e.includes("urban")?"environment":e.includes("color")||e.includes("mood")||e.includes("atmosphere")||e.includes("tone")||e.includes("vibrant")||e.includes("dramatic")||e.includes("serene")?"mood_color":e.includes("resolution")||e.includes("quality")||e.includes("4k")||e.includes("8k")||e.includes("professional")||e.includes("studio")?"technical":"general"}function zR(n){switch(n){case"drone_cinematography":return"You are an expert in drone cinematography. Improve the selected text by adding specific drone camera movements, flight patterns, aerial perspectives, and cinematic techniques. Focus on technical drone terminology, movement dynamics, and visual storytelling from aerial viewpoints.";case"cinematography":return"You are an expert in cinematography. Improve the selected text by adding specific camera techniques, shot compositions, lens choices, camera movements, and professional filming terminology. Focus on visual storytelling and technical camera work.";case"people":return"You are an expert in portrait and character description. Improve the selected text by adding detailed descriptions of human features, expressions, emotions, poses, styling, and character traits. Focus on bringing the person to life with vivid, specific details.";case"movement":return"You are an expert in capturing movement and action. Improve the selected text by adding dynamic motion descriptions, body language, energy, flow, and kinetic details. Focus on making the movement feel alive and engaging.";case"lighting":return"You are an expert in lighting and illumination. Improve the selected text by adding specific lighting techniques, quality of light, direction, color temperature, shadows, highlights, and atmospheric lighting effects.";case"environment":return"You are an expert in environmental and landscape description. Improve the selected text by adding detailed descriptions of the setting, atmosphere, natural elements, architecture, and spatial relationships. Focus on creating a vivid sense of place.";case"mood_color":return"You are an expert in color theory and mood creation. Improve the selected text by adding specific color palettes, emotional tones, atmospheric qualities, and mood-enhancing details that create the desired feeling.";case"technical":return"You are an expert in technical photography and video production. Improve the selected text by adding professional technical specifications, quality standards, equipment details, and industry-standard terminology.";default:return"You are an expert in prompt engineering. Improve and make the selected text more detailed and precise within the context of the full prompt. Focus on enhancing the specific aspect mentioned in the selected text."}}class BR{settings=null;constructor(){this.loadSettings()}async loadSettings(){try{const e=await kP();e&&(this.settings=e.chatgpt)}catch(e){console.error("Error loading ChatGPT settings:",e)}}getModelOrDefault(){return this.settings?.model&&typeof this.settings.model=="string"&&this.settings.model.trim()||"gpt-5"}async postWithModelFallback(e){const t=this.getModelOrDefault(),i=this.settings.apiKey;if(!i||i.trim().length===0)return new Response(JSON.stringify({error:{message:"Missing API key"}}),{status:400});const o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(e(t))});if(o.ok)return o;try{const d=(await o.json().catch(()=>({})))?.error?.message?.toLowerCase?.()||"";if(o.status===404||d.includes("model")&&(d.includes("not")||d.includes("unknown"))){const h="gpt-4o";if(t!==h)return fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(e(h))})}}catch{}return o}isConfigured(){return!!(this.settings?.apiKey&&this.settings?.enabled)}async improvePrompt(e){if(!this.isConfigured())return{success:!1,error:"ChatGPT ist nicht konfiguriert. Bitte API-Key in den Einstellungen eingeben."};const t=e.split(`
`),i=[],o=[];t.forEach(d=>{d.trim().startsWith("//")?i.push(d):o.push(d)});const a=o.join(`
`).trim();if(!a)return{success:!1,error:"Prompt contains only comments. Please add some actual content."};try{const d=await this.postWithModelFallback(T=>({model:T,messages:[{role:"system",content:"You are an expert in prompt engineering. Improve the following prompt to make it more precise, creative, and effective. Return only the improved prompt without any additional explanations. Keep it in English."},{role:"user",content:a}],temperature:this.settings.temperature,max_tokens:this.settings.maxTokens}));if(!d.ok)return{success:!1,error:`API-Fehler: ${(await d.json()).error?.message||"Unbekannter Fehler"}`};const m=(await d.json()).choices[0]?.message?.content;if(!m)return{success:!1,error:"Keine Antwort von ChatGPT erhalten"};const v=m.replace(/^[\s\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+|[\s\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+$/g,"");return{success:!0,content:i.length>0?i.join(`
`)+`

`+v:v}}catch(d){return{success:!1,error:`Fehler bei der API-Anfrage: ${d instanceof Error?d.message:"Unbekannter Fehler"}`}}}async improveSelectedText(e,t){if(!this.isConfigured())return{success:!1,error:"ChatGPT ist nicht konfiguriert. Bitte API-Key in den Einstellungen eingeben."};const i=t.split(`
`).filter(d=>!d.trim().startsWith("//")).join(`
`).trim(),o=UR(e),a=zR(o);try{const d=await this.postWithModelFallback(v=>({model:v,messages:[{role:"system",content:`${a} Return only the improved version of the selected text, without any additional explanations. Keep it in English.`},{role:"user",content:`Context: ${i}

Selected text to improve: ${e}

Provide an improved and more detailed version of this selected text that fits naturally within the context.`}],temperature:this.settings.temperature,max_tokens:this.settings.maxTokens}));if(!d.ok)return{success:!1,error:`API-Fehler: ${(await d.json()).error?.message||"Unbekannter Fehler"}`};const m=(await d.json()).choices[0]?.message?.content;return m?{success:!0,content:m.replace(/^[\s\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+|[\s\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+$/g,"")}:{success:!1,error:"Keine Antwort von ChatGPT erhalten"}}catch(d){return{success:!1,error:`Fehler bei der API-Anfrage: ${d instanceof Error?d.message:"Unbekannter Fehler"}`}}}async generateVariations(e){if(!this.isConfigured())return{success:!1,error:"ChatGPT ist nicht konfiguriert. Bitte API-Key in den Einstellungen eingeben."};const t=e.split(`
`).filter(i=>!i.trim().startsWith("//")).join(`
`).trim();if(!t)return{success:!1,error:"Prompt contains only comments. Please add some actual content."};try{const i=await this.postWithModelFallback(d=>({model:d,messages:[{role:"system",content:"You are an expert in prompt engineering. Create 3 different variations of the following prompt with different styles and approaches. Return them as a numbered list. Keep everything in English."},{role:"user",content:t}],temperature:(this.settings.temperature??.7)+.2,max_tokens:this.settings.maxTokens}));if(!i.ok)return{success:!1,error:`API-Fehler: ${(await i.json()).error?.message||"Unbekannter Fehler"}`};const a=(await i.json()).choices[0]?.message?.content;return a?{success:!0,content:a.replace(/^[\s\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+|[\s\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+$/g,"")}:{success:!1,error:"Keine Antwort von ChatGPT erhalten"}}catch(i){return{success:!1,error:`Fehler bei der API-Anfrage: ${i instanceof Error?i.message:"Unbekannter Fehler"}`}}}async improveSelectedTextWithCustomPrompt(e,t,i){if(!this.isConfigured())return{success:!1,error:"ChatGPT ist nicht konfiguriert. Bitte API-Key in den Einstellungen eingeben."};const o=t.split(`
`).filter(a=>!a.trim().startsWith("//")).join(`
`).trim();try{const a=await this.postWithModelFallback(m=>({model:m,messages:[{role:"system",content:"You are an expert prompt engineer. Apply the user's custom instructions to improve the selected text. Return only the improved version of the selected text, without any additional explanations. Keep it in English."},{role:"user",content:`Context: ${o}

Selected text to improve: ${e}

Custom instructions: ${i}

Apply the custom instructions to improve the selected text. Make sure it fits naturally within the context.`}],temperature:this.settings.temperature,max_tokens:this.settings.maxTokens}));if(!a.ok)return{success:!1,error:`API-Fehler: ${(await a.json()).error?.message||"Unbekannter Fehler"}`};const h=(await a.json()).choices[0]?.message?.content;return h?{success:!0,content:h.replace(/^[\s\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+|[\s\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+$/g,"")}:{success:!1,error:"Keine Antwort von ChatGPT erhalten"}}catch(a){return{success:!1,error:`Fehler bei der API-Anfrage: ${a instanceof Error?a.message:"Unbekannter Fehler"}`}}}async intelligentlyIntegratePromptElement(e,t,i){if(!this.isConfigured())return{success:!1,error:"ChatGPT ist nicht konfiguriert. Bitte API-Key in den Einstellungen eingeben."};e.replace(/\/\/.*$/gm,"").trim();try{const o=await this.postWithModelFallback(h=>({model:h,messages:[{role:"system",content:`You are an expert at intelligently integrating new elements into existing image/video generation prompts. Your task is to seamlessly incorporate the new element into the most appropriate place in the existing prompt, replacing or enhancing similar elements if they exist.

RULES:
1. Analyze the current prompt structure and content
2. Find the most logical place to integrate the new element
3. If a similar element already exists, replace or enhance it intelligently
4. Maintain the overall flow and structure of the prompt
5. Keep all existing elements that don't conflict
6. Don't just append - integrate naturally
7. Preserve any comments (lines starting with //)
8. Return only the improved prompt without explanations`},{role:"user",content:`Current prompt: "${e}"

New element to integrate: "${t}"
Element category: "${i}"

Please intelligently integrate this new element into the existing prompt, finding the best place for it and replacing/enhancing any conflicting elements. Keep the prompt natural and well-structured.`}],temperature:.3,max_tokens:800}));if(!o.ok)return{success:!1,error:`API-Fehler: ${(await o.json()).error?.message||"Unbekannter Fehler"}`};const d=(await o.json()).choices[0]?.message?.content;return d?{success:!0,content:d.trim()}:{success:!1,error:"Keine Antwort von ChatGPT erhalten"}}catch(o){return{success:!1,error:`Fehler bei der API-Anfrage: ${o instanceof Error?o.message:"Unbekannter Fehler"}`}}}updateSettings(){this.loadSettings()}}const tr=new BR,$R=[{word:"camera",category:"photography",suggestions:["DSLR camera","mirrorless camera","medium format camera","film camera","vintage camera","professional camera","cinema camera","RED camera","ARRI camera","Blackmagic camera"],description:"Camera types and brands"},{word:"lens",category:"photography",suggestions:["50mm lens","85mm lens","24-70mm lens","70-200mm lens","macro lens","wide-angle lens","telephoto lens","prime lens","zoom lens","fish-eye lens"],description:"Lens types and focal lengths"},{word:"shot",category:"cinematography",suggestions:["close-up shot","medium shot","wide shot","extreme close-up","establishing shot","tracking shot","dolly shot","crane shot","handheld shot","static shot"],description:"Camera shot types"},{word:"drone",category:"cinematography",suggestions:["aerial drone shot","bird's eye view","drone flyover","drone tracking shot","ascending drone shot","descending drone shot","orbital drone shot","reveal drone shot"],description:"Drone cinematography techniques"},{word:"lighting",category:"lighting",suggestions:["cinematic lighting","dramatic lighting","soft lighting","hard lighting","natural lighting","studio lighting","golden hour lighting","blue hour lighting","rim lighting","backlighting"],description:"Lighting techniques and styles"},{word:"shadows",category:"lighting",suggestions:["dramatic shadows","soft shadows","harsh shadows","long shadows","deep shadows","cast shadows","rim shadows","contoured shadows","mysterious shadows"],description:"Shadow styles and effects"},{word:"person",category:"people",suggestions:["elegant person","mysterious person","confident person","graceful person","professional person","artistic person","fashionable person","charismatic person"],description:"Person characteristics"},{word:"woman",category:"people",suggestions:["elegant woman","beautiful woman","confident woman","mysterious woman","graceful woman","professional woman","artistic woman","sophisticated woman","charismatic woman"],description:"Woman characteristics"},{word:"man",category:"people",suggestions:["handsome man","confident man","mysterious man","elegant man","rugged man","professional man","artistic man","sophisticated man","charismatic man"],description:"Man characteristics"},{word:"face",category:"people",suggestions:["expressive face","serene face","striking face","gentle face","intense face","weathered face","youthful face","wise face","captivating face"],description:"Facial expressions and qualities"},{word:"eyes",category:"people",suggestions:["piercing eyes","gentle eyes","mysterious eyes","bright eyes","deep eyes","sparkling eyes","intense eyes","soulful eyes","captivating eyes"],description:"Eye descriptions"},{word:"pose",category:"poses",suggestions:["confident pose","elegant pose","dynamic pose","relaxed pose","dramatic pose","artistic pose","natural pose","professional pose","candid pose"],description:"Pose styles"},{word:"running",category:"movement",suggestions:["dynamic running","sprint running","marathon running","trail running","beach running","forest running","urban running","motion blur running"],description:"Running styles and contexts"},{word:"walking",category:"movement",suggestions:["confident walking","casual walking","elegant walking","purposeful walking","slow motion walking","silhouette walking","street walking"],description:"Walking styles"},{word:"landscape",category:"environment",suggestions:["mountain landscape","coastal landscape","forest landscape","desert landscape","urban landscape","rural landscape","dramatic landscape","serene landscape"],description:"Landscape types"},{word:"mountain",category:"environment",suggestions:["majestic mountain","snow-capped mountain","rugged mountain","misty mountain","alpine mountain","volcanic mountain","desert mountain","forest mountain"],description:"Mountain characteristics"},{word:"ocean",category:"environment",suggestions:["calm ocean","stormy ocean","turquoise ocean","deep blue ocean","sunset ocean","sunrise ocean","tropical ocean","arctic ocean"],description:"Ocean conditions and styles"},{word:"city",category:"environment",suggestions:["modern city","futuristic city","historic city","bustling city","neon city","cyberpunk city","metropolis city","coastal city","mountain city"],description:"City types and styles"},{word:"color",category:"color",suggestions:["vibrant colors","muted colors","warm colors","cool colors","monochromatic colors","complementary colors","saturated colors","desaturated colors","natural colors"],description:"Color palettes and styles"},{word:"mood",category:"mood",suggestions:["dramatic mood","serene mood","mysterious mood","romantic mood","energetic mood","melancholic mood","uplifting mood","intense mood","peaceful mood"],description:"Mood and atmosphere"},{word:"resolution",category:"technical",suggestions:["4K resolution","8K resolution","ultra high resolution","high resolution","cinema resolution","broadcast resolution","web resolution"],description:"Image resolution standards"},{word:"quality",category:"technical",suggestions:["professional quality","studio quality","broadcast quality","cinema quality","high quality","premium quality","commercial quality","artistic quality"],description:"Quality standards"},{word:"style",category:"style",suggestions:["cinematic style","documentary style","fashion style","artistic style","vintage style","modern style","minimalist style","dramatic style"],description:"Visual styles"},{word:"aesthetic",category:"style",suggestions:["cinematic aesthetic","vintage aesthetic","modern aesthetic","minimalist aesthetic","cyberpunk aesthetic","film noir aesthetic","art deco aesthetic"],description:"Aesthetic styles"}];function HR(n){const e=$R.find(t=>t.word.toLowerCase()===n.toLowerCase()||n.toLowerCase().includes(t.word.toLowerCase())||t.word.toLowerCase().includes(n.toLowerCase()));return e?e.suggestions:[]}const Bu={subject:["woman","man","person","character","girl","boy","child","baby","teen","teenager","adult","elderly","old","young","model","portrait","face","people","human","figure","lady","gentleman","male","female","mother","father","sister","brother","family","warrior","knight","wizard","mage","soldier","doctor","nurse","teacher","artist","musician","dancer","chef","pilot","captain","prince","princess","king","queen","hero","villain","assassin","thief","merchant","blacksmith","monk","priest","elf","dwarf","orc","dragon","unicorn","phoenix","angel","demon","vampire","witch","zombie","robot","cyborg","alien","android","mermaid","fairy","giant","goblin","cat","dog","wolf","lion","tiger","bear","eagle","dragon","horse","deer","fox","rabbit","bird","fish","shark","whale","elephant","monkey","snake","sword","shield","armor","crown","ring","necklace","crystal","gem","treasure","book","scroll","map","key","door","window","mirror","painting","statue","paperclip","jacket","collar","zipper","pattern","surface","finish","cigarette","whiskey","smoke","eyebrows","figures","middle-aged","sturdy","build","deep-set","eyes","broad","nose","full","beard","rounded","jawline","tanned","tone","smooth","texture","dark","brown","hair","slight","wave","loose-fitting","short-sleeved","hawaiian","shirt","beige","base","palm","leaf","patterns","khaki","pants","contemplative","introspection","mild","concern","distinctive","feature","bright","red","button","facial","features","skin","tones"],style:["cinematic","photorealistic","hyperrealistic","realistic","anime","manga","cartoon","comic","illustration","digital art","concept art","matte painting","oil painting","watercolor","acrylic","pastel","sketch","drawing","pencil","charcoal","ink","luxurious","sophisticated","high-fashion","avant-garde","structured","textured","3D render","3D","rendered","CGI","blender","maya","octane render","unreal engine","unity","raytracing","subsurface scattering","volumetric","procedural","photography","photo","portrait photography","landscape photography","macro photography","street photography","film photography","polaroid","vintage","retro","noir","impressionist","expressionist","surreal","abstract","minimalist","baroque","renaissance","art nouveau","art deco","pop art","cubist","futuristic","steampunk","cyberpunk","dieselpunk","gothic","victorian","medieval","ancient","modern","contemporary","movie-quality","film","grain","cinematography","hollywood-style","epic","visuals","vintage","style","retro","aesthetic","classic","nostalgic","mood","timeless","appeal","aged","patina","minimalist","clean","simple","elegance","uncluttered","sophisticated","dramatic","intense","powerful","bold","contrasts","striking","elegant","refined","aesthetics","luxury","high-end","premium","quality","tasteful","design","fashion","modeling","studio","magazine-worthy","artistic","creative","fine","art","unique","perspective","professional","artistry","film emulation","kodak","fuji","portra","ektar","vision3","gallery-worthy","expressive","lifelike","perfect","details"],lighting:["golden hour","blue hour","sunrise","sunset","dawn","dusk","midday","noon","midnight","twilight","evening","morning","night","day","soft light","hard light","natural light","artificial light","candlelight","firelight","neon light","LED","fluorescent","incandescent","spotlight","flashlight","torch","moonlight","starlight","backlight","key light","fill light","rim light","practical lights","dramatic lighting","moody lighting","ambient lighting","volumetric lighting","rim lighting","back lighting","side lighting","front lighting","top lighting","under lighting","bounce lighting","fill lighting","key lighting","moody","shadowy","atmosphere","even","accentuating","lens flare","light rays","god rays","sunbeams","shadows","silhouette","chiaroscuro","high contrast","low contrast","bright","dark","dim","glowing","luminous","radiant","shimmering","sparkling","twinkling","desk","lamp","gentle","shadows","cozy","atmosphere","subtle","highlights","daylight","organic","illumination","controlled","exposure","commercial","movie-style","sunset","glow","magical","hour","deep","blue","sky","evening","serene","ambiance","intense","diffused","flattering","backlit","silhouette","effect","colorful","urban","night","scene","futuristic","beams","rays","professional","setup","perfect","quality","film-quality","noir lighting","high key","low key","rembrandt lighting","split lighting","butterfly lighting","three-point lighting","studio strobe","softbox","beauty dish","gridded light","practical neon"],camera:["close-up","extreme close-up","medium shot","long shot","wide shot","extreme wide shot","full body","half body","head shot","portrait","headshot","bust shot","cowboy shot","over the shoulder","OTS","two-shot","establishing shot","insert shot","low angle","high angle","bird's eye view","worm's eye view","eye level","dutch angle","tilted","aerial view","overhead","top down","side view","front view","back view","macro","telephoto","wide angle","fisheye","tilt-shift","prime lens","zoom lens","35mm","50mm","85mm","24mm","135mm","200mm","shallow depth of field","deep depth of field","bokeh","sharp focus","soft focus","motion blur","freeze motion","long exposure","double exposure","multiple exposure","rule of thirds","centered","symmetrical","asymmetrical","diagonal","vertical","horizontal","panoramic","square format","portrait orientation","landscape orientation","medium","angle","profile","waist","up","positioned","slightly","left","providing","side","emphasizes","confines","tilted","composition","dynamic","framing","intimate","intricate","details","vast","landscape","epic","scenery","professional","headshot","studio","lighting","sharp","focus","beautiful","detailed","creative","artistic","perspective","stunning","texture","resolution","scale","dramatic","capturing","seated","positioned","pan","tilt","dolly","truck","arc","crane","steadicam","handheld","gimbal","zoom","crash zoom","whip pan"],quality:["4K","8K","2K","HD","Full HD","Ultra HD","high resolution","low resolution","pixel perfect","crisp","sharp","detailed","ultra detailed","highly detailed","masterpiece","best quality","high quality","professional","award winning","trending on artstation","featured on behance","viral","popular","famous","iconic","legendary","epic","stunning","breathtaking","gorgeous","beautiful","amazing","incredible","fantastic","wonderful","perfect","flawless","super","extreme","large","expressive","arched","luxurious","rich","anti-aliasing","ray tracing","global illumination","ambient occlusion","subsurface scattering","caustics","chromatic aberration","film grain","noise","clean","smooth","polished","refined","optimized","glossy","shiny","textured","embossed","cropped","reflects","highlights","visual interest","expert","technique","equipment","crystal","clear","pristine","image","beautiful","bokeh","shallow","depth","field","lens","artistic","blur","background","separation","dreamy","tack","sharpness","detail","clarity","commercial","magazine","worthy","gallery","award","winning"],color:["red","blue","green","yellow","orange","purple","pink","brown","black","white","gray","grey","silver","gold","bronze","copper","platinum","burgundy","neutral","vibrant","vivid","bright","dark","light","pale","deep","rich","saturated","desaturated","muted","subtle","bold","intense","soft","warm","cool","monochrome","black and white","sepia","colorful","multicolored","rainbow","complementary colors","analogous colors","triadic","split complementary","tetradic","monochromatic","neutral colors","earth tones","pastel colors","neon colors","metallic","iridescent","holographic","pearlescent"],emotion:["happy","joyful","cheerful","smiling","laughing","excited","enthusiastic","confident","proud","peaceful","calm","serene","content","satisfied","hopeful","optimistic","loving","caring","gentle","kind","friendly","sad","crying","depressed","melancholic","angry","furious","mad","upset","frustrated","annoyed","scared","frightened","terrified","worried","anxious","stressed","tired","exhausted","bored","lonely","isolated","disappointment","despair","weariness","somber","profound","mysterious","enigmatic","thoughtful","contemplative","serious","stern","determined","focused","intense","passionate","romantic","seductive","playful","mischievous","curious","surprised","shocked","amazed","introspective","quiet","moment","essence","capturing"],setting:["forest","mountain","desert","beach","ocean","lake","river","waterfall","cave","valley","hill","meadow","field","garden","jungle","swamp","tundra","glacier","volcano","canyon","cliff","island","plains","savanna","city","town","village","street","alley","building","skyscraper","house","apartment","office","store","restaurant","cafe","bar","club","theater","museum","library","school","hospital","church","temple","mosque","room","bedroom","living room","kitchen","bathroom","basement","attic","hallway","stairs","balcony","window","door","fireplace","couch","bed","castle","palace","tower","dungeon","spaceship","space station","alien world","futuristic city","cyberpunk city","steampunk","medieval","ancient ruins","magical forest","enchanted","mystical","otherworldly","dimensional","scene","background","atmosphere","cubicle","desk","office","fabric","walls","pinned","notes","papers","potted","plant","greenery","ordinary","space","routine","everyday","life","neutral-colored","adorned","touch","setting","typical","context","mundane","workday"]},Cv={quality:[/\b(ultra|super|hyper|extremely?|very|highly?)\s+(detailed|realistic|sharp|crisp|clear)\b/gi,/\b\d+k\s+(resolution|quality|detail)\b/gi,/\b(award\s+winning|trending\s+on|featured\s+on)\b/gi,/\b(professional\s+photography|expert\s+technique|high-end\s+equipment)\b/gi,/\b(crystal\s+clear|pristine\s+image\s+quality|stunning\s+clarity)\b/gi,/\b(beautiful\s+bokeh|shallow\s+depth\s+of\s+field|professional\s+lens)\b/gi,/\b(tack\s+sharp|perfect\s+detail|high\s+resolution)\b/gi],style:[/\b\w+\s+(style|art|painting|drawing|render)\b/gi,/\bin\s+the\s+style\s+of\b/gi,/\b\w+(punk|core|wave)\b/gi,/\b(portrait\s+photography|fashion\s+photography|professional\s+photography)\b/gi,/\b(high-end\s+style|magazine-worthy|gallery-worthy)\b/gi,/\b(cinematic\s+style|movie-quality|film\s+grain)\b/gi,/\b(vintage\s+style|retro\s+aesthetic|classic\s+photography)\b/gi,/\b(minimalist\s+style|elegant\s+style|artistic\s+style)\b/gi],camera:[/\b\d+mm\s+(lens|shot|focal)\b/gi,/\b(depth\s+of\s+field|dof)\b/gi,/\b\w+\s+(shot|angle|view|perspective)\b/gi,/\b(extreme\s+wide\s+shot|wide\s+shot|close\s+up|medium\s+shot)\b/gi,/\b(dutch\s+angle|tilted\s+composition|dynamic\s+framing)\b/gi,/\b(intimate\s+framing|creative\s+angle|artistic\s+perspective)\b/gi,/\b(professional\s+headshot|studio\s+lighting|sharp\s+focus)\b/gi,/\b(beautiful\s+composition|detailed\s+facial\s+features)\b/gi],lighting:[/\b\w+\s+(light|lighting|lit|illuminated)\b/gi,/\b(hour|time)\s+(light|lighting)\b/gi,/\b(golden\s+hour\s+lighting|blue\s+hour\s+lighting|natural\s+lighting)\b/gi,/\b(studio\s+lighting|cinematic\s+lighting|dramatic\s+lighting)\b/gi,/\b(soft\s+lighting|volumetric\s+lighting|ambient\s+lighting)\b/gi,/\b(professional\s+lighting|controlled\s+illumination|perfect\s+exposure)\b/gi],comment:[/^.*\/\/.*$/gm]};class qR{keywordRegexes;patternRegexes;constructor(){this.keywordRegexes=new Map,this.patternRegexes=new Map,this.buildRegexes()}buildRegexes(){for(const[e,t]of Object.entries(Bu)){const o=`\\b(${t.map(a=>a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|")})\\b`;this.keywordRegexes.set(e,new RegExp(o,"gi"))}for(const[e,t]of Object.entries(Cv))this.patternRegexes.set(e,t)}highlight(e){const t=[],i=[],o=this.patternRegexes.get("comment")||[];for(const a of o){let d;for(a.lastIndex=0;(d=a.exec(e))!==null;){const h=d.index,m=d.index+d[0].length;t.push({start:h,end:m,category:"comment",text:d[0]}),i.push([h,m])}}for(const[a,d]of this.keywordRegexes.entries()){let h;for(d.lastIndex=0;(h=d.exec(e))!==null;){const m=h.index,v=h.index+h[0].length;this.hasOverlap(m,v,i)||(t.push({start:m,end:v,category:a,text:h[0]}),i.push([m,v]))}}for(const[a,d]of this.patternRegexes.entries())if(a!=="comment")for(const h of d){let m;for(h.lastIndex=0;(m=h.exec(e))!==null;){const v=m.index,x=m.index+m[0].length;this.hasOverlap(v,x,i)||(t.push({start:v,end:x,category:a,text:m[0]}),i.push([v,x]))}}return t.sort((a,d)=>a.start-d.start)}hasOverlap(e,t,i){return i.some(([o,a])=>e<a&&t>o)}getCategoryColor(e){return{subject:"#3B82F6",style:"#8B5CF6",lighting:"#F59E0B",camera:"#10B981",quality:"#06B6D4",color:"#EC4899",emotion:"#EAB308",setting:"#14B8A6",comment:"#6A9955"}[e]||"#6B7280"}getStats(){const e=Object.values(Bu).reduce((o,a)=>o+a.length,0),t=Object.keys(Bu).length,i=Object.values(Cv).reduce((o,a)=>o+a.length,0);return{totalKeywords:e,categories:t,patterns:i}}debugHighlight(e){const t=this.highlight(e);let i=`🔍 HIGHLIGHTING DEBUG for: "${e.substring(0,100)}..."

`;return i+=`Found ${t.length} highlights:

`,t.forEach((o,a)=>{i+=`${a+1}. "${o.text}" → ${o.category.toUpperCase()} (${o.start}-${o.end})
`}),t.length===0&&(i+=`❌ NO MATCHES FOUND!
`,i+=`🔍 Checking individual words:
`,e.toLowerCase().split(/\s+/).forEach(a=>{const d=a.replace(/[.,!?;:"'()]/g,"");let h=!1;for(const[m,v]of Object.entries(Bu))if(v.some(x=>x.toLowerCase()===d)){i+=`  ✅ "${d}" should match ${m}
`,h=!0;break}h||(i+=`  ❌ "${d}" - no match
`)})),i}}const $u=new qR,Cp=H.forwardRef(({section:n="my-prompts"},e)=>{const{user:t}=Tc(),[i,o]=H.useState(""),[a,d]=H.useState(null),[h,m]=H.useState(!1),[v,x]=H.useState([]),[T,C]=H.useState([]),[z,G]=H.useState(!1),[K,B]=H.useState(!1),[ee,te]=H.useState(!1),[pe,we]=H.useState(!1),[re,ie]=H.useState(!1),[R,k]=H.useState(!1),[A,O]=H.useState(!1),[D,N]=H.useState(null),[P,Ae]=H.useState(!1),[De,Be]=H.useState(""),[qe,ge]=H.useState(!1),[Te,_e]=H.useState(null),[F,se]=H.useState(""),[Ie,Qe]=H.useState(!1),[Je,st]=H.useState("conservative"),[tt,at]=H.useState(""),[bt,It]=H.useState(!1),[Ut,Wn]=H.useState(""),[Gt,pn]=H.useState(!1),[zt,_r]=H.useState(!1),[ir,sr]=H.useState(!1),[jn,tn]=H.useState(!1),[mn,or]=H.useState(null),[Bt,Qn]=H.useState(null),[Pr,Ct]=H.useState([]),[Tt,gn]=H.useState({x:0,y:0}),[br,Ln]=H.useState("gpt-4o"),[ar,Tn]=H.useState("detailed"),[Rr,Sn]=H.useState(!1),[lr,kn]=H.useState(null),[xr,In]=H.useState(null),pt=H.useRef(null),q=H.useRef(null),[X,me]=H.useState({lineNumber:1,column:1}),[Se,ke]=H.useState(!1),[Ue,Oe]=H.useState(!1),wt=H.useRef(null),St=H.useRef(null),[Cn,kt]=H.useState(null),cr=[{id:"extreme_closeup",label:"Extreme Close‑up",instruction:"Change only the SHOT SIZE/FRAMING language to EXTREME CLOSE‑UP. Update camera/framing words and remove contradictions (wide/expansive/establishing). Keep all other content (subject, style, lighting, environment, lists) UNCHANGED VERBATIM unless a phrase directly conflicts. Preserve the same // headers and order. Return ONLY the full revised prompt."},{id:"closeup",label:"Close‑up",instruction:"Change only the SHOT SIZE/FRAMING to CLOSE‑UP (portrait). Adjust camera/framing words and subject scale; remove wide/ultra‑wide cues. Keep everything else UNCHANGED VERBATIM unless it conflicts with the new shot size. Maintain the same // headers and order. Return ONLY the full revised prompt."},{id:"medium_closeup",label:"Medium Close‑up",instruction:"Switch the SHOT SIZE to MEDIUM CLOSE‑UP (head to mid‑chest). Update only framing/scale words and remove contradicting extremes; keep all other content UNCHANGED VERBATIM. Preserve the // headers and order. Return ONLY the full revised prompt."},{id:"medium",label:"Medium",instruction:"Set the SHOT SIZE to MEDIUM (waist‑up). Update framing/scale terms only; keep subject, lighting, style, and environment text UNCHANGED VERBATIM unless directly conflicting. Keep the same // headers and order. Return ONLY the full revised prompt."},{id:"medium_long",label:"Medium Long (Cowboy)",instruction:"Set the SHOT SIZE to MEDIUM LONG (cowboy, mid‑thigh up). Modify only framing/scale phrases and remove conflicts; keep all other wording UNCHANGED VERBATIM. Preserve // headers and order. Return ONLY the full revised prompt."},{id:"long",label:"Long Shot",instruction:"Change only to LONG SHOT (full body, readable environment). Adjust camera/framing/scale wording; keep all other sections UNCHANGED VERBATIM unless a phrase directly contradicts. Maintain the same // headers and order. Return ONLY the full revised prompt."},{id:"wide",label:"Wide",instruction:"Switch only the framing to WIDE SHOT (environment emphasized, subject smaller). Update framing/scale words and remove tight‑framing cues; keep the rest UNCHANGED VERBATIM. Keep the // headers and order. Return ONLY the full revised prompt."},{id:"extreme_wide",label:"Extreme Wide",instruction:"Set only the framing to EXTREME WIDE / ESTABLISHING (vast environment, subject tiny). Update shot size and any contradictory close/tight words; keep all other content UNCHANGED VERBATIM. Preserve // headers and order. Return ONLY the full revised prompt."},{id:"topshot",label:"Top Shot (Overhead)",instruction:"Change only angle/framing to TOP‑DOWN OVERHEAD (bird's‑eye). Update camera/angle/scale words and remove direct conflicts (e.g., eye‑level). Keep lighting/style/subject/environment text UNCHANGED VERBATIM otherwise. Maintain // headers and order. Return ONLY the full revised prompt."},{id:"highangle",label:"High Angle",instruction:"Set only the angle to HIGH ANGLE (camera looking down). Adjust camera/angle and any directly conflicting phrases; keep everything else UNCHANGED VERBATIM. Keep // headers and order. Return ONLY the full revised prompt."},{id:"lowangle",label:"Low Angle",instruction:"Set only the angle to LOW ANGLE (camera looking up). Update camera/angle/scale wording; keep all other content UNCHANGED VERBATIM unless conflicting. Preserve // headers and order. Return ONLY the full revised prompt."},{id:"dutch",label:"Dutch Angle",instruction:"Change only to DUTCH ANGLE (tilted horizon). Adjust angle/framing wording; keep the rest UNCHANGED VERBATIM unless directly contradicting. Maintain // headers and order. Return ONLY the full revised prompt."},{id:"droneshot",label:"Drone Shot",instruction:"Change only to an AERIAL DRONE SHOT. Update camera/angle/framing words (aerial, altitude, overhead/diagonal) and remove ground‑level contradictions (eye‑level, close/tight if conflicting). Keep subject, style, lighting, and environment descriptions UNCHANGED VERBATIM otherwise. Preserve the same // headers and order. Return ONLY the full revised prompt."},{id:"orbit",label:"Orbit",instruction:"Change only to an ORBIT SHOT (camera circling the subject). Add/adjust minimal camera motion phrasing; keep all other text UNCHANGED VERBATIM unless conflicting. Preserve // headers and order. Return ONLY the full revised prompt."}],lt=async w=>{const S=cr.find(b=>b.id===w);if(S){ke(!0);try{if(!i.trim())throw new Error("Kein Prompt vorhanden");const b=await tr.improveSelectedTextWithCustomPrompt(i,"",S.instruction);if(!b.success||!b.content)throw new Error(b.error||"Keine Antwort");const M=b.content.trim();if(o(M),a)try{await Ml(a.id,{content:M})}catch{}be.success(`${S.label}: Prompt aktualisiert`)}catch(b){be.error(b?.message||"Fehler beim Erstellen")}finally{ke(!1)}}},Yt=Bs.useCallback(()=>{const w=pt.current,S=w?.getSelection(),b=w?.getModel();return S&&b?b.getValueInRange(S):""},[]);H.useEffect(()=>{(async()=>{try{const S=await Ip();C(S);const b=await ct.loadData("settings")||{};Ln(b.vision_model||"gpt-4o"),Tn(b.vision_prompt_style||"detailed")}catch(S){console.error("Error loading saved data:",S)}})()},[]),H.useEffect(()=>{const w=S=>{const{prompts:b}=S.detail;C(b),b.length===0&&(d(null),o(""),m(!1))};return window.addEventListener("prompts-updated",w),()=>{window.removeEventListener("prompts-updated",w)}},[]),H.useEffect(()=>{document.documentElement.classList.add("dark");const w=document.getElementById("monaco-editor-fixed-styles");w&&w.remove();const S=document.createElement("style");S.id="monaco-editor-fixed-styles",S.textContent=`
      /* MONACO EDITOR DARK THEME - BULLETPROOF FIX */
      .monaco-editor {
        background-color: #1e1e1e !important;
        color: #d4d4d4 !important;
      }
      
      .monaco-editor .view-line {
        background-color: transparent !important;
      }
      
      .monaco-editor .view-lines {
        background-color: transparent !important;
      }
      
      .monaco-editor .margin {
        background-color: #1e1e1e !important;
      }
      
      /* TEXT SELECTION - BULLETPROOF APPROACH */
      .monaco-editor .view-line span {
        color: #d4d4d4 !important;
      }
      
      .monaco-editor .view-line span::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk1::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk1::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk2::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk2::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      /* ⚡ INSTANT HIGHLIGHTING CATEGORIES - 8 COLORS */
      .monaco-editor .subject-highlight {
        color: #3B82F6 !important; /* Blue - Subjects & Characters */
        font-weight: bold !important;
        text-shadow: 0 0 2px #3B82F680 !important;
      }
      
      .monaco-editor .style-highlight {
        color: #8B5CF6 !important; /* Purple - Styles & Aesthetics */  
        font-weight: bold !important;
        text-shadow: 0 0 2px #8B5CF680 !important;
      }
      
      .monaco-editor .lighting-highlight {
        color: #F59E0B !important; /* Orange - Lighting & Atmosphere */
        font-weight: bold !important;
        text-shadow: 0 0 2px #F59E0B80 !important;
      }
      
      .monaco-editor .camera-highlight {
        color: #10B981 !important; /* Green - Camera & Composition */
        font-weight: bold !important;
        text-shadow: 0 0 2px #10B98180 !important;
      }
      
      .monaco-editor .quality-highlight {
        color: #06B6D4 !important; /* Cyan - Quality & Technical */
        font-weight: bold !important;
        text-shadow: 0 0 2px #06B6D480 !important;
      }
      
      .monaco-editor .color-highlight {
        color: #EC4899 !important; /* Pink - Colors & Palette */
        font-weight: bold !important;
        text-shadow: 0 0 2px #EC489980 !important;
      }
      
      .monaco-editor .emotion-highlight {
        color: #EAB308 !important; /* Yellow - Emotions & Mood */
        font-weight: bold !important;
        text-shadow: 0 0 2px #EAB30880 !important;
      }
      
      .monaco-editor .setting-highlight {
        color: #14B8A6 !important; /* Teal - Settings & Environments */
        font-weight: bold !important;
        text-shadow: 0 0 2px #14B8A680 !important;
      }
      
      /* 💬 COMMENT HIGHLIGHTING - IDE Style - HIGHEST PRIORITY */
      .monaco-editor .comment-highlight,
      .monaco-editor .comment-highlight.subject-highlight,
      .monaco-editor .comment-highlight.style-highlight,
      .monaco-editor .comment-highlight.lighting-highlight,
      .monaco-editor .comment-highlight.camera-highlight,
      .monaco-editor .comment-highlight.quality-highlight,
      .monaco-editor .comment-highlight.emotion-highlight,
      .monaco-editor .comment-highlight.setting-highlight {
        color: #6A9955 !important; /* VSCode comment green */
        font-weight: normal !important;
        opacity: 0.7 !important;
        font-style: italic !important;
        text-shadow: none !important;
        background-color: transparent !important;
      }

      /* 🆕 NEW CONTENT HIGHLIGHTING - Visible but elegant */
      .monaco-editor .new-content-highlight {
        background-color: rgba(34, 197, 94, 0.15) !important; /* Light green background */
        border: 1px solid rgba(34, 197, 94, 0.3) !important; /* Green border */
        border-radius: 3px !important;
        padding: 1px 3px !important;
        margin: 0 1px !important;
        position: relative !important;
      }

      /* Add a small close indicator */
      .monaco-editor .new-content-highlight::after {
        content: "×" !important;
        position: absolute !important;
        top: -8px !important;
        right: -8px !important;
        background: rgba(34, 197, 94, 0.8) !important;
        color: white !important;
        border-radius: 50% !important;
        width: 14px !important;
        height: 14px !important;
        font-size: 10px !important;
        line-height: 14px !important;
        text-align: center !important;
        cursor: pointer !important;
        opacity: 0.7 !important;
      }

      .monaco-editor .new-content-highlight:hover::after {
        opacity: 1 !important;
      }

      /* 🌑 DIMMED CONTENT - More noticeable dimming */
      .monaco-editor .dimmed-content {
        opacity: 0.4 !important;
        transition: all 0.2s ease !important;
      }

      /* 🎯 OVERRIDE ALL OTHER HIGHLIGHTS when new content is active */
      .monaco-editor .new-content-highlight.subject-highlight,
      .monaco-editor .new-content-highlight.style-highlight,
      .monaco-editor .new-content-highlight.lighting-highlight,
      .monaco-editor .new-content-highlight.camera-highlight,
      .monaco-editor .new-content-highlight.quality-highlight,
      .monaco-editor .new-content-highlight.emotion-highlight,
      .monaco-editor .new-content-highlight.setting-highlight {
        background-color: rgba(34, 197, 94, 0.15) !important;
        border: 1px solid rgba(34, 197, 94, 0.3) !important;
        border-radius: 3px !important;
        padding: 1px 3px !important;
        margin: 0 1px !important;
        position: relative !important;
      }
      
      .monaco-editor .view-line span.mtk3::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk3::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk4::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk4::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk5::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk5::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk6::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk6::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk7::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk7::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk8::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk8::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk9::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk9::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk10::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span.mtk10::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      /* WILDCARD SELECTION */
      .monaco-editor .view-line span[class*="mtk"]::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-line span[class*="mtk"]::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      /* FALLBACK SELECTION */
      .monaco-editor ::selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor ::-moz-selection {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      /* CURSOR AND LINE */
      .monaco-editor .cursor {
        background-color: #ffffff !important;
      }
      
      .monaco-editor .current-line {
        background-color: #2d2d3020 !important;
      }
      
      .monaco-editor .line-numbers {
        color: #858585 !important;
      }
      
      /* SCROLLBAR */
      .monaco-editor .scrollbar {
        background-color: #1e1e1e !important;
      }
      
      /* FORCE SELECTION HIGHLIGHTING */
      .monaco-editor .selected-text {
        background-color: #0078d4 !important;
        color: #ffffff !important;
      }
      
      .monaco-editor .view-overlay {
        pointer-events: none;
      }
      
      /* ADDITIONAL FIXES */
      .monaco-editor .view-overlays .current-line {
        background-color: #2d2d3020 !important;
      }
      
      .monaco-editor .decorationsOverviewRuler {
        background-color: #1e1e1e !important;
      }
      
      .monaco-editor .monaco-scrollable-element .scrollbar {
        background-color: #1e1e1e !important;
      }
      
      .monaco-editor .monaco-scrollable-element .scrollbar .slider {
        background-color: #424242 !important;
      }
      
      .monaco-editor .monaco-scrollable-element .scrollbar .slider:hover {
        background-color: #4f4f4f !important;
      }
      
      .monaco-editor .monaco-scrollable-element .scrollbar .slider.active {
        background-color: #646464 !important;
      }
    `,document.head.appendChild(S);const b=()=>{document.querySelectorAll(".monaco-editor .view-line span").forEach(L=>{const J=L;J.style.setProperty("--selection-bg","#0078d4","important"),J.style.setProperty("--selection-color","#ffffff","important")})};b();const M=new MutationObserver(b);return M.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),console.log("✅ Monaco Editor BULLETPROOF styles applied!"),()=>{M.disconnect()}},[]);const yn=(w,S)=>{console.log("✅ Content updated (underlines disabled)")},di=w=>{if(!pt.current)return;const S=pt.current,M=S.getSelection()?.getStartPosition()||{lineNumber:1,column:1},V=w.replace(/\r\n/g,`
`).replace(/\r/g,`
`).trim(),L=V.split(`
`),J=[{range:{startLineNumber:M.lineNumber,startColumn:M.column,endLineNumber:M.lineNumber,endColumn:M.column},text:V}];S.executeEdits("insert-text",J);const oe=M.lineNumber+L.length-1,ae=L.length>1?L[L.length-1].length+1:M.column+V.length;S.setPosition({lineNumber:oe,column:ae}),S.focus(),o(S.getValue()),console.log("✅ Text inserted successfully:",{text:V,lines:L.length})},Yn=async w=>{const S=await Lb({type:"image"}),b={id:S.id,title:S.title,content:S.content,type:S.type,tags:S.tags||[],is_favorite:!1,usage_count:S.copy_count||0,folder:w||"all-prompts"},M=[...T,b];C(M),o(S.content),d(b),m(!1),window.dispatchEvent(new CustomEvent("prompts-updated",{detail:{prompts:M}})),window.dispatchEvent(new CustomEvent("prompt-created",{detail:{promptId:b.id}})),be.success("Neuer Prompt erstellt!");try{await Ml(b.id,{})}catch{}},Oi=w=>{o(w.content),d(w),m(!1),be.success(`Prompt "${w.title}" geöffnet`)},so=async w=>{if(w!==void 0){if(o(w),a){const M=T.map(V=>V.id===a.id?{...V,content:w}:V);C(M);try{await Ml(a.id,{content:w})}catch{}d({...a,content:w}),window.dispatchEvent(new CustomEvent("prompts-updated",{detail:{prompts:M}}))}const S=w.split(/\s+/),b=S[S.length-1]?.toLowerCase()||"";if(b.length>=1){const M=T.filter(J=>J.title.toLowerCase().includes(b)||J.title.toLowerCase().startsWith(b)),V=HR(b),L=[...M.map(J=>J.title),...V];x(L)}else x([])}else x([])},Er=()=>{if(pt.current){const w=pt.current,S=w.getSelection();return{selectedText:(w.getModel()?.getValueInRange(S)||"").trim(),selection:S}}return{selectedText:"",selection:null}},hi=async(w,S="all")=>{sr(!0);try{const b=await new Promise(Me=>{const Pe=new FileReader;Pe.onload=$e=>{const Le=$e.target?.result;Me(Le.split(",")[1])},Pe.readAsDataURL(w)}),M=await ct.loadData("settings")||{},V=M?.chatgpt?.apiKey||M?.openaiApiKey||M?.apiKey;if(!V){be.error("OpenAI API Key nicht gefunden! Bitte in den Einstellungen konfigurieren.");return}console.log("🖼️ Analyzing image with Vision AI... Mode:",S);const J=M?.vision_model||"gpt-4o",oe={detailed:`Create a detailed description of this image for use as an AI image generation prompt. Include:

1. SUBJECT: Ultra-detailed description including:
   - Age range and gender
   - Facial features (eyes, nose, mouth, jawline, cheekbones)
   - Skin texture and tone (smooth, weathered, pale, tanned, etc.)
   - Hair (color, style, texture, length)
   - Body build and posture
   - Clothing details (materials, colors, fit, style)
   - Expression and mood
   - Any distinctive features or characteristics

2. COMPOSITION: Camera angle, framing, shot type
3. LIGHTING: Type, direction, mood, shadows, highlights
4. STYLE: Artistic style, color palette, mood, atmosphere
5. ENVIRONMENT: Background, setting, context

Make it vivid, specific, and comprehensive - use 5-7 detailed sentences. Use //SUBJECT:, //COMPOSITION:, //LIGHTING:, //STYLE:, //ENVIRONMENT: as section headers instead of ** format.`,person:`Describe ONLY the person in ultra-detail for an AI image generation prompt. Do NOT mention the background, scene, or environment at all. Focus on:

- PHYSICAL APPEARANCE: Exact age range, gender, ethnicity if apparent
- FACIAL FEATURES: Eyes (color, shape, expression), eyebrows, nose shape, mouth, jawline, cheekbones
- SKIN: Texture and tone; details like freckles, wrinkles, scars
- HAIR: Color, style, texture (curly/straight/wavy), length, styling
- BODY BUILD: Height impression, build (slim/muscular/average), posture
- CLOTHING: Materials, colors, fit, style, textures/patterns
- EXPRESSION & MOOD: Facial expression, emotions, body language
- LIGHTING EFFECTS ON SKIN/HAIR: highlights, shadows

Use 5-6 sentences. Use //PHYSICAL APPEARANCE:, //FACIAL FEATURES:, //SKIN:, //HAIR:, //BODY BUILD:, //CLOTHING:, //EXPRESSION & MOOD:, //LIGHTING EFFECTS: as headers. Do NOT describe any scene or environment.`,style_only:`Describe ONLY the artistic style and visual treatment of this image. Do NOT describe any subjects, characters, objects, or scene content. Focus strictly on:

- ARTISTIC STYLE & TECHNIQUE: (painting style, digital art, photo aesthetics, film emulation, etc.)
- COLOR PALETTE & MOOD: (warm/cool, saturation, contrast, tonal range)
- TEXTURE & GRAIN: (film grain, brush strokes, surface qualities)
- COMPOSITIONAL FEEL: (symmetry/asymmetry, negative space, depth cues)
- POST-PROCESSING LOOK: (grading, halation, bloom, vignette)

Write 3-4 sentences. Use //STYLE:, //COLOR PALETTE:, //TEXTURE:, //COMPOSITIONAL FEEL:, //POST-PROCESSING: headers. Absolutely avoid mentioning what is depicted.`},ae=S==="character"?"person":S==="style"?"style_only":"detailed",le=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"},body:JSON.stringify({model:J,messages:[{role:"system",content:ae==="person"||ae==="detailed"?"You are an expert at capturing visual style characteristics only. Never describe scene content, subjects, or objects; focus solely on style properties. Use // headers when applicable.":"You are an expert at creating detailed, vivid descriptions for AI image generation prompts. Use section headers with // format instead of ** format when applicable. Focus on specific visual details that would help recreate the image."},{role:"user",content:[{type:"text",text:oe[ae]},{type:"image_url",image_url:{url:`data:image/jpeg;base64,${b}`}}]}],max_tokens:ae==="style_only"?500:ae==="detailed"?1200:1100,temperature:ae==="style_only"?.4:.3})});if(!le.ok)throw new Error(`OpenAI API error: ${le.status}`);const Ee=(await le.json()).choices[0]?.message?.content?.trim();if(Ee){if(pt.current&&q.current){const Me=pt.current,Pe=q.current,$e=Bt||Me.getPosition(),rt=Me.getModel()?.getLineContent($e.lineNumber)||"",Ht=rt[$e.column-2]||"",on=rt[$e.column-1]||"";let Kt=Ee;Ht&&Ht!==" "&&Ht!==`
`&&(Kt=" "+Kt),on&&on!==" "&&on!==`
`&&(Kt=Kt+" "),Me.executeEdits("image-description",[{range:new Pe.Range($e.lineNumber,$e.column,$e.lineNumber,$e.column),text:Kt}]);const Mr={lineNumber:$e.lineNumber,column:$e.column+Kt.length};Me.setPosition(Mr),Me.focus(),m(!0),Qn(null)}be.success(`Bild beschrieben! (${Ee.length} Zeichen)`)}else be.error("Keine Beschreibung erhalten")}catch(b){console.error("❌ Image analysis failed:",b),be.error("Fehler beim Analysieren des Bildes")}finally{sr(!1)}},nn=H.useRef(0),Wr=w=>{if(w.preventDefault(),w.stopPropagation(),nn.current++,nn.current===1){_r(!0);const b=Array.from(w.dataTransfer.files).find(M=>M.type.startsWith("image/"));if(b){const M=new FileReader;M.onload=V=>{or(V.target?.result)},M.readAsDataURL(b),console.log("🎯 DRAG STARTED - image preview loaded")}}},Xn=w=>{w.preventDefault(),w.stopPropagation(),nn.current--,nn.current===0&&(_r(!1),or(null),Qn(null),gn({x:0,y:0}),console.log("🎯 DRAG ENDED - preview cleared"))},cs=w=>{if(w.preventDefault(),w.stopPropagation(),gn({x:w.clientX,y:w.clientY}),pt.current&&q.current){const S=pt.current;try{const b=S.getTargetAtClientPoint(w.clientX,w.clientY);b&&b.position&&Qn(b.position)}catch{}}},Mi=w=>{w.preventDefault(),w.stopPropagation(),nn.current=0,_r(!1),or(null),console.log("🎯 DROPPED - analyzing at position:",Bt);const b=Array.from(w.dataTransfer.files).filter(V=>V.type.startsWith("image/"));if(b.length===0){be.error("Bitte nur Bilddateien drag & drop!");return}if(b.length>1){be.error("Bitte nur ein Bild gleichzeitig!");return}const M=b[0];console.log("🖼️ Image dropped:",M.name,M.type,`${(M.size/1024).toFixed(1)}KB`),kn(M),Sn(!0)},fi=async()=>{if(!i.trim()){be.error("Bitte geben Sie Text ein!");return}const{selectedText:w,selection:S}=Er();console.log(`📝 SHORTER DEBUG: actualSelectedText="${w}"`),tn(!0);try{if(w){console.log(`✂️ MAKING SELECTION SHORTER: "${w.substring(0,50)}..."`);const b=await tr.improveSelectedTextWithCustomPrompt(w,i,"Make this text much shorter and more concise while keeping the essential meaning. Remove unnecessary words and phrases.");b.success&&b.content?(pt.current&&S&&(pt.current.executeEdits("make-shorter-selection",[{range:S,text:b.content}]),m(!0)),be.success(`Auswahl gekürzt! ${w.length} → ${b.content.length} Zeichen`)):be.error(b.error||"Fehler beim Kürzen")}else{console.log(`✂️ MAKING ENTIRE TEXT SHORTER: ${i.length} characters`);const b=await tr.improveSelectedTextWithCustomPrompt(i,"","Make this text much shorter and more concise while keeping the essential meaning. Remove unnecessary words and phrases.");b.success&&b.content?(o(b.content),m(!0),be.success(`Text gekürzt! ${i.length} → ${b.content.length} Zeichen`)):be.error(b.error||"Fehler beim Kürzen")}}catch{be.error("Fehler beim Kürzen des Texts")}finally{tn(!1)}},pi=async()=>{if(!i.trim()){be.error("Bitte geben Sie einen Prompt ein!");return}const{selectedText:w,selection:S}=Er();if(console.log(`🎯 ENHANCE DEBUG: actualSelectedText="${w}"`),console.log(`🎯 ENHANCE DEBUG: selectedText state="${tt}"`),w){console.log(`🔵 ENHANCING SELECTION: "${w.substring(0,50)}..."`),B(!0);try{const b=await tr.improveSelectedText(w,i);b.success&&b.content?(pt.current&&S&&(pt.current.executeEdits("smart-enhance-selection",[{range:S,text:b.content}]),m(!0)),be.success(`Auswahl verbessert! (${w.length} Zeichen)`)):be.error(b.error||"Fehler beim Verbessern des Texts")}catch{be.error("Fehler beim Verbessern des Texts")}finally{B(!1)}}else{console.log(`🌍 ENHANCING ENTIRE TEXT: ${i.length} characters`),G(!0);try{const b=await tr.improvePrompt(i);b.success&&b.content?(o(b.content),m(!0),be.success("Gesamter Prompt verbessert!")):be.error(b.error||"Fehler beim Verbessern des Prompts")}catch{be.error("Fehler beim Verbessern des Prompts")}finally{G(!1)}}},ji=async()=>{if(!i.trim()){be.error("Bitte geben Sie Text ein!");return}we(!0);try{console.log("✨ BEAUTIFYING text...");const w=await tr.improveSelectedTextWithCustomPrompt(i,"",`Organize and beautify this prompt by:
1. Sorting sections logically (Subject → Composition → Lighting → Style → etc.)
2. Adding helpful comments with // to explain what each section does
3. Keep all original content but make it well-structured and documented
4. Use clear section headers like //SUBJECT:, //COMPOSITION:, //LIGHTING:, //STYLE: etc.`);if(w.success&&w.content){console.log("✨ Text beautified successfully");const S=i,b=w.content;if(o(b),a){const M=T.map(V=>V.id===a.id?{...V,content:b}:V);C(M);try{await Ml(a.id,{content:b})}catch{}window.dispatchEvent(new CustomEvent("prompts-updated",{detail:{prompts:M}}))}setTimeout(()=>{yn(S,b)},100),be.success("Text wurde sortiert und mit Kommentaren versehen! ✨")}else console.error("Beautify failed:",w.error),be.error(w.error||"Fehler beim Beautify")}catch(w){console.error("Beautify error:",w),be.error("Fehler beim Beautify")}finally{we(!1)}},us=async()=>{if(!i.trim()){be.error("Kein Text zum Kopieren vorhanden!");return}ie(!0);try{const b=i.split(`
`).filter(M=>{const V=M.trim();return V.length>0&&!V.startsWith("//")}).join(`
`).replace(/\n\s*\n\s*\n/g,`

`).trim();if(!b){be.error("Nur Kommentare gefunden - nichts zu kopieren!");return}await navigator.clipboard.writeText(b),console.log("📋 Copied without comments:",b.substring(0,100)+"..."),be.success(`Prompt ohne Kommentare kopiert! (${b.length} Zeichen) 📋`,{duration:2e3})}catch(w){console.error("Copy error:",w),be.error("Fehler beim Kopieren in die Zwischenablage")}finally{ie(!1)}},ds=async()=>{if(!i.trim()){be.error("Kein Prompt zum Bewerten vorhanden!");return}k(!0);try{console.log("📊 SCORING prompt...");const w=await tr.improveSelectedTextWithCustomPrompt(i,"",`You are an expert at evaluating IMAGE GENERATION prompts for AI models like Midjourney, DALL-E, Stable Diffusion.

Evaluate this IMAGE PROMPT focusing ONLY on visual/photographic elements:

SCORE CRITERIA (1-10):
- Subject clarity and description (2 points)
- Technical camera/photography terms (2 points) 
- Lighting and atmosphere details (2 points)
- Style and aesthetic direction (2 points)
- Overall visual clarity and specificity (2 points)

SUGGESTIONS should focus ONLY on:
- Camera angles, lens types, focal length
- Lighting setup, mood, atmosphere
- Visual style, art direction, aesthetics
- Subject details, poses, expressions
- Composition, framing, perspective

DO NOT suggest story elements, emotions, narrative, or environmental interactions.

Format your response as:
SCORE: X/10
FEEDBACK: [Focus on visual/photographic strengths and weaknesses]
SUGGESTIONS:
- [Visual/technical improvement 1]
- [Visual/technical improvement 2]
- [Visual/technical improvement 3]

Image prompt to evaluate: "${i.substring(0,500)}"`);if(w.success&&w.content){const S=w.content,b=S.match(/SCORE:\s*(\d+)\/10/),M=S.match(/FEEDBACK:\s*(.*?)(?=SUGGESTIONS:|$)/s),V=S.match(/SUGGESTIONS:\s*((?:- .*(?:\n|$))*)/s),L=b?parseInt(b[1]):5,J=M?M[1].trim():"Keine Bewertung verfügbar",oe=V?V[1].split(`
`).filter(ae=>ae.trim().startsWith("- ")).map(ae=>ae.trim().substring(2)):["Keine Vorschläge verfügbar"];N({score:L,feedback:J,suggestions:oe}),O(!0),console.log("📊 Prompt scored:",{score:L,feedback:J,suggestions:oe}),be.success(`Prompt bewertet: ${L}/10! 📊`)}else be.error(w.error||"Fehler beim Bewerten des Prompts")}catch(w){console.error("Scoring error:",w),be.error("Fehler beim Bewerten des Prompts")}finally{k(!1)}},mt=async()=>{if(!D||!i.trim()){be.error("Keine Verbesserungsvorschläge verfügbar!");return}G(!0);try{console.log("🎯 IMPROVING & BEAUTIFYING with AI suggestions...");const w=`Improve and beautify this image generation prompt by doing ALL of the following:

STEP 1 - IMPLEMENT THESE SPECIFIC SUGGESTIONS:
${D.suggestions.map((b,M)=>`${M+1}. ${b}`).join(`
`)}

STEP 2 - ORGANIZE AND BEAUTIFY THE STRUCTURE:
- Sort sections logically: //SUBJECT: → //COMPOSITION: → //LIGHTING: → //STYLE: → //CAMERA: → //QUALITY:
- Add helpful comments with // to explain what each section does
- Break into clear, readable paragraphs
- Use consistent formatting and spacing
- Add section headers like //SUBJECT:, //COMPOSITION:, //LIGHTING:, //STYLE: etc.

STEP 3 - ENHANCE VISUAL/PHOTOGRAPHIC ELEMENTS:
- Add specific camera/photography terms (focal length, aperture, etc.)
- Improve lighting and atmosphere descriptions  
- Enhance visual style and aesthetic direction
- Make subject details more specific and visual
- Add composition and framing details

Keep all original content but make it well-structured, documented, and visually enhanced.

Original prompt: "${i}"`,S=await tr.improveSelectedTextWithCustomPrompt(i,"",w);if(S.success&&S.content){console.log("🎯 Prompt improved & beautified with suggestions");const b=i;o(S.content),setTimeout(()=>{yn(b,S.content)},100),be.success(`Prompt verbessert & strukturiert basierend auf ${D.suggestions.length} AI-Vorschlägen! ✨📝`,{duration:3e3}),setTimeout(()=>{O(!1)},1e3)}else console.error("Smart improvement failed:",S.error),be.error(S.error||"Fehler bei der Verbesserung")}catch(w){console.error("Smart improvement error:",w),be.error("Fehler bei der automatischen Verbesserung")}finally{G(!1)}},Li=async()=>{if(!De.trim()){be.error("Bitte geben Sie Ihre Frage ein!");return}if(!i.trim()){be.error("Kein Prompt zum Debuggen vorhanden!");return}ge(!0);try{console.log("🔍 DEBUGGING prompt with query:",De);const w=`You are an expert prompt engineer and debugger. Analyze this image generation prompt and answer the user's specific question about it.

USER QUESTION: "${De}"

PROMPT TO ANALYZE:
"${i}"

Please provide a detailed analysis in this EXACT format:

PROBLEM: [Describe what specific issue you found related to the user's question]
LOCATION: [Quote the exact text from the prompt that causes this issue]
SOLUTION: [Explain how to fix this specific problem]
FIXED_PROMPT: [Provide the corrected version of the entire prompt with the fix applied]

Be very specific and focus on the user's question. If the question is about why something appears wrong in generated images, identify the prompt elements that could cause that issue.`,S=await tr.improveSelectedTextWithCustomPrompt(i,"",w);if(S.success&&S.content){const b=S.content,M=b.match(/PROBLEM:\s*(.*?)(?=LOCATION:|$)/s),V=b.match(/LOCATION:\s*(.*?)(?=SOLUTION:|$)/s),L=b.match(/SOLUTION:\s*(.*?)(?=FIXED_PROMPT:|$)/s),J=b.match(/FIXED_PROMPT:\s*(.*?)$/s),oe={problem:M?M[1].trim():"Analyse nicht verfügbar",location:V?V[1].trim():"Stelle nicht gefunden",solution:L?L[1].trim():"Lösung nicht verfügbar",fixedPrompt:J?J[1].trim():i};_e(oe),console.log("🔍 Debug analysis completed:",oe),be.success("Prompt-Analyse abgeschlossen! 🔍")}else be.error(S.error||"Fehler bei der Prompt-Analyse")}catch(w){console.error("Debug error:",w),be.error("Fehler bei der Prompt-Analyse")}finally{ge(!1)}},Vn=()=>{if(!Te?.fixedPrompt){be.error("Keine Korrektur verfügbar!");return}const w=i;o(Te.fixedPrompt),setTimeout(()=>{yn(w,Te.fixedPrompt)},100),Ae(!1),Be(""),_e(null),be.success("Prompt wurde basierend auf der Analyse korrigiert! ✨")};function Dr(w,S,b){return b==="conservative"?`You are a precise prompt editor. Modify the prompt according to the user's request while keeping everything else EXACTLY the same.

CRITICAL RULES:
- Make minimal, targeted changes only to address the request
- Preserve the same sections and order using // headers (e.g. //SUBJECT:, //COMPOSITION:, //LIGHTING:, //STYLE:, etc.)
- Keep the same wording wherever possible; do not rephrase unrelated parts
- Remove or replace ONLY elements that conflict with the requested change (e.g. if "close-up" is requested, adjust composition accordingly)
- Maintain tone, style, and technical specifics unless they clearly contradict the request

RETURN ONLY the modified prompt (no commentary).

USER REQUEST: "${S}"

ORIGINAL PROMPT:
${w}`:`You are an expert prompt writer. Transform the prompt according to the user's request, allowing improvements while keeping strong parallels to the original.

GUIDELINES:
- Maintain the same sections using // headers (//SUBJECT:, //COMPOSITION:, //LIGHTING:, //STYLE:, etc.) and keep section intent intact
- Preserve subject identity, mood, core style direction, and key technical terms if still relevant (camera/lighting/composition tags)
- Keep at least 60% of unchanged wording where it does not conflict; reword only to clarify or to satisfy the request
- Remove or adjust contradictory elements introduced by the change (e.g., switch from extreme wide to close-up in composition and related phrases)
- Avoid generic rewriting; retain distinctive phrases, proper nouns, tags, and structure unless they clearly clash with the request

RETURN ONLY the final prompt (no commentary).

USER REQUEST: "${S}"

ORIGINAL PROMPT:
${w}`}function rn(w,S,b,M){return M==="conservative"?`You are a precise text editor. The user selected a fragment inside a larger prompt.

TASK: Modify ONLY the selected fragment to satisfy the user's request. DO NOT change anything outside the fragment. Keep the fragment's format and style; change the minimum necessary.

STRICT RULES:
- Output ONLY the replacement text for the fragment (no preface, no postscript, no code fences)
- Keep headers/tags present INSIDE the fragment; do not invent new sections
- Do not duplicate the rest of the prompt and do not append extra content

USER REQUEST: "${b}"

FULL PROMPT (context):
${w}

SELECTED FRAGMENT (edit only this):
${S}`:`You are a careful rewriter. The user selected a fragment inside a larger prompt.

TASK: Improve the selected fragment to satisfy the user's request while keeping strong parallels to the original fragment. Do NOT change anything outside the fragment.

GUIDELINES:
- Keep the fragment's role and style consistent with the full prompt
- Preserve distinctive phrases if still relevant; replace contradictory parts only
- Output ONLY the replacement text for the fragment (no commentary, no extra sections, no code fences)

USER REQUEST: "${b}"

FULL PROMPT (context):
${w}

SELECTED FRAGMENT (edit only this):
${S}`}const Or=async()=>{if(!F.trim()){be.error("Bitte geben Sie Ihre Änderungswünsche ein!");return}if(!i.trim()){be.error("Kein Prompt zum Bearbeiten vorhanden!");return}Qe(!0);try{const{selectedText:w,selection:S}=Er();let b=w||i,M="";w?M=rn(i,w,F,Je):M=Dr(i,F,Je);const V=await tr.improveSelectedTextWithCustomPrompt(b,"",M);if(V.success&&V.content){const L=i,J=V.content.trim();if(w&&pt.current&&S){const oe=pt.current;oe.executeEdits("smart-modify-selection",[{range:S,text:J}]);const ae=oe.getValue();o(ae),m(!0),setTimeout(()=>{yn(L,ae)},100)}else o(J),setTimeout(()=>{yn(L,J)},100);se(""),console.log("🎨 Smart modification completed"),be.success("Prompt intelligent angepasst! ✨")}else be.error(V.error||"Fehler bei der intelligenten Bearbeitung")}catch(w){console.error("Smart modify error:",w),be.error("Fehler bei der intelligenten Bearbeitung")}finally{Qe(!1)}},hs=async()=>{if(!i.trim()){be.error("Bitte geben Sie einen Prompt ein!");return}te(!0);try{console.log("🎲 GENERATING variations for:",i.substring(0,50)+"...");const w=await tr.improveSelectedTextWithCustomPrompt(i,"",`Generate 3 creative variations of this image generation prompt. Keep the same overall concept but vary interesting details like lighting, style, composition, or mood. Each variation should be distinct and engaging.

Original prompt: "${i}"

Please provide exactly 3 variations as comments with descriptive titles:
// [descriptive title]: [variation]
// [descriptive title]: [variation] 
// [descriptive title]: [variation]

Make the titles descriptive (like "Golden Hour Version" or "Minimalist Take"). Each variation should be a complete prompt.`);if(w.success&&w.content){const S=w.content.trim(),b=i,M=`${i}

${S}`;o(M),m(!0),setTimeout(()=>{yn(b,M)},100),console.log("🎲 Variations generated and appended as comments"),be.success("3 Variationen wurden als Kommentare hinzugefügt! 🎲✨")}else be.error(w.error||"Fehler beim Generieren der Variationen")}catch(w){console.error("Variations generation error:",w),be.error("Fehler beim Generieren der Variationen")}finally{te(!1)}},Qr=async()=>{if(!Ut.trim()){be.error("Bitte geben Sie einen Prompt ein!");return}const{selectedText:w,selection:S}=Er();console.log(`🎯 CUSTOM ENHANCE DEBUG: actualSelectedText="${w}"`),console.log(`🎯 CUSTOM ENHANCE DEBUG: selectedText state="${tt}"`),pn(!0);try{if(w){console.log(`🟣 CUSTOM ENHANCING SELECTION: "${w.substring(0,50)}..."`);const b=await tr.improveSelectedTextWithCustomPrompt(w,i,Ut);b.success&&b.content?(pt.current&&S&&(pt.current.executeEdits("improve-selection-custom",[{range:S,text:b.content}]),m(!0)),be.success(`Auswahl mit Custom Prompt verbessert! (${w.length} Zeichen)`),It(!1),Wn("")):be.error(b.error||"Fehler beim Verbessern des Texts")}else{console.log(`🌍 CUSTOM ENHANCING ENTIRE TEXT: ${i.length} characters`);const b=await tr.improveSelectedTextWithCustomPrompt(i,"",Ut);b.success&&b.content?(o(b.content),m(!0),be.success("Gesamter Text mit Custom Prompt verbessert!"),It(!1),Wn("")):be.error(b.error||"Fehler beim Verbessern des Prompts")}}catch{be.error("Fehler beim Verbessern des Texts")}finally{pn(!1)}};H.useImperativeHandle(e,()=>({createNewPrompt:Yn,openPrompt:Oi,insertTextAtCursor:di,getContent:()=>i,setContent:w=>{o(w),pt.current&&pt.current.setValue(w)},highlightNewContent:yn,getLiveSelectedText:Yt}));const sn=(w,S)=>{pt.current=w,q.current=S;const b=w.getPosition();b&&me({lineNumber:b.lineNumber,column:b.column}),S.languages.register({id:"prompt"}),S.editor.defineTheme("dark-theme-semantic",{base:"vs-dark",inherit:!0,rules:[{token:"",foreground:"ffffff"}],colors:{"editor.background":"#1e1e1e","editor.foreground":"#d4d4d4"}}),S.editor.setTheme("dark-theme-semantic"),console.log("✅ Monaco Editor BULLETPROOF styles applied!");const M=document.createElement("style");M.id="prompt-highlighting-styles",M.textContent=`
      /* CHARACTER (Blue) - Text color with MAXIMUM specificity */
      .monaco-editor .view-line .character-highlight,
      .view-line .character-highlight,
      span.character-highlight,
      .monaco-editor div.view-line span.character-highlight,
      .monaco-editor .view-lines .view-line span.character-highlight,
      div.monaco-editor div.view-line span.character-highlight {
        color: #4FC3F7 !important; 
        font-weight: bold !important; 
        text-shadow: 0 0 1px #4FC3F7 !important;
      }
      
      /* MOTION (Yellow) - Text color with MAXIMUM specificity */
      .monaco-editor .view-line .motion-highlight,
      .view-line .motion-highlight,
      span.motion-highlight,
      .monaco-editor div.view-line span.motion-highlight,
      .monaco-editor .view-lines .view-line span.motion-highlight,
      div.monaco-editor div.view-line span.motion-highlight {
        color: #FFD54F !important; 
        font-weight: bold !important; 
        text-shadow: 0 0 1px #FFD54F !important;
      }
      
      /* ENVIRONMENT (Green) - Text color with MAXIMUM specificity */
      .monaco-editor .view-line .environment-highlight,
      .view-line .environment-highlight,
      span.environment-highlight,
      .monaco-editor div.view-line span.environment-highlight,
      .monaco-editor .view-lines .view-line span.environment-highlight,
      div.monaco-editor div.view-line span.environment-highlight {
        color: #81C784 !important; 
        font-weight: bold !important; 
        text-shadow: 0 0 1px #81C784 !important;
      }
      
      /* STYLE (Cyan) - Text color with MAXIMUM specificity */
      .monaco-editor .view-line .style-highlight,
      .view-line .style-highlight,
      span.style-highlight,
      .monaco-editor div.view-line span.style-highlight,
      .monaco-editor .view-lines .view-line span.style-highlight,
      div.monaco-editor div.view-line span.style-highlight {
        color: #4DD0E1 !important; 
        font-weight: bold !important; 
        text-shadow: 0 0 1px #4DD0E1 !important;
      }
      
      /* COLORS (Orange) - Text color with MAXIMUM specificity */
      .monaco-editor .view-line .colors-highlight,
      .view-line .colors-highlight,
      span.colors-highlight,
      .monaco-editor div.view-line span.colors-highlight,
      .monaco-editor .view-lines .view-line span.colors-highlight,
      div.monaco-editor div.view-line span.colors-highlight {
        color: #FF8A65 !important; 
        font-weight: bold !important; 
        text-shadow: 0 0 1px #FF8A65 !important;
      }
      
      /* Catch-all for any highlight class */
      [class*="-highlight"] {
        font-weight: bold !important; 
      }
      
      /* ULTRA HIGH SPECIFICITY FOR GRAMMAR HIGHLIGHTING */
      .monaco-editor .view-line .mtk1.noun-highlight,
      .monaco-editor .mtk1.noun-highlight { 
        color: #4FC3F7 !important; 
        font-weight: bold !important; 
        background: transparent !important;
      }
      .monaco-editor .view-line .mtk1.verb-highlight,
      .monaco-editor .mtk1.verb-highlight { 
        color: #FFD54F !important; 
        font-weight: bold !important; 
        background: transparent !important;
      }
      .monaco-editor .view-line .mtk1.adjective-highlight,
      .monaco-editor .mtk1.adjective-highlight { 
        color: #FF8A65 !important; 
        font-weight: bold !important; 
        background: transparent !important;
      }
      .monaco-editor .view-line .mtk1.preposition-highlight,
      .monaco-editor .mtk1.preposition-highlight { 
        color: #81C784 !important; 
        font-weight: bold !important; 
        background: transparent !important;
      }
             .monaco-editor .view-line .mtk1.pronoun-highlight,
       .monaco-editor .mtk1.pronoun-highlight { 
         color: #FFFFFF !important; 
         font-weight: normal !important; 
         background: transparent !important;
       }
             .monaco-editor .view-line .mtk1.article-highlight,
       .monaco-editor .mtk1.article-highlight { 
         color: #FFFFFF !important; 
         font-weight: normal !important; 
         background: transparent !important;
       }
       .monaco-editor .view-line .mtk1.conjunction-highlight,
       .monaco-editor .mtk1.conjunction-highlight { 
         color: #FFFFFF !important; 
         font-weight: normal !important; 
         background: transparent !important;
       }
      .monaco-editor .view-line .mtk1.adverb-highlight,
      .monaco-editor .mtk1.adverb-highlight { 
        color: #4DD0E1 !important; 
        font-weight: bold !important; 
        background: transparent !important;
      }
    `;const V=document.getElementById("prompt-highlighting-styles");V&&V.remove(),document.head.appendChild(M),console.log("🎨 CSS styles added to document head");let L=[];const J=()=>{const ce=w.getModel();if(!ce)return;const Ee=ce.getValue();if(console.log("⚡ INSTANT highlighting for text:",Ee.length,"characters"),!Ee.trim()){L=w.deltaDecorations(L,[]);return}try{const Me=$u.highlight(Ee);console.log(`⚡ INSTANT analysis found ${Me.length} spans`);const Pe=Me.map($e=>{const Le=ce.getPositionAt($e.start),rt=ce.getPositionAt($e.end);return{range:new S.Range(Le.lineNumber,Le.column,rt.lineNumber,rt.column),options:{inlineClassName:`${$e.category}-highlight`,hoverMessage:{value:`**${$e.category.toUpperCase()}**: ${$e.text}`}}}});console.log(`🎨 Applying ${Pe.length} instant decorations`),L=w.deltaDecorations(L,Pe),setTimeout(()=>{const $e=w.getDomNode();if($e){const Le=$e.querySelectorAll('[class*="-highlight"]');console.log(`⚡ Applied colors to ${Le.length} elements`),Le.forEach(rt=>{const on=Array.from(rt.classList).find(Kt=>Kt.endsWith("-highlight"));if(on){const Kt=on.replace("-highlight",""),Mr=$u.getCategoryColor(Kt);console.log(`🎨 Coloring ${Kt}: ${Mr}`),Kt==="comment"||(rt.style.setProperty("color",Mr,"important"),rt.style.setProperty("font-weight","bold","important"),rt.style.setProperty("text-shadow",`0 0 1px ${Mr}80`,"important"))}})}},50)}catch(Me){console.error("❌ Instant highlighting failed:",Me),L=w.deltaDecorations(L,[])}};let oe=null;const ae=()=>{oe&&clearTimeout(oe),oe=setTimeout(()=>{console.log("🔥 TRIGGERING INSTANT HIGHLIGHT"),J()},100)};w.onDidChangeModelContent(()=>{console.log("📝 Text changed - triggering highlighting"),ae()}),w.getModel()?.onDidChangeContent(()=>{console.log("📝 Model content changed - triggering highlighting"),ae()});const le=w.getModel();le&&S.editor.setModelLanguage(le,"prompt");try{S.languages.registerCompletionItemProvider("prompt",{provideCompletionItems:()=>({suggestions:[{label:"woman",kind:S.languages.CompletionItemKind.Text,insertText:"woman",detail:"Character"},{label:"beautiful",kind:S.languages.CompletionItemKind.Text,insertText:"beautiful",detail:"Descriptor"},{label:"walking",kind:S.languages.CompletionItemKind.Text,insertText:"walking",detail:"Action"},{label:"park",kind:S.languages.CompletionItemKind.Text,insertText:"park",detail:"Environment"}]})})}catch{console.log("Autocomplete already registered")}setTimeout(()=>{console.log("🎯 INITIAL HIGHLIGHTING"),J()},100),w.onDidChangeCursorPosition(ce=>{me({lineNumber:ce.position.lineNumber,column:ce.position.column})}),w.onDidChangeModelContent(()=>{const ce=w.getPosition();ce&&me({lineNumber:ce.lineNumber,column:ce.column})}),w.onDidPaste(ce=>{try{const Ee=ce.text;if(!Ee)return;let Me=Ee.replace(/\r\n?/g,`
`);if(Me.includes(`
`)||(Me=Me.replace(/\s*\/\/\s*SUBJECT:/gi,`
//SUBJECT:`).replace(/\s*\/\/\s*COMPOSITION:/gi,`
//COMPOSITION:`).replace(/\s*\/\/\s*LIGHTING:/gi,`
//LIGHTING:`).replace(/\s*\/\/\s*STYLE:/gi,`
//STYLE:`).replace(/\s*\/\/\s*ENVIRONMENT:/gi,`
//ENVIRONMENT:`)),Me!==Ee){w.executeEdits("normalize-paste",[{range:ce.range,text:Me}]);const Pe=w.getModel()?.modifyPosition(ce.range.getStartPosition(),Me.length);Pe&&w.setPosition(Pe)}}catch{}}),console.log("✅ Monaco Editor BULLETPROOF styles applied!")},fs={minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",lineNumbers:"on",fontSize:14,automaticLayout:!0,theme:"dark-theme-semantic",language:"prompt",suggestOnTriggerCharacters:!0,quickSuggestions:!0,selectOnLineNumbers:!0,selectionHighlight:!0,occurrencesHighlight:"singleFile",renderWhitespace:"none",renderControlCharacters:!1,smoothScrolling:!0,cursorBlinking:"blink",cursorStyle:"line",cursorWidth:2,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontLigatures:!0,lineHeight:22,tabSize:2,insertSpaces:!0,detectIndentation:!0,formatOnPaste:!0,formatOnType:!0,mouseWheelZoom:!0,contextmenu:!0,copyWithSyntaxHighlighting:!0,links:!0,multiCursorModifier:"alt",multiCursorMergeOverlapping:!0,acceptSuggestionOnCommitCharacter:!0,acceptSuggestionOnEnter:"on",suggestFontSize:14,suggestLineHeight:24,suggestSelection:"first",tabCompletion:"on",wordBasedSuggestions:"matchingDocuments",snippetSuggestions:"top",emptySelectionClipboard:!0,useTabStops:!0,matchBrackets:"always",autoClosingBrackets:"always",autoClosingOvertype:"always",autoClosingQuotes:"always",autoIndent:"advanced",autoSurround:"brackets",codeLens:!1,colorDecorators:!0,dragAndDrop:!0,readOnly:!1,renderLineHighlight:"line",renderFinalNewline:"on",renderValidationDecorations:"editable",folding:!1,showFoldingControls:"never",showUnused:!0,showDeprecated:!0,bracketPairColorization:{enabled:!1},hover:{enabled:!0,delay:300,sticky:!0},find:{autoFindInSelection:"never"},guides:{indentation:!1,bracketPairs:!1},"semanticHighlighting.enabled":!0},$t=()=>{const w=wt.current;if(!w)return;const S=w.getBoundingClientRect(),b=260,M=8,V=window.innerHeight-S.bottom,L=S.top,J=V>=240||V>=L?"down":"up";let oe;if(J==="down")oe=S.bottom+M;else{const ce=Math.min(288,S.top-16);oe=S.top-M-ce}const ae=Math.max(8,Math.min(S.right-b,window.innerWidth-b-8)),le=J==="down"?Math.min(288,window.innerHeight-oe-16):Math.min(288,S.top-16);kt({top:oe,left:ae,maxHeight:le,placement:J})};return H.useEffect(()=>{if(!Ue)return;$t();const w=()=>$t(),S=()=>$t(),b=M=>{const V=M.target;wt.current?.contains(V)||St.current?.contains(V)||Oe(!1)};return window.addEventListener("resize",w),window.addEventListener("scroll",S,!0),document.addEventListener("mousedown",b),()=>{window.removeEventListener("resize",w),window.removeEventListener("scroll",S,!0),document.removeEventListener("mousedown",b)}},[Ue]),f.jsx("div",{className:"h-full flex bg-slate-900 relative",children:f.jsxs("div",{className:"h-full flex flex-col min-h-0 w-full overflow-y-auto",children:[f.jsxs("div",{className:"h-12 bg-slate-800/60 border-b border-slate-700/60 flex items-center justify-between px-4 backdrop-blur-xl",style:{WebkitAppRegion:"drag"},children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-sm font-medium text-slate-100",children:T.length===0&&!a?"Prompt IDE":a?a.title:"Neuer Prompt"}),T.length>0||a?f.jsx("span",{className:"text-xs text-green-400",children:"● Auto-gespeichert"}):null]}),f.jsxs("div",{className:"flex items-center gap-2",style:{WebkitAppRegion:"no-drag"},children:[f.jsxs("button",{onClick:pi,disabled:z||K||!i.trim(),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md border border-slate-600/40 bg-white/5 hover:bg-white/10 text-slate-200 text-xs disabled:opacity-50 transition-colors backdrop-blur-sm",title:tt.trim()?"Enhance nur die Auswahl":"Enhance ganzen Text",children:[z||K?f.jsx(Hn,{className:"w-3 h-3 animate-spin"}):f.jsx($s,{className:"w-3 h-3"}),f.jsx("span",{children:"Enhance"})]}),f.jsxs("button",{onClick:()=>It(!0),disabled:Gt||!i.trim(),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md border border-slate-600/40 bg-white/5 hover:bg-white/10 text-slate-200 text-xs disabled:opacity-50 transition-colors backdrop-blur-sm",title:Yt().trim()?"Custom Enhance nur die Auswahl":"Custom Enhance ganzen Text",children:[Gt?f.jsx(Hn,{className:"w-3 h-3 animate-spin"}):f.jsx(Cf,{className:"w-3 h-3"}),f.jsx("span",{children:"Custom"})]}),f.jsxs("button",{onClick:fi,disabled:jn||!i.trim(),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md border border-slate-600/40 bg-white/5 hover:bg-white/10 text-slate-200 text-xs disabled:opacity-50 transition-colors backdrop-blur-sm",title:tt.trim()?"Auswahl kürzen":"Ganzen Text kürzen",children:[jn?f.jsx(Hn,{className:"w-3 h-3 animate-spin"}):f.jsx("span",{className:"text-xs font-bold",children:"✂️"}),f.jsx("span",{children:"Shorter"})]}),f.jsxs("button",{onClick:hs,disabled:ee||!i.trim(),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md border border-slate-600/40 bg-white/5 hover:bg-white/10 text-slate-200 text-xs disabled:opacity-50 transition-colors backdrop-blur-sm",title:"Variations generieren",children:[ee?f.jsx(Hn,{className:"w-3 h-3 animate-spin"}):f.jsx(tT,{className:"w-3 h-3"}),f.jsx("span",{children:"Variations"})]}),f.jsxs("button",{onClick:ji,disabled:pe||!i.trim(),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md border border-slate-600/40 bg-white/5 hover:bg-white/10 text-slate-200 text-xs disabled:opacity-50 transition-colors backdrop-blur-sm",title:"Text sortieren und mit Kommentaren versehen",children:[pe?f.jsx(Hn,{className:"w-3 h-3 animate-spin"}):f.jsx("span",{className:"text-xs",children:"✨"}),f.jsx("span",{children:"Beautify"})]}),f.jsxs("button",{onClick:ds,disabled:R||!i.trim(),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md border border-slate-600/40 bg-white/5 hover:bg-white/10 text-slate-200 text-xs disabled:opacity-50 transition-colors backdrop-blur-sm",title:"Prompt von KI bewerten lassen (1-10)",children:[R?f.jsx(Hn,{className:"w-3 h-3 animate-spin"}):f.jsx(Ky,{className:"w-3 h-3"}),f.jsx("span",{children:"Score"})]}),f.jsxs("button",{onClick:()=>Ae(!0),disabled:!i.trim(),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md border border-slate-600/40 bg-white/5 hover:bg-white/10 text-slate-200 text-xs disabled:opacity-50 transition-colors backdrop-blur-sm",title:"Prompt debuggen und Probleme finden",children:[f.jsx(Fl,{className:"w-3 h-3"}),f.jsx("span",{children:"Debug"})]})]})]}),f.jsxs("div",{className:`flex-1 overflow-hidden relative ${zt?"ring-4 ring-blue-500 ring-opacity-50":""}`,onDragEnter:Wr,onDragLeave:Xn,onDragOver:cs,onDrop:Mi,children:[zt&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"absolute inset-0 bg-blue-600 bg-opacity-10 backdrop-blur-[2px] z-40 pointer-events-none",children:Bt&&pt.current&&(()=>{const w=pt.current.getScrolledVisiblePosition(Bt);if(!w)return null;const S=w.left+8,b=w.top+6;return f.jsxs("div",{className:"absolute",style:{left:S,top:b,zIndex:41},children:[f.jsx("div",{className:"w-0.5 h-6 bg-blue-500/80"}),f.jsxs("div",{className:"mt-1 px-1 py-0.5 text-[10px] bg-blue-600 text-white rounded shadow",children:["L",Bt.lineNumber,":C",Bt.column]})]})})()}),mn&&f.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:`${Tt.x+15}px`,top:`${Tt.y-30}px`,transform:"translateY(-100%)"},children:f.jsx("div",{className:"bg-white/95 backdrop-blur-md rounded-xl shadow-2xl border-2 border-blue-400 p-2 max-w-xs",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("img",{src:mn,alt:"Drag Preview",className:"w-12 h-12 object-cover rounded-lg border border-gray-200"}),f.jsxs("div",{className:"text-xs flex-1 min-w-0",children:[f.jsxs("div",{className:"font-bold text-blue-600 flex items-center gap-1",children:["🖼️ ",f.jsx("span",{className:"truncate",children:"GPT-4o Vision"})]}),f.jsx("div",{className:"text-gray-600 truncate",children:"Auto-Beschreibung"}),Bt&&f.jsxs("div",{className:"text-xs text-emerald-600 font-mono mt-1",children:["L",Bt.lineNumber,":C",Bt.column]})]}),f.jsx("div",{className:"text-blue-500 text-lg",children:"📍"})]})})}),f.jsx("div",{className:"absolute top-4 right-4 z-50 pointer-events-none",children:f.jsxs("div",{className:"bg-black/80 text-white px-3 py-2 rounded-lg text-sm",children:[f.jsx("div",{className:"font-bold",children:"🎯 Präzises Drag & Drop"}),f.jsx("div",{className:"text-xs opacity-80",children:"Ziehe an die exakte Position im Text"})]})})]}),ir&&f.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-40",children:f.jsxs("div",{className:"text-center text-white",children:[f.jsx(Hn,{className:"w-12 h-12 animate-spin mx-auto mb-4"}),f.jsx("div",{className:"text-lg font-bold mb-2",children:"🤖 GPT-4o Vision Analyse..."}),f.jsx("div",{className:"text-sm opacity-80",children:"Bild wird beschrieben..."})]})}),a?f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsxs("div",{className:"flex-1 min-h-0 relative bg-slate-900/80 border-b border-slate-700/60 backdrop-blur",children:[f.jsx(FR,{value:i,onChange:so,onMount:sn,language:"prompt",theme:"dark-theme-semantic",options:fs,loading:f.jsx("div",{className:"flex items-center justify-center h-full text-white",children:"Loading editor..."})}),i.trim()&&f.jsx("button",{onClick:us,disabled:re,className:"absolute bottom-4 right-4 z-30 flex items-center gap-2 px-4 py-2.5 bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-800 disabled:opacity-50 text-white text-sm rounded-lg shadow-xl border border-emerald-400 transition-all duration-200 hover:scale-105 font-medium backdrop-blur-sm",title:"Prompt ohne Kommentare kopieren",children:re?f.jsxs(f.Fragment,{children:[f.jsx(Hn,{className:"w-4 h-4 animate-spin"}),f.jsx("span",{className:"text-emerald-100",children:"Copying..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(Rp,{className:"w-4 h-4"}),f.jsx("span",{children:"Copy Clean"})]})}),Rr&&lr&&f.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-40",children:f.jsxs("div",{className:"floating-card p-5 w-[420px]",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Bild analysieren – Was soll beschrieben werden?"}),f.jsx("button",{onClick:()=>{Sn(!1),kn(null)},className:"p-1 rounded hover:bg-slate-700/60 text-slate-300",title:"Abbrechen",children:f.jsx(Ji,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[f.jsxs("button",{className:"w-full p-3 rounded-lg border border-slate-600/60 hover:bg-slate-700/40 text-left",onClick:async()=>{const w=lr;Sn(!1),kn(null),w&&await hi(w,"character")},children:[f.jsx("div",{className:"font-medium text-slate-100",children:"Nur der Character"}),f.jsx("div",{className:"text-xs text-slate-400",children:"Aussehen, Kleidung, Alter, Haut, Haare, Merkmale. Keine Szene."})]}),f.jsxs("button",{className:"w-full p-3 rounded-lg border border-slate-600/60 hover:bg-slate-700/40 text-left",onClick:async()=>{const w=lr;Sn(!1),kn(null),w&&await hi(w,"style")},children:[f.jsx("div",{className:"font-medium text-slate-100",children:"Nur der Style"}),f.jsx("div",{className:"text-xs text-slate-400",children:"Nur Stil, Farbpalette, Textur, Komposition, Grading. Keine Inhalte."})]}),f.jsxs("button",{className:"w-full p-3 rounded-lg border border-slate-600/60 hover:bg-slate-700/40 text-left",onClick:async()=>{const w=lr;Sn(!1),kn(null),w&&await hi(w,"all")},children:[f.jsx("div",{className:"font-medium text-slate-100",children:"Alles"}),f.jsx("div",{className:"text-xs text-slate-400",children:"Subjekt, Komposition, Licht, Stil und Umgebung."})]})]})]})})]}),f.jsxs("div",{className:"bg-slate-800/80 border-t border-slate-600/60 backdrop-blur",children:[f.jsxs("div",{className:"h-10 bg-slate-700/60 border-b border-slate-600/60 flex items-center justify-between px-4",children:[f.jsxs("h3",{className:"text-sm font-semibold text-slate-100 flex items-center gap-2",children:[f.jsx(Zf,{className:"w-4 h-4 text-purple-400"}),"Smart Edit"]}),f.jsxs("div",{className:"flex items-center gap-2",children:[Ie&&f.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-300",children:[f.jsx(Hn,{className:"w-3 h-3 animate-spin"}),f.jsx("span",{children:"KI arbeitet..."})]}),f.jsx("div",{className:"relative hidden sm:block mr-2",children:f.jsxs("button",{ref:wt,onClick:()=>Oe(w=>{const S=!w;return S&&$t(),S}),className:"inline-flex items-center gap-1.5 px-2 py-1 text-[11px] rounded-md border border-slate-600/60 hover:bg-slate-800/70 active:bg-slate-800/90",title:"Shot-Varianten",children:[f.jsx(Nd,{className:"w-3 h-3"}),f.jsx("span",{children:"Shots"}),Se&&f.jsx(Hn,{className:"w-3 h-3 animate-spin text-slate-300 ml-1"})]})}),Ue&&Cn&&qv.createPortal(f.jsxs("div",{ref:St,style:{position:"fixed",top:Cn.top,left:Cn.left,maxHeight:Cn.maxHeight,width:260,zIndex:1e3},className:"rounded-md border border-slate-600/60 bg-slate-800/95 shadow-lg py-1 overflow-y-auto",children:[f.jsx("div",{className:"px-3 py-1.5 text-[10px] uppercase tracking-wide text-slate-400",children:"Framing"}),cr.filter(w=>["extreme_closeup","closeup","medium_closeup","medium","medium_long","long","wide","extreme_wide"].includes(w.id)).map(w=>f.jsx("button",{onClick:async()=>{Oe(!1),await lt(w.id)},disabled:Se,className:"w-full text-left px-3 py-1.5 text-xs hover:bg-slate-700/60 disabled:opacity-50",children:w.label},w.id)),f.jsx("div",{className:"px-3 py-1.5 text-[10px] uppercase tracking-wide text-slate-400",children:"Angles / Camera"}),cr.filter(w=>["topshot","highangle","lowangle","dutch","droneshot","orbit"].includes(w.id)).map(w=>f.jsx("button",{onClick:async()=>{Oe(!1),await lt(w.id)},disabled:Se,className:"w-full text-left px-3 py-1.5 text-xs hover:bg-slate-700/60 disabled:opacity-50",children:w.label},w.id))]}),document.body),f.jsx("button",{onClick:()=>se(""),className:"text-slate-400 hover:text-slate-200 transition-colors p-1",title:"Eingabe löschen",children:f.jsx(Ji,{className:"w-3 h-3"})})]})]}),f.jsxs("div",{className:"p-3 flex flex-col",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx("textarea",{value:F,onChange:w=>se(w.target.value),placeholder:Je==="conservative"?"z.B. 'mach daraus eine Nahaufnahme / Close-up' (alles andere beibehalten)":"z.B. 'mach daraus eine Nahaufnahme / Close-up und modernisiere Stil & Licht'",className:"flex-1 h-20 px-3 py-2 bg-slate-700/60 border border-slate-600/60 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm resize-none",onKeyDown:w=>{w.key==="Enter"&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),Or())}}),f.jsxs("button",{onClick:Or,disabled:Ie||!F.trim()||!i.trim(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 disabled:opacity-50 text-white rounded-md transition-colors text-sm h-fit self-end",children:[Ie?f.jsx(Hn,{className:"w-4 h-4 animate-spin"}):f.jsx(Zf,{className:"w-4 h-4"}),Ie?"Arbeitet...":"Anwenden"]})]}),f.jsxs("div",{className:"text-xs text-slate-400 text-center mt-2",children:["💡 ",f.jsx("kbd",{className:"px-1 py-0.5 bg-slate-600 rounded",children:"⌘ + Enter"})," zum schnellen Anwenden"]})]})]})]}):f.jsx("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:f.jsxs("div",{className:"max-w-md floating-card p-6",children:[f.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:f.jsx($s,{className:"w-8 h-8 text-white"})}),f.jsx("h3",{className:"text-xl font-semibold text-slate-100 mb-2",children:"Kein Prompt ausgewählt"}),f.jsx("p",{className:"text-slate-300 mb-6",children:T.length===0?'Klicke links auf „Neuer Prompt" um einen neuen Prompt zu erstellen.':'Wähle links einen Prompt aus oder klicke auf „Neuer Prompt", um einen neuen zu erstellen.'}),f.jsxs("div",{className:"text-sm text-slate-400 mt-4 border-t border-slate-700/60 pt-4",children:["🎯 ",f.jsx("strong",{children:"Tipp:"})," Du kannst Inhalte jederzeit per Drag & Drop hinzufügen."]})]})})]}),bt&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 w-96 max-w-[90vw]",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Custom Enhance"}),f.jsx("button",{onClick:()=>It(!1),className:"text-slate-400 hover:text-slate-200",children:f.jsx(Ji,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("div",{className:"bg-slate-700 rounded-md p-3 mb-3",children:f.jsx("div",{className:"text-sm text-slate-300 mb-1",children:(()=>{const w=Yt();return w.trim()?f.jsxs("div",{children:[f.jsx("span",{className:"text-blue-400",children:"🎯 Markierter Text:"}),f.jsxs("div",{className:"text-xs text-slate-100 mt-2 p-2 bg-slate-800 rounded border-l-2 border-blue-400 max-h-32 overflow-y-auto",children:['"',w,'"']})]}):f.jsxs("div",{children:[f.jsx("span",{className:"text-green-400",children:"🌍 Modus:"})," Gesamter Text wird verbessert"]})})()})}),f.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ihr Custom Prompt:"}),f.jsx("textarea",{value:Ut,onChange:w=>Wn(w.target.value),placeholder:"z.B. 'Mache den Text kreativer und lebendiger'",className:"w-full h-24 px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>It(!1),className:"px-4 py-2 text-slate-300 hover:text-slate-100 transition-colors",children:"Abbrechen"}),f.jsxs("button",{onClick:Qr,disabled:Gt||!Ut.trim(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:opacity-50 text-white rounded-md transition-colors",children:[Gt?f.jsx(Hn,{className:"w-4 h-4 animate-spin"}):f.jsx(Cf,{className:"w-4 h-4"}),Yt().trim()?"Auswahl enhancen":"Ganzen Text enhancen"]})]})]})}),A&&D&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 w-[500px] max-w-[90vw] max-h-[80vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h3",{className:"text-xl font-semibold text-slate-100 flex items-center gap-2",children:[f.jsx(Ky,{className:"w-5 h-5 text-amber-400"}),"Prompt Score"]}),f.jsx("button",{onClick:()=>O(!1),className:"text-slate-400 hover:text-slate-200",children:f.jsx(Ji,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 mb-3",children:f.jsx("span",{className:"text-3xl font-bold text-white",children:D.score})}),f.jsxs("div",{className:"text-lg text-slate-300",children:[f.jsxs("span",{className:"text-amber-400 font-semibold",children:[D.score,"/10"]})," - ",D.score>=8?"🌟 Excellent":D.score>=6?"👍 Good":D.score>=4?"⚠️ Needs Work":"❌ Poor"]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:"text-sm font-semibold text-slate-200 mb-3 flex items-center gap-2",children:"💬 Feedback"}),f.jsx("div",{className:"bg-slate-700 rounded-lg p-4 text-sm text-slate-300 leading-relaxed",children:D.feedback})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:"text-sm font-semibold text-slate-200 mb-3 flex items-center gap-2",children:"💡 Verbesserungsvorschläge"}),f.jsx("div",{className:"space-y-2",children:D.suggestions.map((w,S)=>f.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-700 rounded-lg",children:[f.jsxs("span",{className:"text-amber-400 font-bold text-sm",children:[S+1,"."]}),f.jsx("span",{className:"text-sm text-slate-300 flex-1",children:w})]},S))})]}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 text-slate-300 hover:text-slate-100 transition-colors",children:"Schließen"}),f.jsxs("button",{onClick:mt,disabled:z||!i.trim(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:opacity-50 text-white rounded-md transition-colors",children:[z?f.jsx(Hn,{className:"w-4 h-4 animate-spin"}):f.jsx($s,{className:"w-4 h-4"}),z?"Verbessere & strukturiere...":"Jetzt verbessern & strukturieren"]})]})]})}),P&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 w-[600px] max-w-[90vw] max-h-[80vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h3",{className:"text-xl font-semibold text-slate-100 flex items-center gap-2",children:[f.jsx(Fl,{className:"w-5 h-5 text-teal-400"}),"Prompt Debugger"]}),f.jsx("button",{onClick:()=>{Ae(!1),Be(""),_e(null)},className:"text-slate-400 hover:text-slate-200",children:f.jsx(Ji,{className:"w-5 h-5"})})]}),Te?f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4",children:[f.jsx("h4",{className:"text-sm font-semibold text-red-400 mb-2 flex items-center gap-2",children:"🚨 Problem gefunden"}),f.jsx("p",{className:"text-sm text-slate-300",children:Te.problem})]}),f.jsxs("div",{className:"bg-orange-900/20 border border-orange-500/30 rounded-lg p-4",children:[f.jsx("h4",{className:"text-sm font-semibold text-orange-400 mb-2 flex items-center gap-2",children:"📍 Problematische Stelle"}),f.jsxs("div",{className:"text-sm text-slate-300 font-mono bg-slate-800 p-2 rounded border-l-2 border-orange-400",children:['"',Te.location,'"']})]}),f.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded-lg p-4",children:[f.jsx("h4",{className:"text-sm font-semibold text-green-400 mb-2 flex items-center gap-2",children:"💡 Lösung"}),f.jsx("p",{className:"text-sm text-slate-300",children:Te.solution})]}),f.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[f.jsx("h4",{className:"text-sm font-semibold text-blue-400 mb-2 flex items-center gap-2",children:"✨ Korrigierter Prompt"}),f.jsx("div",{className:"text-sm text-slate-300 bg-slate-800 p-3 rounded max-h-32 overflow-y-auto",children:Te.fixedPrompt})]}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>{_e(null),Be("")},className:"px-4 py-2 text-slate-300 hover:text-slate-100 transition-colors",children:"Neue Analyse"}),f.jsxs("button",{onClick:Vn,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:[f.jsx(Cf,{className:"w-4 h-4"}),"Jetzt reparieren"]})]})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Was ist das Problem mit Ihrem Prompt?"}),f.jsx("textarea",{value:De,onChange:w=>Be(w.target.value),placeholder:"z.B. 'Warum ist die Jeans immer dreckig vom Hauptdarsteller?' oder 'Warum sehen die Augen immer komisch aus?'",className:"w-full h-24 px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),f.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[f.jsx("h4",{className:"text-sm font-semibold text-slate-200 mb-2 flex items-center gap-2",children:"💡 Beispiel-Fragen"}),f.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[f.jsx("div",{children:'• "Warum sind die Haare immer unscharf?"'}),f.jsx("div",{children:'• "Warum sieht das Gesicht plastisch aus?"'}),f.jsx("div",{children:'• "Warum sind die Farben immer zu dunkel?"'}),f.jsx("div",{children:'• "Warum ist der Hintergrund immer unscharf?"'})]})]}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>{Ae(!1),Be("")},className:"px-4 py-2 text-slate-300 hover:text-slate-100 transition-colors",children:"Abbrechen"}),f.jsxs("button",{onClick:Li,disabled:qe||!De.trim(),className:"flex items-center gap-2 px-4 py-2 bg-teal-600 hover:bg-teal-700 disabled:bg-teal-800 disabled:opacity-50 text-white rounded-md transition-colors",children:[qe?f.jsx(Hn,{className:"w-4 h-4 animate-spin"}):f.jsx(Fl,{className:"w-4 h-4"}),qe?"Analysiere...":"Prompt analysieren"]})]})]})]})}),f.jsxs("div",{className:"h-6 bg-slate-900/50 border-t border-slate-700/30 flex items-center justify-between px-3 text-xs text-slate-500 backdrop-blur-sm",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{className:"opacity-60",children:[i.length," chars"]}),f.jsxs("span",{className:"opacity-60",children:["Ln ",X.lineNumber,", Col ",X.column]}),(()=>{const w=Yt();return w&&f.jsxs("span",{className:"text-blue-400/70",children:["Selected: ",w.length]})})(),f.jsxs("span",{className:"text-green-400/60",children:["⚡ ",$u.getStats().totalKeywords,"+ keywords"]}),f.jsx("span",{className:"opacity-40",children:"|"}),f.jsx("span",{className:"text-blue-400/60",children:"Model: GPT‑5"}),f.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[f.jsx("button",{onClick:()=>{const w=i||"A cinematic portrait // SUBJECT: beautiful woman with golden hour lighting";console.log($u.debugHighlight(w)),be.success("🔍 Debug output")},className:"px-1 py-0.5 bg-slate-700/30 hover:bg-slate-600/50 rounded text-xs opacity-70 hover:opacity-100 transition-all",title:"Debug highlighting",children:"🔍"}),f.jsxs("select",{className:"px-1 py-0.5 bg-slate-700/30 border border-slate-600/30 rounded text-xs opacity-70 hover:opacity-100 transition-all focus:opacity-100",onChange:async w=>{const S=await ct.loadData("settings")||{};S.vision_model=w.target.value,await ct.saveData("settings",S),Ln(w.target.value),be.success(`Model: ${w.target.value}`)},value:br,title:"Vision model",children:[f.jsx("option",{value:"gpt-4o",children:"4o"}),f.jsx("option",{value:"gpt-4o-mini",children:"4o-mini"}),f.jsx("option",{value:"gpt-4-turbo",children:"4-turbo"})]}),f.jsxs("select",{className:"px-1 py-0.5 bg-slate-700/30 border border-slate-600/30 rounded text-xs opacity-70 hover:opacity-100 transition-all focus:opacity-100",onChange:async w=>{const S=await ct.loadData("settings")||{};S.vision_prompt_style=w.target.value,await ct.saveData("settings",S),Tn(w.target.value),be.success(`Style: ${w.target.value}`)},value:ar,title:"Prompt style",children:[f.jsx("option",{value:"detailed",children:"Detailed"}),f.jsx("option",{value:"person",children:"Person"}),f.jsx("option",{value:"artistic",children:"Artistic"}),f.jsx("option",{value:"photography",children:"Photo"}),f.jsx("option",{value:"concise",children:"Concise"})]})]}),ir&&f.jsxs("div",{className:"flex items-center space-x-1 text-blue-400/70 ml-4",children:[f.jsx("div",{className:"animate-spin rounded-full h-2 w-2 border border-blue-400/70 border-t-transparent"}),f.jsx("span",{className:"text-xs",children:"Analyzing..."})]}),jn&&f.jsxs("div",{className:"flex items-center space-x-1 text-orange-400/70 ml-4",children:[f.jsx("div",{className:"animate-spin rounded-full h-2 w-2 border border-orange-400/70 border-t-transparent"}),f.jsx("span",{className:"text-xs",children:"Shortening..."})]})]}),f.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[f.jsxs("span",{children:[T.length," prompts"]}),a&&f.jsxs("span",{children:[a.usage_count," uses"]})]})]})]})})});Cp.displayName="EditorArea";const Av=()=>[{id:"camera",title:"Kamera & Komposition",icon:ka,items:[{id:"extreme-wide",label:"Extreme Wide",prompt:"extreme wide shot, cinematic composition, vast landscape, professional photography, stunning vista, dramatic scale, epic scenery",description:"Weiteste Einstellung für große Landschaften"},{id:"wide",label:"Wide Shot",prompt:"wide shot, establishing shot, cinematic framing, full scene composition, professional photography, detailed environment",description:"Weite Einstellung für Szenen-Etablierung"},{id:"medium",label:"Medium Shot",prompt:"medium shot, balanced composition, professional portrait, natural framing, perfect lighting, detailed subject",description:"Mittlere Einstellung für Portraits"},{id:"close-up",label:"Close-up",prompt:"close-up shot, intimate framing, detailed facial features, professional portrait photography, sharp focus, beautiful lighting",description:"Nahaufnahme für Details"},{id:"extreme-close-up",label:"Extreme Close",prompt:"extreme close-up, macro photography, intricate details, sharp focus, professional lighting, stunning texture, high resolution",description:"Extreme Nahaufnahme für Texturen"},{id:"portrait",label:"Portrait",prompt:"portrait photography, professional headshot, studio lighting, sharp focus, beautiful composition, detailed facial features, high-end photography",description:"Professionelle Portraitfotografie"},{id:"aerial",label:"Aerial View",prompt:"aerial view, drone photography, bird's eye perspective, cinematic landscape, vast scenery, professional aerial shot, stunning overview",description:"Luftaufnahme von oben"},{id:"low-angle",label:"Low Angle",prompt:"low angle shot, dramatic perspective, powerful composition, cinematic framing, heroic view, professional photography",description:"Dramatische Untersicht"},{id:"high-angle",label:"High Angle",prompt:"high angle shot, overhead perspective, cinematic composition, dramatic viewpoint, professional photography, artistic framing",description:"Aufsicht von oben"},{id:"dutch-angle",label:"Dutch Angle",prompt:"dutch angle, tilted composition, dynamic framing, cinematic style, artistic perspective, professional photography, creative angle",description:"Schräge Kameraführung"},{id:"macro",label:"Macro",prompt:"macro photography, extreme close-up, intricate details, shallow depth of field, professional macro lens",description:"Makroaufnahmen"},{id:"telephoto",label:"Telephoto",prompt:"telephoto lens, compressed perspective, shallow focus, professional portrait, bokeh background",description:"Teleobjektiv-Aufnahme"},{id:"wide-angle",label:"Wide Lens",prompt:"wide angle lens, 24mm, distorted perspective, dramatic composition, architectural photography",description:"Weitwinkelobjektiv"},{id:"fisheye",label:"Fisheye",prompt:"fisheye lens, extreme wide angle, spherical distortion, creative perspective, unique viewpoint",description:"Fischaugenobjektiv"},{id:"tilt-shift",label:"Tilt-Shift",prompt:"tilt-shift photography, selective focus, miniature effect, professional architecture shot",description:"Tilt-Shift-Effekt"},{id:"rule-thirds",label:"Rule of Thirds",prompt:"rule of thirds composition, balanced framing, professional photography, perfect positioning",description:"Drittel-Regel"},{id:"leading-lines",label:"Leading Lines",prompt:"leading lines composition, perspective lines, architectural photography, depth illusion",description:"Führende Linien"},{id:"symmetry",label:"Symmetry",prompt:"symmetrical composition, perfect balance, architectural photography, mirror effect",description:"Symmetrische Komposition"},{id:"framing",label:"Natural Frame",prompt:"natural framing, frame within frame, creative composition, architectural elements",description:"Natürlicher Rahmen"},{id:"negative-space",label:"Negative Space",prompt:"negative space composition, minimalist framing, clean background, subject isolation",description:"Negativraum"},{id:"depth-field",label:"Shallow DOF",prompt:"shallow depth of field, bokeh background, subject isolation, professional portrait",description:"Geringe Schärfentiefe"},{id:"deep-focus",label:"Deep Focus",prompt:"deep focus, everything sharp, landscape photography, wide aperture, professional quality",description:"Tiefe Schärfe"}]},{id:"lighting",title:"Beleuchtung",icon:ew,items:[{id:"natural",label:"Natural Light",prompt:"natural lighting, soft daylight, beautiful ambient light, organic illumination, professional photography, realistic lighting",description:"Natürliches Tageslicht"},{id:"cinematic",label:"Cinematic",prompt:"cinematic lighting, dramatic illumination, movie-style lighting, professional cinematography, moody atmosphere, film-quality lighting",description:"Kinoreife Beleuchtung"},{id:"golden-hour",label:"Golden Hour",prompt:"golden hour lighting, warm sunset glow, magical hour, beautiful natural light, professional outdoor photography, stunning atmosphere",description:"Warmes Sonnenuntergangslicht"},{id:"blue-hour",label:"Blue Hour",prompt:"blue hour lighting, twilight atmosphere, deep blue sky, magical evening light, professional photography, serene ambiance",description:"Blaue Stunde am Abend"},{id:"stormy",label:"Stormy Scene",prompt:"stormy weather, dramatic clouds, moody ambient light, rain-soaked reflections, lightning in distance, cinematic tension",description:"Dramatische Gewitterszene"},{id:"neon-alley",label:"Neon Alley",prompt:"rainy neon-lit alley, cyberpunk glow, colorful reflections on wet ground, backlit silhouettes, atmospheric fog",description:"Urbane Neon-Gasse bei Regen"},{id:"sun-dappled-forest",label:"Sun‑Dappled Forest",prompt:"sun dappled forest, shafts of light through leaves, soft ambient glow, misty atmosphere, tranquil natural scene",description:"Waldszene mit Lichtstrahlen"},{id:"campfire-night",label:"Campfire Night",prompt:"nighttime campfire, warm flickering firelight, faces lit by flames, deep blue ambient night, cozy atmosphere",description:"Nacht am Lagerfeuer"},{id:"volumetric",label:"Volumetric",prompt:"volumetric lighting, god rays, atmospheric lighting, cinematic beams, professional photography, dramatic light rays",description:"Sichtbare Lichtstrahlen"},{id:"neon",label:"Neon",prompt:"neon lighting, cyberpunk atmosphere, colorful glow, urban night scene, professional photography, futuristic illumination",description:"Neonlicht für urbane Szenen"},{id:"moonlit-noir",label:"Moonlit Noir",prompt:"noir lighting, deep shadows, strong chiaroscuro, silver moonlight, sharp rim light, cinematic contrast, moody atmosphere",description:"Film-Noir bei Mondlicht"},{id:"high-key-studio",label:"High-Key Studio",prompt:"high key studio lighting, soft even illumination, minimal shadows, clean backdrop, beauty dish and softboxes, editorial look",description:"Helles Studio-Setup"},{id:"low-key-portrait",label:"Low-Key Portrait",prompt:"low key lighting, dramatic shadows, single key light, deep blacks, cinematic mood, subtle edge light",description:"Dunkles, dramatisches Portrait"},{id:"sunset-backlit",label:"Sunset Backlit",prompt:"backlit by warm sunset, glowing rim light, flares and haze, golden halo, dreamy romantic atmosphere",description:"Gegenlicht im Sonnenuntergang"},{id:"practical-neons",label:"Practical Neons",prompt:"practical neon lights, magenta and cyan color wash, reflective surfaces, wet streets, atmospheric vapor",description:"Neons als praktische Lichtquellen"}]},{id:"style",title:"Stil & Optik",icon:Zl,items:[{id:"photorealistic",label:"Photorealistic",prompt:"photorealistic, hyperrealistic, ultra-detailed, lifelike, professional photography, stunning realism, high resolution, perfect details",description:"Fotorealistische Darstellung"},{id:"cinematic",label:"Cinematic",prompt:"cinematic style, movie-quality, film grain, professional cinematography, dramatic composition, Hollywood-style, epic visuals",description:"Kinoreifer Stil"},{id:"vintage",label:"Vintage",prompt:"vintage style, retro aesthetic, classic photography, nostalgic mood, film photography, timeless appeal, aged patina",description:"Vintage-Ästhetik"},{id:"minimalist",label:"Minimalist",prompt:"minimalist style, clean composition, simple elegance, professional design, modern aesthetic, uncluttered, sophisticated",description:"Reduzierte, elegante Optik"},{id:"dramatic",label:"Dramatic",prompt:"dramatic style, intense mood, powerful composition, bold contrasts, cinematic drama, professional photography, striking visuals",description:"Dramatische Bildsprache"},{id:"elegant",label:"Elegant",prompt:"elegant style, sophisticated composition, refined aesthetics, luxury photography, high-end visuals, premium quality, tasteful design",description:"Elegante, gehobene Optik"},{id:"artistic",label:"Artistic",prompt:"artistic style, creative composition, fine art photography, unique perspective, professional artistry, gallery-worthy, expressive",description:"Künstlerische Darstellung"},{id:"fashion",label:"Fashion",prompt:"fashion photography, high-end style, professional modeling, studio quality, magazine-worthy, elegant composition, luxury aesthetic",description:"Mode-Fotografie"}]},{id:"colors",title:"Farben & Mood",icon:$s,items:[{id:"warm-tones",label:"Warm Tones",prompt:"warm color palette, golden tones, amber hues, cozy atmosphere, sunset colors",description:"Warme Farbtöne"},{id:"cool-tones",label:"Cool Tones",prompt:"cool color palette, blue tones, cyan hues, modern atmosphere, ice colors",description:"Kühle Farbtöne"},{id:"monochrome",label:"Monochrome",prompt:"monochrome photography, black and white, high contrast, artistic mood",description:"Schwarz-Weiß"},{id:"sepia",label:"Sepia",prompt:"sepia tone, vintage brown, nostalgic mood, classic photography",description:"Sepia-Tönung"},{id:"vibrant",label:"Vibrant",prompt:"vibrant colors, saturated tones, bold palette, energetic mood",description:"Lebendige Farben"},{id:"muted",label:"Muted",prompt:"muted colors, desaturated tones, subtle palette, calm mood",description:"Gedämpfte Farben"},{id:"neon",label:"Neon",prompt:"neon colors, electric blue, hot pink, cyberpunk palette, futuristic mood",description:"Neonfarben"},{id:"pastel",label:"Pastel",prompt:"pastel colors, soft tones, gentle palette, dreamy mood",description:"Pastelltöne"},{id:"earth-tones",label:"Earth Tones",prompt:"earth tones, natural colors, brown ochre, organic palette",description:"Erdtöne"},{id:"complementary",label:"Complementary",prompt:"complementary colors, opposite hues, dynamic contrast, bold palette",description:"Komplementärfarben"},{id:"analogous",label:"Analogous",prompt:"analogous colors, harmonious tones, smooth transitions, balanced palette",description:"Verwandte Farben"},{id:"gradient",label:"Gradient",prompt:"gradient colors, smooth transition, ombre effect, flowing tones",description:"Farbverlauf"}]},{id:"quality",title:"Qualität & Technik",icon:Pd,items:[{id:"professional",label:"Professional",prompt:"professional photography, expert technique, high-end equipment, perfect exposure, commercial quality, award-winning",description:"Professionelle Fotoqualität"},{id:"high-res",label:"High Resolution",prompt:"high resolution, ultra-detailed, sharp focus, crystal clear, professional quality, stunning detail, pristine image quality",description:"Hohe Auflösung und Schärfe"},{id:"bokeh",label:"Bokeh",prompt:"beautiful bokeh, shallow depth of field, professional lens, artistic blur, stunning background separation, dreamy atmosphere",description:"Schöne Hintergrundunschärfe"},{id:"sharp",label:"Tack Sharp",prompt:"tack sharp, crystal clear focus, professional sharpness, perfect detail, high-end lens quality, stunning clarity",description:"Perfekte Schärfe"},{id:"8k",label:"8K Quality",prompt:"8K resolution, ultra high definition, maximum detail, professional capture, crystal clarity",description:"8K Auflösung"},{id:"4k",label:"4K Quality",prompt:"4K resolution, high definition, sharp detail, professional quality, crisp image",description:"4K Auflösung"},{id:"hdr",label:"HDR",prompt:"HDR photography, high dynamic range, perfect exposure, detailed shadows and highlights",description:"HDR-Fotografie"},{id:"raw",label:"RAW Quality",prompt:"RAW photography, uncompressed quality, professional capture, maximum detail retention",description:"RAW-Qualität"},{id:"grain",label:"Film Grain",prompt:"film grain, analog texture, cinematic quality, vintage feel, authentic look",description:"Filmkorn"},{id:"noise-free",label:"Noise Free",prompt:"noise free, clean image, perfect quality, professional capture, pristine result",description:"Rauschfrei"},{id:"color-accurate",label:"Color Accurate",prompt:"color accurate, perfect color reproduction, calibrated colors, professional quality",description:"Farbgetreu"},{id:"dynamic-range",label:"Dynamic Range",prompt:"wide dynamic range, perfect exposure balance, detailed shadows, bright highlights",description:"Dynamikumfang"},{id:"chromatic",label:"Chromatic Free",prompt:"no chromatic aberration, perfect lens correction, professional optics quality",description:"Chromatikfrei"},{id:"vignette",label:"Subtle Vignette",prompt:"subtle vignette effect, natural darkening, professional finish, focused attention",description:"Dezente Vignette"}]}],Nv=()=>[{id:"camera-video",title:"Kamera & Bewegung",icon:ka,items:[{id:"pan-left",label:"Pan Left",prompt:"smooth camera pan left, cinematic movement, fluid motion, professional cinematography, steady tracking, elegant sweep",description:"Gleichmäßige Kameraschwenkung nach links"},{id:"pan-right",label:"Pan Right",prompt:"smooth camera pan right, cinematic movement, fluid motion, professional cinematography, steady tracking, graceful sweep",description:"Gleichmäßige Kameraschwenkung nach rechts"},{id:"tilt-up",label:"Tilt Up",prompt:"camera tilt up, revealing shot, dramatic upward movement, cinematic technique, professional cinematography, powerful reveal",description:"Kameraneigung nach oben"},{id:"tilt-down",label:"Tilt Down",prompt:"camera tilt down, dramatic downward movement, cinematic reveal, professional technique, smooth motion, elegant descent",description:"Kameraneigung nach unten"},{id:"dolly-in",label:"Dolly In",prompt:"dolly in shot, smooth approach, cinematic push-in, professional camera movement, dramatic zoom, intimate framing",description:"Kamerafahrt zum Motiv hin"},{id:"dolly-out",label:"Dolly Out",prompt:"dolly out shot, smooth pullback, cinematic reveal, professional camera movement, expanding view, dramatic retreat",description:"Kamerafahrt vom Motiv weg"},{id:"tracking-left",label:"Tracking Left",prompt:"tracking shot left, smooth lateral movement, cinematic following, professional cinematography, fluid motion, elegant tracking",description:"Seitliche Verfolgungsfahrt nach links"},{id:"tracking-right",label:"Tracking Right",prompt:"tracking shot right, smooth lateral movement, cinematic following, professional cinematography, fluid motion, graceful tracking",description:"Seitliche Verfolgungsfahrt nach rechts"},{id:"crane-up",label:"Crane Up",prompt:"crane shot ascending, dramatic upward movement, cinematic elevation, professional cinematography, majestic rise, aerial perspective",description:"Kranfahrt nach oben"},{id:"crane-down",label:"Crane Down",prompt:"crane shot descending, dramatic downward movement, cinematic descent, professional cinematography, graceful fall, ground perspective",description:"Kranfahrt nach unten"},{id:"orbit",label:"Orbit Shot",prompt:"orbit shot, circular camera movement, 360-degree rotation, cinematic technique, professional cinematography, dynamic rotation",description:"Kreisförmige Kamerafahrt um das Motiv"},{id:"handheld",label:"Handheld",prompt:"handheld camera, organic movement, realistic shake, documentary style, natural motion, authentic feel, intimate cinematography",description:"Handkamera für natürliche Bewegung"},{id:"steadicam",label:"Steadicam",prompt:"steadicam shot, smooth floating movement, professional stabilization, cinematic flow, seamless motion, elegant glide",description:"Stabilisierte, schwebende Kameraführung"},{id:"locked-off",label:"Locked Off",prompt:"locked off camera, static shot, tripod stability, professional setup, steady framing, controlled composition",description:"Statische Kamera auf Stativ"},{id:"gimbal",label:"Gimbal",prompt:"gimbal stabilized, smooth movement, professional stabilization, cinematic flow, fluid motion, modern cinematography",description:"Gimbal-stabilisierte Aufnahme"},{id:"drone",label:"Drone Shot",prompt:"drone cinematography, aerial movement, sweeping shots, cinematic elevation, professional aerial work, stunning perspectives",description:"Drohnenaufnahme aus der Luft"}]},{id:"style-video",title:"Style",icon:Zl,items:[{id:"cinematic-style",label:"Cinematic",prompt:"cinematic style, filmic color grading, soft contrast, subtle film grain, gentle halation, professional cinematography",description:"Filmischer Look"},{id:"documentary",label:"Documentary",prompt:"documentary style, natural colors, realistic handheld motion, available light, authentic tone",description:"Dokumentarischer Stil"},{id:"music-video",label:"Music Video",prompt:"music video style, bold color palette, dynamic cuts, stylized lighting, high energy visuals",description:"Knackiger Musikvideo-Look"}]},{id:"motion-effects",title:"Bewegungseffekte",icon:Rd,items:[{id:"slow-motion",label:"Slow Motion",prompt:"slow motion, dramatic timing, cinematic speed, professional slow-mo, elegant movement, time manipulation, beautiful flow",description:"Zeitlupe für dramatische Effekte"},{id:"time-lapse",label:"Time Lapse",prompt:"time lapse, accelerated time, compressed motion, cinematic technique, professional time manipulation, dynamic progression",description:"Zeitraffer-Effekt"},{id:"hyperlapse",label:"Hyperlapse",prompt:"hyperlapse, moving time-lapse, dynamic motion, cinematic technique, professional execution, stunning movement",description:"Bewegter Zeitraffer"},{id:"freeze-frame",label:"Freeze Frame",prompt:"freeze frame, motion stop, dramatic pause, cinematic technique, professional timing, impactful moment",description:"Eingefrorene Bewegung"},{id:"speed-ramping",label:"Speed Ramping",prompt:"speed ramping, variable speed, cinematic timing, professional technique, dynamic tempo, smooth transitions",description:"Variable Geschwindigkeit"}]},{id:"camera-shake",title:"Kamera-Dynamik",icon:Nd,items:[{id:"subtle-shake",label:"Subtle Shake",prompt:"subtle camera shake, natural movement, realistic motion, organic feel, professional handheld, authentic cinematography",description:"Dezente Kamerabewegung"},{id:"action-shake",label:"Action Shake",prompt:"action camera shake, intense movement, dynamic motion, adrenaline-fueled, professional action cinematography, energetic feel",description:"Dynamische Action-Kamera"},{id:"whip-pan",label:"Whip Pan",prompt:"whip pan, fast camera movement, motion blur transition, dynamic cinematography, professional technique, energetic cut",description:"Schnelle Kameraschwenkung"},{id:"crash-zoom",label:"Crash Zoom",prompt:"crash zoom, rapid zoom movement, dramatic effect, cinematic technique, professional execution, intense focus",description:"Abrupte Zoom-Bewegung"},{id:"dutch-roll",label:"Dutch Roll",prompt:"dutch roll, tilted movement, disorienting effect, cinematic technique, professional execution, dynamic angle",description:"Rollende Kamerabewegung"}]}];function Pv({activeWorkflow:n,onInsertPrompt:e,onWorkflowChange:t,onSmartInsertPrompt:i,onPresetClick:o}){const[a,d]=H.useState([]),[h,m]=H.useState(Av()),[v,x]=H.useState(Nv()),[T,C]=H.useState(null),z=n==="image"?h:v,G=ie=>ie.map(R=>({id:R.id,title:R.title,items:R.items})),K=(ie,R)=>{const k={camera:ka,lighting:ew,style:Zl,"style-video":Zl,colors:$s,quality:Pd,"camera-video":ka,"motion-effects":Rd,"camera-shake":Nd},A=Object.fromEntries(R.map(P=>[P.id,P])),O=Object.fromEntries((ie||[]).map(P=>[P.id,P])),D=new Set([...Object.keys(A),...Object.keys(O)]),N=[];for(const P of D){const Ae=A[P],De=O[P],Be=Ae&&Ae.icon||k[P]||ka,qe=De&&De.title||Ae&&Ae.title||P,ge=Array.isArray(De?.items)?De.items:[],Te=Array.isArray(Ae?.items)?Ae.items:[],_e=new Set(ge.map(Ie=>Ie.id)),F=Te.filter(Ie=>!_e.has(Ie.id)),se=[...ge,...F];N.push({id:P,title:qe,icon:Be,items:se})}return N};H.useEffect(()=>{(async()=>{const R=await ct.loadData("prompt_presets_image"),k=await ct.loadData("prompt_presets_video");Array.isArray(R)&&R.length&&m(K(R,Av())),Array.isArray(k)&&k.length&&x(K(k,Nv()))})()},[]);const B=async(ie,R)=>{const k=R==="image"?"prompt_presets_image":"prompt_presets_video";await ct.saveData(k,G(ie))},ee=async(ie,R,k)=>{const A=n==="image"?m:x,D=(n==="image"?h:v).map(N=>N.id===ie?{...N,items:N.items.map(P=>P.id===R?{...P,...k}:P)}:N);A(D),await B(D,n)},te=async ie=>{const R=n==="image"?m:x,k=n==="image"?h:v,A={id:`item_${Date.now()}`,label:"Neues Element",prompt:"",description:""},O=k.map(D=>D.id===ie?{...D,items:[A,...D.items]}:D);R(O),await B(O,n),C({categoryId:ie,itemId:A.id})},pe=async(ie,R)=>{const k=n==="image"?m:x,O=(n==="image"?h:v).map(D=>D.id===ie?{...D,items:D.items.filter(N=>N.id!==R)}:D);k(O),await B(O,n),T&&T.categoryId===ie&&T.itemId===R&&C(null)},we=ie=>{d(R=>R.includes(ie)?R.filter(k=>k!==ie):[...R,ie])},re=(ie,R,k)=>{if(o){o(ie,R,k);return}if(i){i(ie,R);return}e(ie)};return f.jsxs("div",{className:"h-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:[f.jsx("div",{className:"p-2 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:"Prompt Elements"}),f.jsxs("div",{className:"segmented",children:[f.jsx("button",{onClick:()=>t?.("image"),className:dn("segment text-xs",n==="image"&&"active"),children:"📸 Photo"}),f.jsx("button",{onClick:()=>t?.("video"),className:dn("segment text-xs",n==="video"&&"active"),children:"🎬 Video"})]})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-1.5 space-y-1 bg-white dark:bg-slate-800",children:z.map(ie=>{const R=a.includes(ie.id);return f.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded bg-slate-50 dark:bg-slate-900",children:[f.jsxs("div",{className:"w-full flex items-center gap-1.5 p-2 rounded-t",children:[f.jsxs("button",{onClick:()=>we(ie.id),className:"flex items-center gap-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors rounded px-1",children:[R?f.jsx(Wv,{className:"w-3 h-3 text-slate-500 dark:text-slate-400"}):f.jsx(Xf,{className:"w-3 h-3 text-slate-500 dark:text-slate-400"}),f.jsx(ie.icon,{className:"w-3 h-3 text-slate-600 dark:text-slate-400"}),f.jsx("span",{className:"text-xs font-medium text-slate-900 dark:text-slate-100 truncate",children:ie.title})]}),f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 ml-auto bg-slate-200 dark:bg-slate-700 px-1 rounded-full",children:ie.items.length}),f.jsx("button",{onClick:()=>te(ie.id),className:"ml-1 px-1 text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",title:"Neues Element hinzufügen",children:f.jsx(AE,{className:"w-3 h-3"})})]}),R&&f.jsx("div",{className:"p-1.5 pt-0 bg-slate-50 dark:bg-slate-900 rounded-b",children:f.jsx("div",{className:dn("grid gap-1","grid-cols-2"),children:ie.items.map(k=>f.jsxs("div",{className:"group relative w-full p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[f.jsx("button",{onClick:()=>C({categoryId:ie.id,itemId:k.id}),className:"absolute top-1 right-1 p-1 rounded bg-slate-700/60 text-white opacity-0 group-hover:opacity-100 transition-opacity",title:"Dieses Element bearbeiten",children:f.jsx(Zf,{className:"w-3 h-3"})}),T&&T.categoryId===ie.id&&T.itemId===k.id?f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("input",{className:"flex-1 px-2 py-1 text-xs rounded bg-slate-800/40 border border-slate-700/60 text-slate-100",value:k.label,onChange:A=>ee(ie.id,k.id,{label:A.target.value}),placeholder:"Label"}),f.jsx("button",{onClick:()=>pe(ie.id,k.id),className:"px-2 py-1 text-xs rounded border border-red-400/50 text-red-400 hover:bg-red-500/10",title:"Löschen",children:f.jsx(Ul,{className:"w-3 h-3"})})]}),f.jsx("textarea",{className:"w-full px-2 py-1 text-xs rounded bg-slate-800/40 border border-slate-700/60 text-slate-100",value:k.prompt,onChange:A=>ee(ie.id,k.id,{prompt:A.target.value}),placeholder:"Prompt-Inhalt",rows:3}),f.jsx("input",{className:"w-full px-2 py-1 text-xs rounded bg-slate-800/40 border border-slate-700/60 text-slate-100",value:k.description||"",onChange:A=>ee(ie.id,k.id,{description:A.target.value}),placeholder:"Beschreibung (optional)"}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{onClick:()=>C(null),className:"text-xs px-2 py-1 rounded border hover:bg-slate-100/60 dark:hover:bg-slate-700/60 border-slate-300/40",children:"Fertig"})})]}):f.jsxs("button",{onClick:()=>re(k.prompt,ie.id,k.label),className:"w-full text-left",title:k.prompt,children:[f.jsx("div",{className:"text-xs font-medium text-slate-900 dark:text-slate-100 truncate mb-0.5",children:k.label}),f.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 leading-tight line-clamp-2",children:k.description||k.prompt.split(",")[0]})]})]},k.id))})})]},ie.id)})})]})}const GR={image:Dp,video:rw,text:oT},KR={image:"text-blue-500",video:"text-purple-500",text:"text-green-500"};function WR({section:n}){const[e,t]=H.useState([]),[i,o]=H.useState(!0),[a,d]=H.useState(""),[h,m]=H.useState("grid"),[v,x]=H.useState(null);async function T(){try{o(!0);const ee=await AP({section:n,searchTerm:a});t(ee)}catch(ee){console.error("Error loading prompts:",ee),ut.error(ee?.message||"Fehler beim Laden der Prompts")}finally{o(!1)}}H.useEffect(()=>{T()},[n]),H.useEffect(()=>{const ee=setTimeout(()=>T(),300);return()=>clearTimeout(ee)},[a]);const C=async ee=>{try{await navigator.clipboard.writeText(ee.content),ut.success("Prompt kopiert!"),await RP(ee.id),t(te=>te.map(pe=>pe.id===ee.id?{...pe,copy_count:(pe.copy_count||0)+1}:pe))}catch{ut.error("Kopieren fehlgeschlagen")}},z=async ee=>{try{const te=!ee.is_favorite;t(pe=>pe.map(we=>we.id===ee.id?{...we,is_favorite:te}:we)),await PP(ee.id,te),ut.success(te?"Zu Favoriten hinzugefügt":"Aus Favoriten entfernt")}catch{ut.error("Fehler beim Aktualisieren der Favoriten"),t(pe=>pe.map(we=>we.id===ee.id?{...we,is_favorite:!we.is_favorite}:we))}},G=H.useMemo(()=>e,[e]),K=()=>{switch(n){case"featured":return"Empfohlene Prompts";case"image-prompts":return"Bild-Prompts";case"video-prompts":return"Video-Prompts";case"text-prompts":return"Text-Prompts";default:return"Prompt-Bibliothek"}},B=ee=>{const te=GR[ee.type],pe=KR[ee.type];return f.jsxs("div",{className:dn("group bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 hover:shadow-lg hover:border-slate-300 dark:hover:border-slate-600 transition-all duration-200 cursor-pointer",h==="grid"?"min-h-[220px]":"min-h-[120px]"),onClick:()=>x(ee),children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:dn("inline-flex h-6 w-6 items-center justify-center rounded-md bg-slate-100 dark:bg-slate-900",pe),children:f.jsx(te,{className:dn("w-3.5 h-3.5")})}),f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 capitalize",children:ee.type})]}),f.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:we=>{we.stopPropagation(),z(ee)},className:dn("p-1.5 rounded-md transition-colors",ee.is_favorite?"text-rose-500 hover:bg-rose-500/10":"text-slate-500 hover:bg-slate-500/10"),children:f.jsx(Jv,{className:dn("w-4 h-4",ee.is_favorite&&"fill-current")})}),f.jsx("button",{onClick:we=>{we.stopPropagation(),C(ee)},className:"p-1.5 rounded-md text-slate-500 hover:bg-slate-500/10",children:f.jsx(Rp,{className:"w-4 h-4"})})]})]}),f.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-2 line-clamp-1",children:ee.title}),f.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 line-clamp-3",children:ee.description||ee.content}),f.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Xv,{className:"w-3 h-3"}),f.jsx("span",{children:ee.copy_count})]}),f.jsx("div",{className:"flex items-center gap-1",children:(ee.tags||[]).slice(0,3).map(we=>f.jsxs("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-900 text-[10px]",children:["#",we]},we))})]})]},ee.id)};return f.jsxs("div",{className:"flex-1 p-4 md:p-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4 md:mb-6",children:[f.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white",children:K()}),f.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[f.jsxs("div",{className:"relative flex-1 md:flex-none md:w-64",children:[f.jsx(Fl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),f.jsx("input",{value:a,onChange:ee=>d(ee.target.value),placeholder:"Suche in Titeln und Inhalten",className:"w-full pl-8 pr-3 py-2 text-sm rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:focus:ring-slate-700"})]}),f.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[f.jsx("button",{onClick:()=>m("grid"),className:dn("p-2 rounded-lg border",h==="grid"?"border-blue-500 text-blue-600":"border-slate-200 dark:border-slate-700"),children:f.jsx(UE,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>m("list"),className:dn("p-2 rounded-lg border",h==="list"?"border-blue-500 text-blue-600":"border-slate-200 dark:border-slate-700"),children:f.jsx(HE,{className:"w-4 h-4"})})]})]})]}),i?f.jsx("div",{className:"py-12 text-center text-slate-500",children:"Lade Prompts..."}):f.jsx("div",{className:dn("grid gap-4",h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:G.map(B)}),v&&f.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",onClick:()=>x(null),children:f.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl max-w-3xl w-full p-6 border border-slate-200 dark:border-slate-700",onClick:ee=>ee.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:v.title}),f.jsx("button",{onClick:()=>x(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg",children:f.jsx(Ji,{className:"w-4 h-4"})})]}),f.jsx("div",{className:"prose prose-invert max-w-none text-sm",children:f.jsx("pre",{className:"whitespace-pre-wrap",children:v.content})})]})})]})}const QR=[{id:"profile",title:"Profil",icon:cT,description:"Verwalten Sie Ihre persönlichen Informationen"},{id:"appearance",title:"Darstellung",icon:Zl,description:"Theme, Sprache und UI-Einstellungen"},{id:"editor",title:"Editor",icon:YE,description:"Editor-Verhalten und Tastenkürzel"},{id:"chatgpt",title:"ChatGPT",icon:Zv,description:"ChatGPT API-Integration für Prompt-Verbesserung"},{id:"notifications",title:"Benachrichtigungen",icon:Gv,description:"E-Mail und Push-Benachrichtigungen"},{id:"privacy",title:"Datenschutz",icon:nw,description:"Datenschutz und Sicherheitseinstellungen"},{id:"data",title:"Daten",icon:Yv,description:"Import, Export und Backup"}];function YR({onClose:n}){const{user:e,signOut:t}=Tc(),[i,o]=H.useState("appearance"),[a,d]=H.useState("de"),[h,m]=H.useState({fontSize:14,tabSize:2,wordWrap:!0,minimap:!1,lineNumbers:!0,autoSave:!0,autoComplete:!0}),[v,x]=H.useState({email:!0,community:!0,updates:!1,marketing:!1}),[T,C]=H.useState({full_name:"",username:"",bio:"",website:"",github_url:"",twitter_url:""}),[z,G]=H.useState({apiKey:"",model:"gpt-5",temperature:.7,maxTokens:1e3,enabled:!1});H.useEffect(()=>{(async()=>{try{const N=await ct.loadData("settings");N&&(console.log("Loaded settings:",N),d(N.language||"de"),m(N.editor||h),x(N.notifications||v),G({...N.chatgpt||z,model:"gpt-5"})),document.documentElement.classList.add("dark"),document.body.classList.add("dark")}catch(N){console.error("Error loading settings:",N)}})()},[]);const K=async()=>{try{await t()}catch{}},B=async()=>{try{const D={theme:"dark",language:a,editor:h,notifications:v,chatgpt:{...z,model:"gpt-5"}};await ct.saveData("settings",D);try{tr.updateSettings()}catch{}console.log("Settings saved:",D),ut.success("Einstellungen gespeichert!")}catch(D){console.error("Error saving settings:",D),ut.error("Fehler beim Speichern der Einstellungen")}},ee=()=>{ut.success("Datenexport wird vorbereitet...")},te=()=>{ut.success("Import-Funktion wird bald verfügbar sein")},pe=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Profilinformationen"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Vollständiger Name"}),f.jsx("input",{type:"text",value:T.full_name,onChange:D=>C(N=>({...N,full_name:D.target.value})),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Benutzername"}),f.jsx("input",{type:"text",value:T.username,onChange:D=>C(N=>({...N,username:D.target.value})),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bio"}),f.jsx("textarea",{value:T.bio,onChange:D=>C(N=>({...N,bio:D.target.value})),rows:3,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Erzählen Sie uns etwas über sich..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Website"}),f.jsx("input",{type:"url",value:T.website,onChange:D=>C(N=>({...N,website:D.target.value})),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GitHub"}),f.jsx("input",{type:"url",value:T.github_url,onChange:D=>C(N=>({...N,github_url:D.target.value})),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://github.com/username"})]})]})]}),f.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Konto"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-800 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"E-Mail-Adresse"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e?.email})]}),f.jsx("button",{className:"px-3 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Ändern"})]}),f.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-800 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Passwort"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Zuletzt geändert vor 3 Monaten"})]}),f.jsx("button",{className:"px-3 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Ändern"})]})]}),f.jsx("div",{className:"mt-6",children:f.jsxs("button",{onClick:K,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium flex items-center gap-2",children:[f.jsx(KE,{className:"w-4 h-4"}),"Abmelden"]})})]})]}),we=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Theme"}),f.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(tw,{className:"w-6 h-6 text-slate-600 dark:text-slate-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Dunkles Theme"}),f.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Aktiv (nicht änderbar)"})]})]})})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Sprache"}),f.jsxs("select",{value:a,onChange:D=>d(D.target.value),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"de",children:"Deutsch"}),f.jsx("option",{value:"en",children:"English"}),f.jsx("option",{value:"fr",children:"Français"}),f.jsx("option",{value:"es",children:"Español"})]})]}),f.jsx("div",{className:"mt-6",children:f.jsxs("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2",children:[f.jsx(Sl,{className:"w-4 h-4"}),"Anwenden"]})})]}),re=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Editor-Einstellungen"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Schriftgröße"}),f.jsx("input",{type:"range",min:"10",max:"24",value:h.fontSize,onChange:D=>m(N=>({...N,fontSize:parseInt(D.target.value)})),className:"w-full"}),f.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[f.jsx("span",{children:"10px"}),f.jsxs("span",{className:"font-mono font-bold",children:[h.fontSize,"px"]}),f.jsx("span",{children:"24px"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tab-Größe"}),f.jsxs("select",{value:h.tabSize,onChange:D=>m(N=>({...N,tabSize:parseInt(D.target.value)})),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"2",children:"2 Leerzeichen"}),f.jsx("option",{value:"4",children:"4 Leerzeichen"}),f.jsx("option",{value:"8",children:"8 Leerzeichen"})]})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:Object.entries({wordWrap:"Zeilenumbruch",minimap:"Minimap anzeigen",lineNumbers:"Zeilennummern",autoSave:"Automatisch speichern",autoComplete:"Auto-Vervollständigung"}).map(([D,N])=>f.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:h[D],onChange:P=>m(Ae=>({...Ae,[D]:P.target.checked})),className:"w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),f.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:N})]},D))})]}),f.jsx("div",{className:"mt-6",children:f.jsxs("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2",children:[f.jsx(Sl,{className:"w-4 h-4"}),"Anwenden"]})})]}),ie=()=>{const D=z.apiKey&&z.apiKey.startsWith("sk-"),N=D&&z.enabled;return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"ChatGPT API Integration"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Konfigurieren Sie die ChatGPT API-Integration, um Prompts automatisch zu verbessern und zu optimieren."}),f.jsxs("div",{className:`p-4 rounded-lg mb-6 ${N?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800"}`,children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-3 h-3 rounded-full ${N?"bg-green-500":"bg-amber-500"}`}),f.jsx("span",{className:`font-medium ${N?"text-green-800 dark:text-green-200":"text-amber-800 dark:text-amber-200"}`,children:N?"ChatGPT Integration ist aktiv":"ChatGPT Integration ist inaktiv"})]}),!N&&f.jsx("div",{className:"mt-2 text-sm text-amber-700 dark:text-amber-300",children:D?"Bitte aktivieren Sie die Integration unten":"Bitte geben Sie einen gültigen API-Key ein"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["API Key ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"password",value:z.apiKey,onChange:P=>G(Ae=>({...Ae,apiKey:P.target.value})),placeholder:"sk-...",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 ${D?"border-green-300 dark:border-green-600":"border-slate-300 dark:border-slate-600"}`}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Ihr API-Key wird lokal gespeichert und nicht übertragen."}),z.apiKey&&!D&&f.jsx("p",{className:"text-xs text-red-500 mt-1",children:'Der API-Key muss mit "sk-" beginnen'})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Modell"}),f.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"GPT‑5 (fest eingestellt)"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Kreativität (Temperature): ",z.temperature]}),f.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:z.temperature,onChange:P=>G(Ae=>({...Ae,temperature:parseFloat(P.target.value)})),className:"w-full"}),f.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[f.jsx("span",{children:"Präzise"}),f.jsx("span",{children:"Kreativ"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Max Tokens"}),f.jsx("input",{type:"number",min:"100",max:"4000",value:z.maxTokens,onChange:P=>G(Ae=>({...Ae,maxTokens:parseInt(P.target.value)})),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100"})]}),f.jsxs("div",{className:"border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg p-4 bg-blue-50 dark:bg-blue-900/20",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("input",{type:"checkbox",id:"chatgpt-enabled",checked:z.enabled,onChange:P=>G(Ae=>({...Ae,enabled:P.target.checked})),className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),f.jsxs("label",{htmlFor:"chatgpt-enabled",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["ChatGPT Integration aktivieren ",f.jsx("span",{className:"text-red-500",children:"*"})]})]}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 ml-8",children:"Diese Option muss aktiviert werden, um ChatGPT-Funktionen zu nutzen"})]})]})]}),f.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[f.jsx("h4",{className:"text-md font-semibold text-slate-900 dark:text-white mb-3",children:"Funktionen"}),f.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-green-500":"bg-slate-400"}`}),f.jsx("span",{children:"Prompts automatisch verbessern"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-green-500":"bg-slate-400"}`}),f.jsx("span",{children:"Textabschnitte optimieren"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-green-500":"bg-slate-400"}`}),f.jsx("span",{children:"Grammatik und Stil korrigieren"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-green-500":"bg-slate-400"}`}),f.jsx("span",{children:"Kreative Vorschläge generieren"})]})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2",children:[f.jsx(Sl,{className:"w-4 h-4"}),"Anwenden"]}),!N&&f.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400 mt-2",children:"Vergessen Sie nicht, nach dem Eingeben des API-Keys die Integration zu aktivieren und zu speichern!"})]})]})},R=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Benachrichtigungen"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Konfigurieren Sie Ihre E-Mail- und Push-Benachrichtigungen."}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-800 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"E-Mail-Benachrichtigungen"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Erhalten Sie E-Mails, wenn neue Prompts hinzugefügt werden."})]}),f.jsx("label",{className:"flex items-center gap-2",children:f.jsx("input",{type:"checkbox",checked:v.email,onChange:D=>x(N=>({...N,email:D.target.checked})),className:"w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"})})]}),f.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-800 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Community-Updates"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Erhalten Sie Updates über neue Funktionen und Verbesserungen."})]}),f.jsx("label",{className:"flex items-center gap-2",children:f.jsx("input",{type:"checkbox",checked:v.community,onChange:D=>x(N=>({...N,community:D.target.checked})),className:"w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"})})]}),f.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-800 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Marketing-Updates"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Erhalten Sie Marketing-Updates und Angebote."})]}),f.jsx("label",{className:"flex items-center gap-2",children:f.jsx("input",{type:"checkbox",checked:v.marketing,onChange:D=>x(N=>({...N,marketing:D.target.checked})),className:"w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"})})]})]})]}),f.jsx("div",{className:"mt-6",children:f.jsxs("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2",children:[f.jsx(Sl,{className:"w-4 h-4"}),"Anwenden"]})})]}),k=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Datenschutz"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Konfigurieren Sie Ihre Datenschutzeinstellungen."}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-800 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Sicherheit"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Aktivieren Sie zwei-Faktor-Authentifizierung und andere Sicherheitsfunktionen."})]}),f.jsx("button",{className:"px-3 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Sicherheitseinstellungen"})]}),f.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-800 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Datenspeicherung"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Konfigurieren Sie, wie lange Ihre Daten gespeichert werden."})]}),f.jsx("button",{className:"px-3 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Datenspeicherung"})]})]})]}),f.jsx("div",{className:"mt-6",children:f.jsxs("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2",children:[f.jsx(Sl,{className:"w-4 h-4"}),"Anwenden"]})})]}),A=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Daten verwalten"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("button",{onClick:ee,className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-white dark:hover:bg-slate-800 transition-colors text-left",children:[f.jsx(Yv,{className:"w-6 h-6 text-blue-500 mb-2"}),f.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:"Daten exportieren"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Laden Sie alle Ihre Prompts und Einstellungen herunter"})]}),f.jsxs("button",{onClick:te,className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-white dark:hover:bg-slate-800 transition-colors text-left",children:[f.jsx(aT,{className:"w-6 h-6 text-green-500 mb-2"}),f.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:"Daten importieren"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Importieren Sie Prompts aus anderen Quellen"})]})]})]}),f.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:[f.jsxs("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4 flex items-center gap-2",children:[f.jsx(Ul,{className:"w-5 h-5"}),"Gefahrenzone"]}),f.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[f.jsx("h4",{className:"font-medium text-red-800 dark:text-red-200 mb-2",children:"Konto löschen"}),f.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 mb-4",children:"Diese Aktion kann nicht rückgängig gemacht werden. Alle Ihre Daten werden permanent gelöscht."}),f.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Konto löschen"})]})]})]}),O=()=>{switch(i){case"profile":return pe();case"appearance":return we();case"editor":return re();case"chatgpt":return ie();case"notifications":return R();case"privacy":return k();case"data":return A();default:return pe()}};return f.jsxs("div",{className:"h-full flex bg-white dark:bg-slate-900 text-slate-900 dark:text-white",children:[f.jsxs("div",{className:"w-80 border-r border-slate-200 dark:border-slate-700 p-6 bg-white dark:bg-slate-900",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[f.jsx(Pd,{className:"w-6 h-6"}),"Einstellungen"]}),n&&f.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",title:"Einstellungen schließen",children:f.jsx(Ji,{className:"w-5 h-5 text-slate-500"})})]}),f.jsx("nav",{className:"space-y-2",children:QR.map(D=>{const N=i===D.id;return f.jsxs("button",{onClick:()=>o(D.id),className:dn("w-full flex items-start gap-3 p-3 rounded-lg transition-colors text-left",N?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-slate-700 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-800"),children:[f.jsx(D.icon,{className:dn("w-5 h-5 flex-shrink-0 mt-0.5",N?"text-blue-600 dark:text-blue-400":"text-slate-500")}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium",children:D.title}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:D.description})]})]},D.id)})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-white dark:bg-slate-900",children:O()})]})}function XR(){const{signIn:n,signUp:e}=Tc(),[t,i]=H.useState(!1),[o,a]=H.useState(""),[d,h]=H.useState(""),[m,v]=H.useState(""),[x,T]=H.useState(!1),[C,z]=H.useState(!1),G=async B=>{if(B.preventDefault(),!(!o||!d)&&!(t&&!m))try{z(!0),t?await e(o,d,m):await n(o,d)}catch{}finally{z(!1)}},K=[{icon:Qv,title:"IDE-ähnlicher Editor",description:"Monaco Editor mit Syntax-Highlighting und Auto-Vervollständigung"},{icon:Kv,title:"Umfangreiche Prompt-Bibliothek",description:"Kuratierte Sammlung von Prompts für Midjourney, DALL-E, Stable Diffusion"},{icon:uT,title:"Community-Features",description:"Teilen Sie Prompts, bewerten Sie Inhalte und lernen Sie von anderen"},{icon:Rd,title:"Intelligente Tools",description:"Auto-Vervollständigung, Parameter-Assistent und Prompt-Optimierung"}];return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:f.jsxs("div",{className:"flex min-h-screen",children:[f.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 to-purple-700"}),f.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-12 py-24 text-white",children:[f.jsxs("div",{className:"mb-12",children:[f.jsxs("h1",{className:"text-4xl font-bold mb-4 flex items-center gap-3",children:[f.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:f.jsx($s,{className:"w-6 h-6"})}),"Prompt IDE"]}),f.jsx("p",{className:"text-xl text-blue-100",children:"Die professionelle Entwicklungsumgebung für AI-Prompt Engineering"})]}),f.jsx("div",{className:"space-y-8",children:K.map((B,ee)=>f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0",children:f.jsx(B.icon,{className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:B.title}),f.jsx("p",{className:"text-blue-100",children:B.description})]})]},ee))}),f.jsx("div",{className:"mt-12 p-6 bg-white/10 rounded-xl backdrop-blur-sm",children:f.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),f.jsx("span",{children:"1000+ Prompts"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),f.jsx("span",{children:"50+ Creator"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),f.jsx("span",{children:"AI-Tools"})]})]})})]})]}),f.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center px-6 py-12",children:f.jsxs("div",{className:"w-full max-w-md",children:[f.jsxs("div",{className:"lg:hidden text-center mb-8",children:[f.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2 flex items-center justify-center gap-2",children:[f.jsx($s,{className:"w-8 h-8 text-blue-600"}),"Prompt IDE"]}),f.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Die professionelle Entwicklungsumgebung für AI-Prompts"})]}),f.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:t?"Konto erstellen":"Willkommen zurück"}),f.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t?"Erstellen Sie Ihr kostenloses Konto":"Melden Sie sich in Ihrem Konto an"})]}),f.jsxs("form",{onSubmit:G,className:"space-y-6",children:[t&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Vollständiger Name"}),f.jsx("input",{type:"text",value:m,onChange:B=>v(B.target.value),className:"w-full px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Max Mustermann",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"E-Mail-Adresse"}),f.jsx("input",{type:"email",value:o,onChange:B=>a(B.target.value),className:"w-full px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ihre@email.com",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Passwort"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:x?"text":"password",value:d,onChange:B=>h(B.target.value),className:"w-full px-4 py-3 pr-12 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",required:!0,minLength:6}),f.jsx("button",{type:"button",onClick:()=>T(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:x?f.jsx(ME,{className:"w-5 h-5"}):f.jsx(Xv,{className:"w-5 h-5"})})]})]}),f.jsx("button",{type:"submit",disabled:C,className:dn("w-full py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",C?"bg-slate-300 text-slate-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:C?f.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):f.jsxs(f.Fragment,{children:[t?f.jsx(lT,{className:"w-5 h-5"}):f.jsx(GE,{className:"w-5 h-5"}),t?"Konto erstellen":"Anmelden"]})})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsx("button",{onClick:()=>i(!t),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:t?"Haben Sie bereits ein Konto? Anmelden":"Noch kein Konto? Registrieren"})}),f.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-slate-900 rounded-lg",children:[f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-2",children:"Demo-Zugang:"}),f.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500 text-center space-y-1",children:[f.jsx("div",{children:"E-Mail: demo@prompt-ide.com"}),f.jsx("div",{children:"Passwort: demo123"})]})]})]}),f.jsx("div",{className:"mt-8 text-center text-sm text-slate-600 dark:text-slate-400",children:f.jsxs("p",{children:["Mit der Anmeldung stimmen Sie unseren"," ",f.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 dark:text-blue-400",children:"Nutzungsbedingungen"})," ","und der"," ",f.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 dark:text-blue-400",children:"Datenschutzerklärung"})," ","zu."]})})]})})]})})}function JR(){const{user:n,loading:e}=Tc(),[t,i]=H.useState("my-prompts"),[o,a]=H.useState(!1),[d,h]=H.useState("my-prompts"),[m,v]=H.useState("image"),x=H.useRef(null),[T,C]=H.useState(!0),[z,G]=H.useState(!1),[K,B]=H.useState(!1),[ee,te]=H.useState(0),[pe,we]=H.useState("Initialisiere…");H.useEffect(()=>{document.documentElement.classList.add("dark"),document.body.classList.add("dark")},[]),H.useEffect(()=>{const N=setTimeout(()=>C(!1),400);return()=>clearTimeout(N)},[]),H.useEffect(()=>{if(typeof window<"u"&&window.electronAPI)return window.electronAPI.onMenuAction(P=>{switch(P){case"toggle-sidebar":a(!o);break;case"open-preferences":re("settings");break}})},[o]);const re=N=>{N!=="settings"&&h(t),i(N)},ie=()=>{i(d)},R=async N=>{if(["my-prompts","collections","favorites"].includes(t)||re("my-prompts"),x.current&&x.current.createNewPrompt)try{await x.current.createNewPrompt(N)}catch(P){console.error("Error creating new prompt:",P)}},k=N=>{["my-prompts","collections","favorites"].includes(t)||re("my-prompts"),x.current&&x.current.openPrompt&&x.current.openPrompt(N)},A=N=>{if(x.current&&x.current.insertTextAtCursor){const P=x.current.getContent?x.current.getContent():"";x.current.insertTextAtCursor(N),x.current.getContent&&x.current.highlightNewContent&&setTimeout(()=>{const Ae=x.current.getContent();x.current.highlightNewContent(P,Ae)},100)}},O=async(N,P)=>{if(!x.current){console.error("Editor reference not available for smart insertion");return}try{const Ae=x.current.getContent?x.current.getContent():"";if(!Ae.trim()){A(N);return}const De=be.loading("🤖 Integrating intelligently..."),Be=await tr.intelligentlyIntegratePromptElement(Ae,N,P);be.dismiss(De),Be.success&&Be.content?(x.current&&"setContent"in x.current&&x.current.setContent(Be.content),x.current&&"highlightNewContent"in x.current&&setTimeout(()=>{x.current.highlightNewContent(Ae,Be.content)},100),be.success(`✨ Intelligently integrated "${P}" element!`)):(A(N),be.error("Smart integration failed - using simple insertion"))}catch(Ae){console.error("Smart insertion error:",Ae),A(N),be.error("Error during smart integration - using simple insertion")}};if(!e&&!n)return f.jsx(XR,{});const D=()=>{switch(t){case"my-prompts":case"persons":case"locations":case"movements":case"collections":case"favorites":return f.jsxs("div",{className:"flex h-full",children:[f.jsx("div",{className:"flex-1 h-full",children:f.jsx(Cp,{ref:x,section:t})}),f.jsx("div",{className:"w-96 h-full border-l border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 overflow-y-auto",children:f.jsx(Pv,{activeWorkflow:m,onInsertPrompt:A,onWorkflowChange:v,onSmartInsertPrompt:O})})]});case"featured":case"image-prompts":case"video-prompts":case"text-prompts":return f.jsx(WR,{section:t});case"settings":return f.jsx(YR,{onClose:ie});default:return f.jsxs("div",{className:"flex h-full",children:[f.jsx("div",{className:"flex-1 h-full",children:f.jsx(Cp,{ref:x,section:t})}),f.jsx("div",{className:"w-96 h-full border-l border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 overflow-y-auto",children:f.jsx(Pv,{activeWorkflow:m,onInsertPrompt:A,onWorkflowChange:v,onSmartInsertPrompt:O})})]})}};return f.jsxs("div",{className:"h-screen w-screen flex bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 overflow-hidden relative",children:[(e||T||!K)&&f.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/70 dark:bg-slate-900/70 backdrop-blur-xl",children:f.jsxs("div",{className:"w-[420px] max-w-[90vw] px-5 py-4 rounded-xl border border-slate-200/60 dark:border-slate-700/60 bg-white/90 dark:bg-slate-800/80 shadow-xl",children:[f.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:pe||"Wird geladen…"}),f.jsx("div",{className:"w-full h-2 rounded bg-slate-200/70 dark:bg-slate-700/60 overflow-hidden",children:f.jsx("div",{className:"h-full bg-emerald-500 transition-all",style:{width:`${Math.min(100,Math.max(0,Math.round(ee*100)))}%`}})}),f.jsxs("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 mt-1",children:[Math.min(100,Math.max(0,Math.round(ee*100))),"%"]})]})}),z&&!e&&!T&&K&&f.jsx("div",{className:"absolute top-16 right-6 z-40",children:f.jsx("div",{className:"px-2 py-2 rounded-full border border-slate-200/60 dark:border-slate-700/60 bg-white/80 dark:bg-slate-800/70 shadow-lg backdrop-blur-md",children:f.jsx(Hn,{className:"w-4 h-4 animate-spin text-slate-600 dark:text-slate-300"})})}),f.jsx(OP,{activeSection:t,onSectionChange:i,isCollapsed:o,onToggleCollapse:()=>a(!o),onNewPrompt:R,onOpenPrompt:k,onLoaded:()=>B(!0),onProgress:(N,P)=>{te(N),P&&we(P)}}),f.jsx("div",{className:"flex-1 h-full overflow-hidden",children:D()})]})}const ZR=new I1({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3}}});function e4(){const[n,e]=H.useState(!0),[t,i]=H.useState(!0);return H.useEffect(()=>{(async()=>{try{const a=window.electronAPI;if(a){const d=a.isDarkMode();i(d),a.onThemeChange(h=>{i(h)})}}catch(a){console.error("Error initializing app:",a)}finally{e(!1)}})()},[]),n?f.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-slate-900":"bg-white"}`,children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),f.jsx("h2",{className:`text-xl font-semibold mb-2 ${t?"text-white":"text-slate-900"}`,children:"Prompt IDE"}),f.jsx("p",{className:`${t?"text-slate-400":"text-slate-600"}`,children:"Wird geladen..."})]})}):f.jsx(A1,{client:ZR,children:f.jsx(DN,{children:f.jsxs("div",{className:`min-h-screen ${t?"bg-slate-900 dark":"bg-white"}`,children:[f.jsx(JR,{}),f.jsx(_E,{position:"top-right",toastOptions:{duration:4e3,className:t?"bg-slate-800 text-white":"bg-white text-slate-900",style:{background:t?"#1e293b":"#ffffff",color:t?"#ffffff":"#0f172a",border:t?"1px solid #334155":"1px solid #e2e8f0"},success:{iconTheme:{primary:"#10b981",secondary:"#ffffff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#ffffff"}}}}),f.jsx(N1,{initialIsOpen:!1})]})})})}n1.createRoot(document.getElementById("root")).render(f.jsx(H.StrictMode,{children:f.jsx(i1,{children:f.jsx(e4,{})})}));
//# sourceMappingURL=main-BP77sw1-.js.map
